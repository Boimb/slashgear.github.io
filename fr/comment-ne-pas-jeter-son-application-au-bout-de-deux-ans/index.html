<!DOCTYPE html><html lang="fr" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"‚Äî ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;color:var(--header);}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><style data-href="/styles.3ded6d74481102e19f97.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}body{--bg-transition:background-color 0.5s ease;background-color:var(--bg);transition:var(--bg-transition)}body.light-mode{--bg:#fff;--bg-secondary:#f9fafb;--header:#7e40c4;--textNormal:#222;--textTitle:#222;--textLink:#7e40c4;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;--form-shadow:0 2px 15px 0 rgba(210,214,220,0.5)}body.dark-mode{-webkit-font-smoothing:antialiased;--bg:#282c35;--bg-secondary:#363c48;--header:#b675ff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:#b675ff;--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:rgba(115,124,153,0.2);--inlineCode-text:#e6e6e6;--form-shadow:0 2px 15px 0 rgba(26,26,27,0.637)}@media print{body.dark-mode{--bg:#fff;--bg-secondary:#f9fafb;--header:#7e40c4;--textNormal:#222;--textTitle:#222;--textLink:#7e40c4;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;--form-shadow:0 2px 15px 0 rgba(210,214,220,0.5)}}.react-toggle{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;background-color:transparent;border:0;cursor:pointer;display:inline-block;height:24px;padding:0;position:relative;touch-action:pan-x;-webkit-user-select:none;-ms-user-select:none;user-select:none}.react-toggle-screenreader-only{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{background-color:#0f1114;border-radius:30px;height:24px;padding:0;transition:all .2s ease;width:50px}.react-toggle-track-check{bottom:0;height:17px;left:5px;line-height:0;margin-bottom:auto;margin-top:auto;opacity:0;position:absolute;top:0;transition:opacity .25s ease;width:17px}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{bottom:0;height:17px;line-height:0;margin-bottom:auto;margin-top:auto;position:absolute;right:5px;top:0;width:17px}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{background-color:#fafafa;border-radius:50%;box-sizing:border-box;height:22px;left:1px;position:absolute;top:1px;-webkit-transform:translateX(0);transform:translateX(0);transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;width:22px}.react-toggle--checked .react-toggle-thumb{border-color:#19ab27;-webkit-transform:translateX(26px);transform:translateX(26px)}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #7e40c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #7e40c4}</style><meta name="generator" content="Gatsby 3.13.0"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=6d4845a20dbe813a1019a37775ca875f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="darkgrey"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=6d4845a20dbe813a1019a37775ca875f"/><title data-react-helmet="true">Bonnes pratiques pour la maintenance d&#x27;une application web | Antoine Caron</title><link data-react-helmet="true" rel="alternate" hreflang="en" href="/how-not-to-throw-away-your-web-application-after-two-years"/><link data-react-helmet="true" rel="alternate" hreflang="fr" href="/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/"/><meta data-react-helmet="true" property="og:locale:alternate" content="en_US"/><meta data-react-helmet="true" property="og:site_name" content="Antoine Caron"/><meta data-react-helmet="true" name="description" content="Comment ne pas jeter son projet au bout de 2 ans ? Retour d&#x27;exp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:url" content="https://slashgear.github.io/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/"/><meta data-react-helmet="true" property="og:title" content="Bonnes pratiques pour la maintenance d&#x27;une application web"/><meta data-react-helmet="true" property="og:description" content="Comment ne pas jeter son projet au bout de 2 ans ? Retour d&#x27;exp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:locale" content="fr_FR"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Slashgear_"/><meta data-react-helmet="true" name="twitter:title" content="Bonnes pratiques pour la maintenance d&#x27;une application web"/><meta data-react-helmet="true" name="twitter:description" content="Comment ne pas jeter son projet au bout de 2 ans ? Retour d&#x27;exp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:image" content="https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"/><meta data-react-helmet="true" property="og:image:alt" content="Bonnes pratiques pour la maintenance d&#x27;une application web"/><meta data-react-helmet="true" property="og:image:width" content="1080"/><meta data-react-helmet="true" property="og:image:type" content="image/jpeg"/><meta data-react-helmet="true" property="article:author" content="Antoine Caron"/><meta data-react-helmet="true" property="article:section" content="Frontend Tech"/><meta data-react-helmet="true" property="article:tag" content="web"/><meta data-react-helmet="true" property="article:tag" content="javascript"/><meta data-react-helmet="true" property="article:tag" content="bedrock"/><meta data-react-helmet="true" property="article:published_time" content="2021-08-25"/><meta data-react-helmet="true" name="keywords" content="web,javascript,bedrock"/><meta data-react-helmet="true" name="google-site-verification" content="h1uQ_z8fdlLI60AmxP8vjy1H-bKSDlv0n5XolWfeDIo"/><meta data-react-helmet="true" property="fb:app_id" content="235346886871248"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style data-styled="" data-styled-version="5.3.1">.iGlUyE{margin-bottom:2.5rem;}/*!sc*/
.iGlUyE * > div{margin-left:0.5rem;}/*!sc*/
data-styled.g11[id="biocomponent__Wrapper-sc-1oo1jyu-0"]{content:"iGlUyE,"}/*!sc*/
.jfWtSW{float:left;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}/*!sc*/
data-styled.g12[id="biocomponent__Image-sc-1oo1jyu-1"]{content:"jfWtSW,"}/*!sc*/
.ijFmkR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
data-styled.g13[id="layoutcomponent__Wrapper-sc-kmaazn-0"]{content:"ijFmkR,"}/*!sc*/
.dyTbaF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:4rem;}/*!sc*/
data-styled.g14[id="footercomponent__FooterWrapper-sc-1ogqr1t-0"]{content:"dyTbaF,"}/*!sc*/
.kZCWtO{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:none !important;}/*!sc*/
@media screen and (min-width:1024px){.kZCWtO{display:inline-block !important;}}/*!sc*/
data-styled.g15[id="foundationcomponent__Logo-sc-hocuye-0"]{content:"kZCWtO,"}/*!sc*/
.bXruOx{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-right:1rem;padding-left:0.2rem;}/*!sc*/
data-styled.g16[id="foundationcomponent__TextWrapper-sc-hocuye-1"]{content:"bXruOx,"}/*!sc*/
.ktFGxy{border:none;margin:0;}/*!sc*/
data-styled.g17[id="foundationcomponent__Blocquote-sc-hocuye-2"]{content:"ktFGxy,"}/*!sc*/
.kEhtux{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--textNormal);box-shadow:none;-webkit-transition:all 300ms ease-in;transition:all 300ms ease-in;background:linear-gradient(to right,transparent 50%,#ea684c 50%);background-size:200% 100%;background-position:left bottom;}/*!sc*/
.kEhtux:hover,.kEhtux:focus{background-position:right bottom;}/*!sc*/
data-styled.g18[id="foundationcomponent__StyledLink-sc-hocuye-3"]{content:"kEhtux,"}/*!sc*/
.cbXOgd{display:none;width:400px;}/*!sc*/
.cbXOgd nav{margin-left:0.5rem;overflow:auto;max-height:80vh;}/*!sc*/
.cbXOgd ul{list-style:none;}/*!sc*/
.cbXOgd li{margin-bottom:0.5rem;overflow:hidden;white-space:nowrap;,wordwrap:normal;text-overflow:ellipsis;}/*!sc*/
.cbXOgd li > ul{margin-top:0;margin-left:1rem;}/*!sc*/
.cbXOgd a{color:currentColor;box-shadow:none;}/*!sc*/
.cbXOgd a:hover{box-shadow:0 1px 0 0 currentColor;}/*!sc*/
@media screen and (min-width:1500px){.cbXOgd{display:block;position:fixed;top:7rem;right:2rem;font-size:0.8rem;}}/*!sc*/
data-styled.g21[id="tableOfContentscomponent__Aside-sc-ep791a-0"]{content:"cbXOgd,"}/*!sc*/
.cVqbCQ{margin-bottom:0.8rem;font-weight:bold;font-size:1.1rem;}/*!sc*/
data-styled.g22[id="tableOfContentscomponent__Heading-sc-ep791a-1"]{content:"cVqbCQ,"}/*!sc*/
.hkmXGu{padding:1rem;margin:2rem 0;font-weight:bold;background-color:hsla(268,53%,51%,30%);border-radius:0.75rem;border:solid hsla(268,53%,51%) 1px;}/*!sc*/
data-styled.g23[id="availableLanguagescomponent__Container-sc-zfico6-0"]{content:"hkmXGu,"}/*!sc*/
.vwLCS{margin-bottom:1rem;}/*!sc*/
data-styled.g24[id="editOnGithubcomponent__Wrapper-sc-zzrn7j-0"]{content:"vwLCS,"}/*!sc*/
.cwUnwa{margin-top:2rem;}/*!sc*/
data-styled.g25[id="blog-post__PostContent-sc-hrojot-0"]{content:"cwUnwa,"}/*!sc*/
.dRHucu{margin-left:1rem;}/*!sc*/
data-styled.g26[id="blog-post__RelatedPost-sc-hrojot-1"]{content:"dRHucu,"}/*!sc*/
.golnhM{margin:3rem;}/*!sc*/
data-styled.g27[id="blog-post__SocialFooter-sc-hrojot-2"]{content:"golnhM,"}/*!sc*/
</style><link rel="canonical" href="https://slashgear.github.io/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/" data-baseprotocol="https:" data-basehost="slashgear.github.io"/><link as="script" rel="preload" href="/webpack-runtime-1d737514584b4a075cb7.js"/><link as="script" rel="preload" href="/framework-af7bfe51d22328080f87.js"/><link as="script" rel="preload" href="/app-38a7b70e9f1d2bfeafe0.js"/><link as="script" rel="preload" href="/6cc983252ef082d05857c6f27e42306283885478-e3480eaaa6cc148209d4.js"/><link as="script" rel="preload" href="/743791b12bf7cb00b427fac0e2749395f37c471f-65ad4b111e5d372d98e6.js"/><link as="script" rel="preload" href="/9f1f62790889034df7ac6a396fc580c0128782a4-2f71093bc28a441b8052.js"/><link as="script" rel="preload" href="/079251e69bb3615baf60b97640b02e16a0d9c5f7-28543bd4f90992a84c43.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-a96a47ad9e5a68cf2735.js"/><link as="fetch" rel="preload" href="/page-data/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1264045386.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1666466174.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2564629789.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4061151221.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/62118570.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>!function(e,a,o){function d(e){document.body.classList.add(e?"dark-mode":"light-mode"),document.body.classList.remove(e?"light-mode":"dark-mode")}var t=window.matchMedia("(prefers-color-scheme: dark)"),r="(prefers-color-scheme: dark)"===t.media,s=null;try{s=localStorage.getItem("darkMode")}catch(e){}var c=null!==s;if(c&&(s=JSON.parse(s)),c)d(s);else if(r)d(t.matches),localStorage.setItem("darkMode",t.matches);else{var l=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",JSON.stringify(l))}}();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;color:var(--textNormal);background:var(--bg);transition:var(--bg-transition);max-width:42rem;padding:2.625rem 1.3125rem"><div class="layoutcomponent__Wrapper-sc-kmaazn-0 ijFmkR"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;color:var(--header)"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Antoine Caron</a></h3><div class="react-toggle"><div class="react-toggle-track"><div class="react-toggle-track-check"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABlJJREFUWAm1V3tsFEUcntnXvXu0tBWo1ZZHihBjCEWqkHiNaMLDRKOtQSKaiCFKQtS/SbxiFCHGCIkmkBSMwZhQNTFoQZD0DFiwtCDFAkdDqBBBKFj63rvdnfH7zfVo5aFBj0l2Z/dm5vd98/0es8dYjlpr62azufnDQNZcU1PciMfjWvb9rvZSMk4Ayfb36pLH13189GC8LAtIRLLPt+pzwrCuLq4ISEv/gHmitrAwfPbEkXc/ad4dL6iujrvyX0jcitgd/yZlZqftP6995Mr5TVLa22Tn8XVX2g/XLSRjUu7Q79jonS7I7hS7/0oOb5VyqF52n98oj7esXX07EjlxwXWisRmSnm3b29TTM8iYrjmFBWExubxwY/uhNas4r/WySl1fc5cetDMd7ydl+lMJJRw5WC8ud62Xx5rfepzwxgZmbhUYNS5Stvsj4yo2GXJEFBVHWDBkfdbR9HpYBaaUajDnBLKKpl1xRKYcgGtMCqEzTaSnThk/SQT0uJqTqFNBmXMCsZE48DzRZRMBRjv1GHNdk3HBImF9ZUvTyxM40pMKVc4JZBXQOLOFoDeKSxdp6HIQcO4rjYT9fn0pjbz9GLt7BAAODmjSVReXUMFzNW5x5vfxp2mIxZjIuQKJxAmFa+is2DQJJQ0JyBVExNOYcJnPxx/6/utnijmP555ALEagKAGGnGn64QORBjARcIA/yJk7JMJBLRrNtybTvH88KGjCf2jK86bhzmMcwDKFZEQvbIhxFYhChoMWMzU2iWznlIBEVJOsP+1bdX/ALx9l7jApADeDAEcMkE90JnUmmGl4USKQ0xhoW3JB5XY0YrxYWhLwMZZypUyjDGH35AbNwgUGiFBPpuGbHCpAOV1ZGXf2f/taftAv31DyeymN2d1IhAFAwTOmnzF/kKcdh3me7CYCOVNgycju84u8DeVlwfFq9/ZlTfldYrMUjOlrkjkD+rU+WzCROkcEchIDHR011syZW9JHD7y07N6JvhWMpz3pugaTkB6lWFVCKkhck0zzeMp2utq+uHrmfxOgoCO/Z8CXPlEQ1bdH8wgvhSIkEG0ICcQeExIFGdimjvKka7btJFZuaXOammIGKUCFQ53j9EN1dYKWqHf0t2w407W2tgs6h89ZnImjB55flh81tt9XirjjDuSl+oIPRQ0iWPgNZ5GqTqbBe3vSzEl5n5PhWKwocyR2HlqYN61qV18WjYjE8JLARZPQsUSim8foIRYTlGr02Ly7piASFRtKJ4VfieYhxdS2JcDVMN6xVOKZyrCGm8b108lrLRVzvptLH7IoEFLFANes6KnDi+uxfmvFnF17oALq5u1agu3/YfHkcSFzeSggV5eXRfIB7CHNcO5SUI+Ih5Ir7f4MAV9IqdFzdZgNpZw1Gcs1mNvgGbTbqQ9/cz7ZuuhgyYRQ49ljTyWHhr2DwpNHHFf+5gnWZ3Bharo+0TD5dNMw5vv9RlVpSRDHK4TlnoukhtYApuOHejSZQuo5g/A9BysdKRCyLl6062fN37OXMDlvUJtUrtmxo0avrW3wTrYs3jJ9RvRVChrmSmanPMpX2OXMsmDGh6AiEIwBAlvkOqIdBy+8JyAz8pz7QxiDth4KDy5uAlwzrWTnwC8Vc4KVAMZ3YUZ+IqoIjP3h5KFFX1ZMy3uW+7RhEDHgTi0zC9rS7uhPCDiNrGFyqBeERtKN/B0YlyFCkw0NJ5C0Ojv7zvT1a1WV1TuvZDdL4NTgB7CASYpsen6gqvG5jmTf5qHedADgkBl3D0nkSgNhZACDyi0FUKZRr3IdRjgN4WPPoFMIIegIK3mqd38fS80mcJKelM4szNyzZtQbkchGePuBRS8Eg9pHU8ojRQpSqs+ajAIwTjjUMQ/nvTNM0kicwYxZIYMh/891DYi+fvedB+c1xsm4lDU6ya+Axtz+RiAzEVYbajQOpq17F0R9QevNcEhfcU+xvyQQUalGJBSesqOkgPQ4YNyUZL9fSvUPDjoNAwN8/dwFjaczNkc3ptaMud1EIDtGcmXTcefO2cGSvKIFfp/2JIJxlq7xEl3nVPM4fDeIbPkD16/ptNc0bDu7qxbsu0R2JGywWMIjF2ft3tjfloAyQAGXiOn8hrqwbVvMXzaO+QeHXP6nF0wvX74Hf4NGG5GPjSlYoyM3P/0FbCT6zvM/yYoAAAAASUVORK5CYII=" width="16" height="16" role="presentation" style="pointer-events:none"/></div><div class="react-toggle-track-x"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABwNJREFUWAmtV1tsFFUY/s6Z2d22zLYlZakUCRVaQcqlWIiCiS1gTEB9UAO+GR9En3iQGI0xJiSiRB98MjEq8cEQTSBeHhQM0V7whtEGDWC90BYitxahtNtu25058/v/ZzvLbilawJNM5+yZ89+//1LgJhYRNLW1uDfBAvpGiIk2O5auvfFxqIH3ZJ8/u06GN6Z9+wVl5SjcD1IbZa/UPkPyYl2uR4dreoD2bnbYxTlBBRytkHXtAREphP5KuH4lddx9h70yxX05t7yYXwGb6W8nx1jibpl2rFlGBxcG9M18okOrn7Bnk/BAO/4bI0UeEE1zjBp3UmvjOxJXJdaKN/ZiIu4tOZrAb4aTdZAZArKmWeiiJZ6jt5tiagdCS9+6cgO1Ne6Mvhe+ixTIfyDVhipnK9p+P0Edqx9RW/YZtQVGmOLChRxNNlyPsTEgPQKMB3dbEHa0h1awYmQ83enTd2vmUtvKd1Glv2RkzBb+kZGRrKtjzG60Wguhd/lJZBingbcfWWe72vjT75bJDrhYtvA0hrurETDr5HyF2Knb1MM4ab//xIoOqueA0edRnkkinTyJdYvqLFDZO4zUPFCvVoDjJq4T7TE61IWh4x5KqxX5KVKkX8WZ/t2ov2cb3MHt4dhIyOxIJxJOOF6xRx/99BksXLoecWcXytILMNBDqKpnGZWPquYfPxY8iXGR9fK+SgFrgcRPXPjVqhehL+3EmZ5RGJQi1QBU8TPThQnOQzm+5UXGIcetUeEAfP13VwzpI+w1jGJWdSliNfvVhiMPiOsllJag4M/UGHiqM6dlBb2OTLKHHV6KkvogrJ4XhBWniWK/Gp1MQyf93FOeUXKmKk/FzJxbQtKLjFXYT4USupy8fQVir2ynVEBiZMG0qtOHMS/AW4Gwrk7BG3C1F0B5nqNKE0CME4MfVRLPnXkBKe+ipvoFhNQywOhdghvLi0F8ReyVXV4BKTBRbbe5f64zR/DHsdZw1hJfeWlHl/GNRJzDxrd5m192z78TMaVnKELZoINZS4BzQ7vtnZljSnha/pPCbkuxzXcupYwI5tIeCpGc0Yp9tWHZQy/rmYhRfNgg4bHJBYLzGkxsRJF4XKlE2jBOHNSv3kY7Tj6vthzPFl61BrYwqFlmEQhtSVXmLiksxLmtRgYXI1ULU61JJ4eVKmG3/5sCVgpbMT6OMJ2E08/29Xf3w6v4FnHdCjfWgXu/O8Z5mLdCkeRs2khHe1DqOtQwbHWTAnM5S2HNmhALYo5KjkPFrMMKjZl6HxhWIAb0BqE+/73GrBRQUsKYiBu4JX8ycI6wtw+i5ef3NZpsrKVSHYCP37jwGDgeE1SA0S/xtl5SU2fs1ApEp0qTLVRjgyycDSsLHMSwmFltZMStR3uLLg6BdLhDa5dC6ryU2pHBe1BVO9tUcwfitJt2CLJZUHoG6T7Op75u0IyK31TCPcwFqgPk/KCaD3dFOuZBCO7xvCT/j048b3I3c7F2+WuOW7qdgkucFYlcQ4qop3yzTX7WaKfOCccye3Ts1Etq0+a/BHCF1yPgF3tAUkR6OrtGmo6gl94qqcXKh3rDyrOkPa58URoWcov2Mo6M+0QjrqKB+b7++oMa9Sz+ZkM0mie6aAtnGUvhmxaI+TogPOSQedgWioGSHFLn3v4kLh4HRspNmOGv41k+55siLFp2z6xYeJjhljFcbmxJlr4ga06TbevSByz/glQq4BJx46/c+237PbBqEYKxX3HpmKZEnQnr65X20hqJYaNcLoFOLiJk2LuBbyg7Q0OEn+hm0P3honxFD6rdxYorKpeIoi4YSSvyQHQIbM5t4+YNxLj/OxhVOOE4585qGpjnq+wSx6Q9CtNxTjd5klB+g6Mv36r0+b9cZFi44WYkHdG2ZWb3TtOUOXyVAlKlpGvJIAJ3eBMyfYS5C0qRZGtC85j+4sOasDe9xznPYezhhO/2Q6eP2fSOvYHOjtuQ1a9Q1VKynVDaMc8E0tptdxUsTFpFIYjcZKcbnoaQTNdiqCwNlL4G7oziSqGnT1ALf34vhk4R5zU3qYV9ONp9K88RtouShE68JwaU8dFw5W617shWa9ykeaBIn2hcsvPgL00k45QdTCZuSVcTRNs+8fnyLvooQfR5iujAnR9bxfY2xOVOxFS8SK3Le0l48VyYu1M8HRe5JD8wKPTjYnifaK3Wfn/GChYQ8ZAi6WRzWgqLV5YrsVLnZaVSoXU1g9gOIDwFySiGi+Zdrnzr7J3r+SMuszlcQCRn8lNGcTuSy2jOI7o9mxjZo+vR3ej3tN+ifRSOyUTS0+VMOid93cCubeiy/6TImS0QxRSCq2vxKr45zV+FQnjWH6D2xg+E9EatLcLAdHTgtGGD80D6jM0+aOl4wJgO/f96R2aJKCQ3yvgftRhdFMOpd6oAAAAASUVORK5CYII=" width="16" height="16" role="presentation" style="pointer-events:none"/></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between Dark and Light mode"/></div></div><h1 style="color:var(--header)">Bonnes pratiques pour la maintenance d&#x27;une application web</h1><aside id="table-of-content" class="tableOfContentscomponent__Aside-sc-ep791a-0 cbXOgd"><header class="tableOfContentscomponent__Heading-sc-ep791a-1 cVqbCQ">Table of content</header><nav><ul>
<li>
<p><a href="#un-peu-de-contexte">Un peu de contexte</a></p>
</li>
<li>
<p><a href="#simposer-des-r%C3%A8gles-et-les-automatiser">S‚Äôimposer des r√®gles et les automatiser</a></p>
<ul>
<li><a href="#la-liste-presque-exhaustive-">La liste <em>presque</em> exhaustive ü§û</a></li>
</ul>
</li>
<li>
<p><a href="#tester-tester-tester">Tester, tester, tester</a></p>
<ul>
<li><a href="#nos-tests-e2e">Nos tests E2E</a></li>
<li><a href="#nos-tests-unitaires">Nos tests ‚Äúunitaires‚Äù</a></li>
<li><a href="#nos-principes">Nos principes</a></li>
</ul>
</li>
<li>
<p><a href="#le-projet-reste-les-fonctionnalit%C3%A9s-non">Le projet reste, les fonctionnalit√©s non</a></p>
<ul>
<li><a href="#lab-testing">L‚ÄôA/B testing</a></li>
<li><a href="#le-futur-flipping">Le <em>futur flipping</em></a></li>
</ul>
</li>
<li>
<p><a href="#monitorer-mesurer-alerter">Monitorer, Mesurer, Alerter</a></p>
</li>
<li>
<p><a href="#limiter-surveiller-et-mettre-%C3%A0-jour-ses-d%C3%A9pendances">Limiter, surveiller et mettre √† jour ses d√©pendances</a></p>
</li>
<li>
<p><a href="#accepter-sa-dette-technique">Accepter sa dette technique</a></p>
</li>
<li>
<p><a href="#pour-r%C3%A9sumer">Pour r√©sumer</a></p>
</li>
</ul></nav></aside><div style="font-size:0.83255rem;line-height:1.75rem;margin-bottom:1.75rem;margin-top:-1.75rem"><time dateTime="2021-08-25">August 25, 2021</time><small style="margin-left:1rem"><a style="margin-right:0.5rem" href="/fr/web">#<!-- -->web</a><a style="margin-right:0.5rem" href="/fr/javascript">#<!-- -->javascript</a><a style="margin-right:0.5rem" href="/fr/bedrock">#<!-- -->bedrock</a></small></div><div id="lang-switcher" class="availableLanguagescomponent__Container-sc-zfico6-0 hkmXGu">Article disponible en<!-- -->:<!-- --> <a style="box-shadow:none;text-decoration:none" hrefLang="en" href="/how-not-to-throw-away-your-web-application-after-two-years">English</a></div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:56.400000000000006%"></div><noscript><picture><source type='image/webp' srcset="/static/706dca8ff24a680a04318fad5f7a023c/7ca0e/bedrock.webp 250w,
/static/706dca8ff24a680a04318fad5f7a023c/e9589/bedrock.webp 500w,
/static/706dca8ff24a680a04318fad5f7a023c/e30b5/bedrock.webp 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/90fb1/bedrock.webp 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/25f09/bedrock.webp 1920w" sizes="(max-width: 1000px) 100vw, 1000px" /><source srcset="/static/706dca8ff24a680a04318fad5f7a023c/8f7df/bedrock.jpg 250w,
/static/706dca8ff24a680a04318fad5f7a023c/0f3a1/bedrock.jpg 500w,
/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/37d86/bedrock.jpg 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w" sizes="(max-width: 1000px) 100vw, 1000px" /><img loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" srcset="/static/706dca8ff24a680a04318fad5f7a023c/8f7df/bedrock.jpg 250w,
/static/706dca8ff24a680a04318fad5f7a023c/0f3a1/bedrock.jpg 500w,
/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/37d86/bedrock.jpg 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w" src="/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg" alt="Bonnes pratiques pour la maintenance d'une application web" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="blog-post__PostContent-sc-hrojot-0 cwUnwa"><blockquote>
<p>Comment ne pas jeter son application tous les deux ans ?</p>
</blockquote>
<p><em>Retour d‚Äôexp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez <a href="https://www.bedrockstreaming.com/">Bedrock Streaming</a></em></p>
<h2 id="un-peu-de-contexte" style="position:relative;"><a href="#un-peu-de-contexte" aria-label="un peu de contexte permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Un peu de contexte</h2>
<p>Chez Bedrock Streaming de nombreuses √©quipes d√©veloppent et maintiennent des applications <em>frontend</em> pour nos clients et utilisateurs.
Certaines ne sont pas toute jeune.
En effet, l‚Äôapplication sur laquelle je travaille principalement est un site web dont les d√©veloppements ont commenc√© en 2014.
Je l‚Äôai d‚Äôailleurs d√©j√† √©voqu√©e dans diff√©rents articles de <a href="https://slashgear.github.io/">ce blog</a>.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/f13a9/commit-count.avif 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/6d0e0/commit-count.avif 294w"
              sizes="(max-width: 294px) 100vw, 294px"
              type="image/avif"
            /><source
              srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w"
              sizes="(max-width: 294px) 100vw, 294px"
              type="image/webp"
            />
          <source
            srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w"
            sizes="(max-width: 294px) 100vw, 294px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png"
            alt="impression d&#39;√©cran du nombre de commit sur master de notre projet 15668"
            title="impression d&#39;√©cran du nombre de commit sur master de notre projet 15668"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Vous pourriez vous dire: <em>‚ÄúOh les pauvres maintenir une application vieille de presque 10 ans √ßa doit √™tre un enfer !‚Äù</em></p>
<p>Rassurez-vous, ce n‚Äôest pas le cas !
J‚Äôai travaill√© sur des projets bien moins vieux mais sur lesquels le d√©veloppement de nouvelles fonctionnalit√©s √©tait bien plus p√©nible.</p>
<p>Aujourd‚Äôhui le projet reste √† jour techniquement, on doit √™tre sur la derni√®re version de React alors que celui-ci avait commenc√© sur une version <em>0.x.x</em>.
Dans ce monde des technologies web souvent d√©cri√© (ex: les nombreux articles sur la <em>Javascript Fatigue</em>) dont les outils et les pratiques √©voluent constamment, conserver un projet ‚Äú√† jour‚Äù reste un vrai challenge.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/87ea590416839a8413c9d4905c0fa4b6/f13a9/releases.avif 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/7bd34/releases.avif 350w"
              sizes="(max-width: 350px) 100vw, 350px"
              type="image/avif"
            /><source
              srcset="/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w"
              sizes="(max-width: 350px) 100vw, 350px"
              type="image/webp"
            />
          <source
            srcset="/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w"
            sizes="(max-width: 350px) 100vw, 350px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png"
            alt="nombre de versions de l&#39;application 1445"
            title="nombre de versions de l&#39;application 1445"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>De plus, dans le contexte de ce projet, en presque 10 ans, nous avons connu une centaine de contributeurs.
Certains ne sont rest√©s que quelques mois/ann√©es.
Comment garder au maximum la connaissance sur ‚ÄúComment on fait les choses et comment √ßa marche ?‚Äù dans un contexte humain si mouvant ?</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/333e464600eaed01c177c248b9aac0eb/f13a9/contributors.avif 200w,
/static/333e464600eaed01c177c248b9aac0eb/af71e/contributors.avif 400w,
/static/333e464600eaed01c177c248b9aac0eb/679d2/contributors.avif 690w"
              sizes="(max-width: 690px) 100vw, 690px"
              type="image/avif"
            /><source
              srcset="/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,
/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,
/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w"
              sizes="(max-width: 690px) 100vw, 690px"
              type="image/webp"
            />
          <source
            srcset="/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,
/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,
/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w"
            sizes="(max-width: 690px) 100vw, 690px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png"
            alt="liste des 100 contributeurs du projet"
            title="liste des 100 contributeurs du projet"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>C‚Äôest ce que je vous propose de vous pr√©senter.</p>
<p>Avec l‚Äôaide de mes coll√®gues, j‚Äôai rassembl√© la liste des bonnes pratiques qui nous permettent encore aujourd‚Äôhui de maintenir ce projet en √©tat.
Avec <a href="https://twitter.com/fooragnak">Florent Dubost</a>, on s‚Äôest souvent dit qu‚Äôil serait int√©ressant de la publier.
Nous esp√®rons que cela vous sera utile.</p>
<h2 id="simposer-des-r√®gles-et-les-automatiser" style="position:relative;"><a href="#simposer-des-r%C3%A8gles-et-les-automatiser" aria-label="simposer des r√®gles et les automatiser permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>S‚Äôimposer des r√®gles et les automatiser</h2>
<p>Un projet qui r√©siste au temps c‚Äôest tout d‚Äôabord un ensemble de connaissances qu‚Äôon empile les unes sur les autres.
C‚Äôest en quelque sorte la tour de Kapla que vous assembliez petit en essayant d‚Äôaller le plus haut possible.
Une base solide sur laquelle on esp√®re pouvoir ajouter le plus possible avant une potentielle chute.</p>
<p>D√®s le d√©but d‚Äôun projet on est donc amen√© √† prendre des d√©cisions importantes sur ‚ÄúComment on souhaite faire les choses ?‚Äú.
On pense par exemple √† ‚ÄúQuel format pour nos fichiers ? Comment on nomme telle ou telle chose ?‚Äù
√âcrire une documentation pr√©cise de ‚ÄúComment on fait les choses‚Äù pourrait paraitre une bonne id√©e.</p>
<p>Cependant la documentation c‚Äôest cool, mais √ßa a tendance √† p√©rimer tr√®s vite.
Nos d√©cisions √©voluent mais pas la documentation.</p>
<blockquote>
<p>‚ÄúLes temps changent mais pas les README.‚Äù</p>
<p><a href="https://twitter.com/omansour"><em>Olivier Mansour (deputy CTO √† Bedrock)</em></a></p>
</blockquote>
<p>Automatiser la v√©rification de chacune des r√®gles qu‚Äôon s‚Äôimpose (sur notre codebase ou nos process) est bien plus p√©renne.
Pour faire simple, on √©vite dans la mesure du possible de dire ‚ÄúOn devrait faire les choses comme cela‚Äù, et on pr√©f√®re ‚Äúon va coder un truc qui nous le v√©rifie √† notre place‚Äù.
En plus de √ßa, cot√© JS on est vraiment bien √©quip√© avec des outils comme <a href="https://eslint.org/">Eslint</a> qui nous permettent d‚Äôimpl√©menter nos propres r√®gles.</p>
<p>Le r√©flexe qu‚Äôon essaie donc d‚Äôadopter est donc le suivant:</p>
<ul>
<li>‚ÄúOn devrait essayer de faire comme cela √† pr√©sent !‚Äù</li>
<li>‚ÄúOk c‚Äôest int√©ressant, mais comment peut-on s‚Äôassurer qu‚Äôon fasse comme cela automatiquement avec notre CI (Int√©gration continue) ?‚Äù</li>
</ul>
<p>L‚Äôint√©gration continue d‚Äôun projet est la solution parfaite pour ne rien louper sur chacune des <em>Pull Request</em> que nous proposons.
Les reviews n‚Äôen sont que plus simples car vous n‚Äôavez plus √† vous soucier de l‚Äôensemble des r√®gles qui sont d√©j√† automatis√©es.
Dans ce mod√®le, la review sert donc plus au partage de connaissance qu‚Äôau flicage de typo et autre non respect des conventions du projet.</p>
<p>Dans ce principe, il faut donc essayer de bannir les r√®gles orales.
Le temps des druides est termin√©, s‚Äôil faut transmettre oralement toutes les bonnes pratiques d‚Äôun projet, l‚Äôaccompagnement de nouveaux d√©veloppeurs dans votre √©quipe n‚Äôen sera que plus long.</p>
<p><img src="/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif" alt="la recette de la potion magique de panoramix est perdue car secr√®te"></p>
<p>Un projet n‚Äôest pas fig√©. Ces r√®gles √©voluent donc avec le temps.
On pr√©f√®rera alors l‚Äôajout de r√®gles qui poss√®dent un script qui <em>autofixera</em> toute la codebase intelligemment.
De nombreuses r√®gles Eslint le proposent, et cela est vraiment un crit√®re de s√©lection tr√®s important dans nos choix de nouvelles conventions.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">eslint --fix</code></pre></div>
<p>Une r√®gle tr√®s stricte qui vous obligera √† modifier votre code manuellement avant chaque push est p√©nible √† la longue et √©nervera vos √©quipes.
Alors qu‚Äôune r√®gle (m√™me tr√®s stricte) qui peut s‚Äôautofixer automatiquement au moment du commit ne sera pas per√ßue comme g√™nante.</p>
<p><strong>Comment d√©cider d‚Äôajouter de nouvelles r√®gles ?</strong></p>
<p>Cette question peut paraitre √©pineuse, prenons par exemple le cas des <code class="language-text">&lt;tab></code> / <code class="language-text">&lt;space></code> dans les fichiers.
Pour cela, on essaie d‚Äô√©viter les d√©bats sempiternels et on se plie √† la tendance et aux r√®gles de la communaut√©.
Par exemple, <a href="https://github.com/M6Web/eslint-tools">notre base de configuration Eslint</a>) est bas√©e sur celle d‚ÄôAirbnb qui semble avoir un certain succ√®s dans la communaut√© JS.
Mais si la r√®gle qu‚Äôon souhaite s‚Äôimposer n‚Äôest pas disponible dans Eslint ou d‚Äôautres outils, il nous arrive de pr√©f√©rer ne pas suivre la r√®gle plut√¥t que de se dire ‚ÄúOn le fait sans CI qui v√©rifie‚Äù.</p>
<h3 id="la-liste-presque-exhaustive-" style="position:relative;"><a href="#la-liste-presque-exhaustive-" aria-label="la liste presque exhaustive  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>La liste <em>presque</em> exhaustive ü§û</h3>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/f13a9/ci-workflow.avif 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/af71e/ci-workflow.avif 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/0bbb0/ci-workflow.avif 768w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/avif"
            /><source
              srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png"
            alt="Notre workflow d&#39;int√©gration continue"
            title="Notre workflow d&#39;int√©gration continue"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<ul>
<li>Le format des fichiers est suivi g√©r√© par <a href="https://editorconfig.org/">Editorconfig</a>, <a href="https://prettier.io/">prettier</a> et <a href="https://eslint.org/">Eslint</a>.
Nous avons opensourc√© <a href="https://github.com/M6Web/eslint-tools">notre propre configuration</a>, si jamais celle-ci peut vous √™tre utile.</li>
<li>Nous utilisons un <a href="https://www.conventionalcommits.org/en/v1.0.0/">nommage de commit bien sp√©cifique</a> pour g√©n√©rer nos changelog.
Pour s‚Äôassurer que les devs le respectent, une simple √©tape de notre CI le v√©rifie.</li>
<li>On ne souhaite pas qu‚Äôun dev fasse grossir √©norm√©ment nos bundles JS en production, c‚Äôest pourquoi nous suivons et mesurons leur taille dans la CI.
On utilise un outil maison mais on peut vous recommander l‚Äôoutil <a href="https://buildtracker.dev/">BuildTracker</a>.</li>
<li>La couverture de tests n‚Äôest pas un indicateur pour l‚Äô√©quipe, toutes les lignes n‚Äôont pas la m√™me n√©cessit√© pour nous d‚Äô√™tre test√©es.
Certaines √©quipes √† Bedrock suivent cependant cet indicateur qui a au moins l‚Äôint√©r√™t de donner une tendance.</li>
<li>Nos tests unitaires tournent bien √©videmment sur la CI, ceux-ci doivent passer.</li>
<li>Nos tests fonctionnels (End to end: E2E) tournent sur Chrome Headless, ils doivent √™tre au vert.</li>
<li>Les logs de nos tests E2E sont r√©cup√©r√©s et pars√©s afin d‚Äô√©viter l‚Äôintroduction d‚Äôerreur ou de React warning (Le script de parsing est cependant compliqu√© √† maintenir)</li>
<li>Les tests fonctionnels fonctionnent dans une <em>sandbox</em> o√π tout le r√©seau est proxyfi√©.
Nous surveillons que nos tests ne d√©pendent pas d‚Äôune API non mock√©e qui pourrait ralentir leur ex√©cution.</li>
<li>Durant les tests E2E nous v√©rifions qu‚Äôaucune requ√™te d‚Äôimage n‚Äôa g√©n√©r√© une 404.</li>
<li>On r√©alise quelques <a href="https://www.deque.com/axe/">v√©rifications d‚Äôaccessibilit√© avec Axe</a> durant nos tests E2E.</li>
<li>On v√©rifie quelques r√®gles sur le CSS avec <a href="https://stylelint.io/">Stylelint</a> et <a href="https://github.com/M6Web/bemlinter">bemlinter</a> (on n‚Äôutilise plus BEM aujourd‚Äôhui mais il reste encore un peu de style g√©r√© en SCSS qu‚Äôon migre petit √† petit en StyledComponent)</li>
<li>Le projet est un monorepo sur lequel nous essayons de maintenir les m√™mes versions de d√©pendances pour chaque package.
Pour cela nous avons d√©velopp√© un outil qui permet de faire cette v√©rification <em><a href="https://www.npmjs.com/package/monorepo-dependencies-check">monorepo-dependencies-check</a></em></li>
<li>On v√©rifie que notre fichier <code class="language-text">yarn.lock</code> n‚Äôa pas √©t√© modifi√© par inadvertance ou bien qu‚Äôil a √©t√© mis √† jour par rapport aux modifications du <code class="language-text">package.json</code>.</li>
<li><a href="https://www.terraform.io/">Terraform</a> est utilis√© pour la gestion de nos ressources cloud, nous v√©rifions que le format des fichiers est correct.</li>
</ul>
<h2 id="tester-tester-tester" style="position:relative;"><a href="#tester-tester-tester" aria-label="tester tester tester permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tester, tester, tester</h2>
<p>J‚Äôesp√®re qu‚Äôen 2021 il n‚Äôest plus n√©cessaire d‚Äôexpliquer pourquoi tester automatiquement son application est indispensable pour la rendre p√©renne.
En JS on est plut√¥t bien √©quip√© en terme d‚Äôoutils pour tester aujourd‚Äôhui.
Il reste cependant l‚Äô√©ternelle question:</p>
<blockquote>
<p>‚ÄúQu‚Äôest-ce qu‚Äôon veut tester ?‚Äù</p>
</blockquote>
<p>Globalement si on recherche sur internet cette question, on voit que des besoins diff√©rents font √©merger des pratiques et des outils de testing bien diff√©rents.
Ce serait tr√®s pr√©somptueux de penser qu‚Äôil y a une bonne mani√®re de tester automatiquement son application.
C‚Äôest pourquoi il est pr√©f√©rable de d√©finir une ou plusieurs strat√©gies de test qui r√©pondent √† des besoins d√©finis et limit√©s.</p>
<p>Nos strat√©gies de tests reposent sur deux volont√©s bien distinctes:</p>
<ul>
<li>Automatiser la v√©rification des fonctionnalit√©s propos√©es aux utilisateurs en se mettant √† sa place.</li>
<li>Nous fournir des solutions efficaces pour specifier la mani√®re dont nous impl√©mentons nos solutions techniques pour nous permettre de les faire √©voluer plus facilement.</li>
</ul>
<p>Pour cela, nous r√©alisons deux ‚Äútypes de tests‚Äù que je propose de vous pr√©senter ici.</p>
<h3 id="nos-tests-e2e" style="position:relative;"><a href="#nos-tests-e2e" aria-label="nos tests e2e permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nos tests E2E</h3>
<p>On les appelle ‚Äútests fonctionels‚Äù, ce sont des tests End-to-end (E2E) sur une stack technique tr√®s efficace compos√©e de <a href="https://cucumber.io/docs/installation/javascript/">CucumberJS</a>, <a href="https://webdriver.io/">WebdriverIO</a> avec <a href="https://developers.google.com/web/updates/2017/04/headless-chrome">ChromeHeadless</a>
Il s‚Äôagit d‚Äôune stack technique mise en place au d√©but du projet (√† l‚Äô√©poque avec <a href="https://phantomjs.org/">PhantomJS</a> pour les plus anciens d‚Äôentre-vous)</p>
<p>Cette stack nous permet d‚Äôautomatiser le pilotage de tests qui contr√¥lent un navigateur.
Ce navigateur va r√©aliser des actions qui se rapprochent le plus de celles que nos vrais utilisateurs peuvent faire tout en v√©rifiant comment le site r√©agit.</p>
<p>Il y a quelques ann√©es, cette stack technique √©tait plut√¥t compliqu√©e √† mettre en place, mais aujourd‚Äôhui il est plut√¥t simple de le faire.
<a href="https://github.com/Slashgear/slashgear.github.io">Le site qui h√©berge cet article de blog</a> en est lui-m√™me la preuve.
Il ne m‚Äôa fallu qu‚Äôune dizaine de minutes pour mettre en place cette stack avec <a href="https://webdriver.io/docs/gettingstarted">le WebdriverIo CLI</a> pour v√©rifier que mon blog fonctionne comme pr√©vu.</p>
<p>J‚Äôai d‚Äôailleurs r√©cemment publi√© <a href="https://slashgear.github.io/how-to-setup-e2e-tests-with-webdriverio/">un article pr√©sentant la mise en place de cette stack</a>.</p>
<p>Voici donc un exemple de fichier de test E2E pour vous donner une id√©e:</p>
<div class="gatsby-highlight" data-language="gherkin"><pre class="language-gherkin"><code class="language-gherkin"><span class="token feature"><span class="token keyword">Feature:</span><span class="token important"> Playground</span>
</span>
  <span class="token scenario"><span class="token keyword">Background:</span><span class="token important"> Playground context</span></span>
    <span class="token atrule">Given</span> <span class="token atrule">I</span> use <span class="token string">"playground"</span> test context

  <span class="token scenario"><span class="token keyword">Scenario:</span><span class="token important"> Check if playground is reachable</span></span>
    <span class="token atrule">When</span> As user <span class="token string">"toto@toto.fr"</span> I visit the <span class="token string">"playground"</span> page
    <span class="token atrule">And</span> <span class="token atrule">I</span> click on <span class="token string">"playground trigger"</span>
    <span class="token atrule">Then</span> <span class="token atrule">I</span> should see a <span class="token string">"visible playground"</span>
    <span class="token atrule">And</span> <span class="token atrule">I</span> should see 4 <span class="token string">"playground tab"</span> in <span class="token string">"playground"</span>

    <span class="token atrule">When</span> <span class="token atrule">I</span> click on <span class="token string">"playground trigger"</span>
    <span class="token atrule">Then</span> <span class="token atrule">I</span> should not see a <span class="token string">"visible playground"</span>

    <span class="token comment"># ...</span></code></pre></div>
<p>Et √ßa donne √ßa en local avec mon navigateur Chrome !</p>
<p><img src="/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif" alt="Exemple d&#x27;ex√©cution de test fonctionnel"></p>
<p>Voil√† un sch√©ma qui explique comment cette stack fonctionne:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/8de3947494607606cd09c4b4a110bef5/f13a9/e2e-archi.avif 200w,
/static/8de3947494607606cd09c4b4a110bef5/af71e/e2e-archi.avif 400w,
/static/8de3947494607606cd09c4b4a110bef5/c9875/e2e-archi.avif 800w,
/static/8de3947494607606cd09c4b4a110bef5/07e28/e2e-archi.avif 1200w,
/static/8de3947494607606cd09c4b4a110bef5/2babf/e2e-archi.avif 1600w,
/static/8de3947494607606cd09c4b4a110bef5/5f214/e2e-archi.avif 2058w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,
/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,
/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,
/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,
/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,
/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,
/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,
/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,
/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,
/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,
/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png"
            alt="sch√©ma qui explique le fonctionnement de notre stack"
            title="sch√©ma qui explique le fonctionnement de notre stack"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Aujourd‚Äôhui, l‚Äôapplication web de Bedrock poss√®de plus de 800 sc√©narios de tests E2E qui tournent sur chacune de nos <em>Pull Request</em> et sur la branche <code class="language-text">master</code>.
Ils nous assurent que nous n‚Äôintroduisons pas de r√©gression fonctionnelle et c‚Äôest juste g√©nial !</p>
<p>üëç Les points positifs</p>
<ul>
<li>WebdriverIO nous permet √©galement de lancer de mani√®re journali√®re ces m√™mes tests sur des vrais devices en passant par le service payant SAAS <a href="https://www.browserstack.com/">Browserstack</a>.
On a donc tous les jours un <em>job</em> qui s‚Äôassure que notre site fonctionne correctement sur un Chrome derni√®re version sur Windows 10 et Safari sur MacOs.</li>
<li>Ces tests nous permettent de facilement documenter les fonctionnalit√©s de l‚Äôapplication gr√¢ce au langage Gherkin.</li>
<li>Ils nous permettent de reproduire des cas qui sont loin d‚Äô√™tre nominaux.
Dans une logique <em>TDD</em>, ils permettent d‚Äôavancer sur le d√©veloppement sans avoir √† cliquer pendant des heures.</li>
<li>Ces tests nous ont permis de ne pas casser l‚Äôancienne version du site qui est toujours en production pour quelques clients alors que nos efforts se concentrent sur la nouvelle.</li>
<li>Ils nous apportent une vraie confiance.</li>
<li>Gr√¢ce notre librairie <a href="https://www.npmjs.com/package/superagent-mock"><em>superagent-mock</em></a>, nous pouvons <em>fixturer</em> (bouchonner, mocker) toutes les API dont on d√©pend et ainsi m√™me v√©rifier les cas d‚Äôerreurs.
De plus, mocker la couche XHR du navigateur permet une am√©lioration significative du temps d‚Äôex√©cution des tests. üöÄ</li>
<li>Ils nous donne acc√®s √† des usages √©tendus comme :
<ul>
<li>v√©rification de r√®gles d‚Äôaccessibilit√©</li>
<li>check les logs de la console navigateur (pour ne pas introduire d‚Äôerreur ou de React Warning par exemple)</li>
<li>surveiller tous les appels r√©seaux du site gr√¢ce √† un proxy</li>
<li>et j‚Äôen passe‚Ä¶</li>
</ul>
</li>
</ul>
<p>üëé Les complications</p>
<ul>
<li>Maintenir cette stack est compliqu√© et co√ªteux.
√âtant donn√© que peu de ressources sont publi√©es sur ce domaine, on se retrouve parfois √† devoir creuser pendant plusieurs jours pour les r√©parer üòÖ.
Il nous arrive de nous sentir parfois bien seul √† avoir ces soucis.</li>
<li>Il est tr√®s facile de coder un test E2E dit <em>flaky</em> (ie: un test qui peut √©chouer al√©atoirement).
Ils nous font croire que quelque chose est cass√©.
Ils nous prennent parfois du temps √† les stabiliser.
Il reste cependant <strong>bien meilleur de supprimer un test qui ne vous donnera pas un r√©sultat stable.</strong></li>
<li>Faire tourner tous les tests prend un temps important sur notre int√©gration continue.
Il faut r√©guli√®rement travailler sur leur optimisation pour que le feedback qu‚Äôils vous apportent soit le plus rapide possible.
Ces temps importants coutent √©galement de l‚Äôargent, il faut en effet bien faire tourner ces tests sur des machines.
Pour information, l‚Äôinfrastructure du site web (√† lui seul, juste l‚Äôh√©bergement de nos servers Node + fichiers statiques + CDN) coutent bien moins cher que notre int√©gration continue.
Cela fait bien √©videmment sourire nos Ops ! üòä</li>
<li>Les nouvelles recrues de nos √©quipes n‚Äôont souvent jamais r√©alis√© ce genre de tests, il y a donc une phase <del>de gal√®re</del> d‚Äôapprentissage..</li>
<li>Certaines fonctionnalit√©s sont parfois trop compliqu√©es √† tester avec notre stack E2E (par exemple, les parcours de paiement qui d√©pendent de tiers).
Il nous arrive alors de nous rabattre sur d‚Äôautres techniques avec Jest notamment en ayant un scope moins unitaire.</li>
</ul>
<h3 id="nos-tests-unitaires" style="position:relative;"><a href="#nos-tests-unitaires" aria-label="nos tests unitaires permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nos tests ‚Äúunitaires‚Äù</h3>
<p>Pour compl√©ter nos tests fonctionnels nous avons √©galement une stack de tests √©crits avec <a href="https://jestjs.io/fr/">Jest</a>.
On qualifie ces tests d‚Äôunitaires car nous avons comme principe d‚Äôessayer de toujours tester nos modules JS en ind√©pendance des autres.</p>
<p><em>Ne d√©battons pas ici sur ‚ÄúEst-ce que ce sont des vrais tests unitaires ?‚Äù, suffisamment d‚Äôarticles sur internet traitent de ce sujet.</em></p>
<p>On utilise ces tests pour diff√©rentes raisons qui couvrent des besoins que nos tests fonctionnels ne couvrent pas:</p>
<ul>
<li>nous aider √† d√©velopper nos modules JS avec des pratiques TDD.</li>
<li>documenter et d√©crire comment fonctionne un module JS.</li>
<li>tester des cas limites tr√®s/trop compliqu√©s √† tester avec nos tests E2E.</li>
<li>faciliter le refactoring de notre application en nous montrant les impacts techniques de nos modifications.</li>
</ul>
<p>Avec ces tests, on se met au niveau d‚Äôune fonction utilitaire, d‚Äôune action Redux, d‚Äôun reducer, d‚Äôun composant React.
On se base essentiellement sur <a href="https://slashgear.github.io/discover-jest-hidden-feature-automock/">la fonctionnalit√© d‚Äô<code class="language-text">automock</code> de Jest</a> qui nous propose d‚Äôisoler nos modules JS lorsqu‚Äôon teste.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/f13a9/mocked-modules.avif 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/af71e/mocked-modules.avif 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/c9875/mocked-modules.avif 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/07e28/mocked-modules.avif 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/2babf/mocked-modules.avif 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/f696c/mocked-modules.avif 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/jpeg"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg"
            alt="repr√©sentation visuelle de l&#39;automock"
            title="repr√©sentation visuelle de l&#39;automock"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>L‚Äôimage pr√©c√©dente repr√©sente la m√©taphore qui nous permet d‚Äôexpliquer notre strat√©gie de tests unitaires aux nouveaux arrivant.</p>
<blockquote>
<p>‚ÄúIl faut s‚Äôimaginer que l‚Äôapplication est un mur compos√© de briques unitaires (nos modules ecmascript), nos tests unitaires doivent tester une √† une les briques en ind√©pendance totale des autres.
Nos tests fonctionnels sont l√† pour tester le ciment entre les briques.‚Äù</p>
</blockquote>
<p><strong>Pour r√©sumer, on pourrait dire que nos tests E2E testent <em>ce que notre application doit faire</em>, et nos tests unitaires s‚Äôassurent eux de v√©rifier <em>comment √ßa marche.</em></strong></p>
<p>Aujourd‚Äôhui ce sont plus de 6000 tests unitaires qui couvrent l‚Äôapplication et permettent de limiter les r√©gressions.</p>
<p>üëç</p>
<ul>
<li><a href="https://jestjs.io/fr/">Jest</a> est vraiment une librairie g√©niale, rapide, compl√®te, bien document√©e.</li>
<li>Les tests unitaires nous aident beaucoup √† comprendre <em>plusieurs ann√©es apr√®s</em> comment tout cela fonctionne.</li>
<li>On arrive toujours √† tester unitairement notre code, et cela compl√®te bien nos tests E2E.</li>
<li>L‚Äô<code class="language-text">automock</code> est vraiment pratique pour le d√©coupage de tests par modules.</li>
</ul>
<p>üëé</p>
<ul>
<li>Parfois, nous nous sommes trouv√©s limit√©s par notre stack de tests E2E et nous ne pouvions pas uniquement nous baser sur les tests unitaires.
Il nous manquait quelque chose pour pouvoir s‚Äôassurer que le <em>ciment entre les briques</em> fonctionnait comme on le souhaitait.
Pour cela, il a √©t√© mis en place une deuxi√®me stack de tests <a href="https://jestjs.io/fr/">Jest</a> nomm√© ‚Äútest d‚Äôint√©gration‚Äù ou l‚Äô<code class="language-text">automock</code> est d√©sactiv√©.</li>
<li>L‚Äôabus de <a href="https://jestjs.io/docs/snapshot-testing"><em>Snapshot</em></a> est dangereux pour la sant√©.
L‚Äôusage du <em>‚ÄúSnapshot testing‚Äù</em> peut faire gagner du temps sur l‚Äôimpl√©mentation de vos tests mais peuvent en r√©duire la qualit√©.
Avoir √† review un object de 50 lignes en <em>Snapshot</em> est ni facile, ni pertinent.</li>
<li>Avec la d√©pr√©ciation d‚Äô<a href="https://enzymejs.github.io/enzyme/">EnzymeJS</a>, nous sommes contraints de migrer sur <a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library</a>.
Il est bien √©videmment possible de tester unitairement des composants avec cette nouvelle librairie.
Malheureusement, ce n‚Äôest pas vraiment l‚Äôesprit et la fa√ßon de faire.
<a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library</a> nous pousse <a href="https://kentcdodds.com/blog/why-i-never-use-shallow-rendering">√† ne pas jouer avec le <em>shallow rendering</em></a>.</li>
</ul>
<h3 id="nos-principes" style="position:relative;"><a href="#nos-principes" aria-label="nos principes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nos principes</h3>
<p>Nous essayons de toujours respecter les r√®gles suivantes lorsqu‚Äôon se pose la question ‚ÄúDois-je ajouter des tests ?‚Äú.</p>
<ol>
<li>Si notre <em>Pull Request</em> introduit des nouvelles fonctionnalit√©s utilisateurs, il faut int√©grer des scenarios de test E2E.
Des tests unitaires avec Jest peuvent les compl√©ter / remplacer en fonction.</li>
<li>Si notre <em>Pull Request</em> a pour but de corriger un bug, cela signifie qu‚Äôil nous manque un cas de test.
On doit donc essayer de rajouter un test E2E ou √† d√©faut un test unitaire.</li>
</ol>
<p><em>C‚Äôest en √©crivant ces lignes que je me dis que ces principes pourraient tr√®s bien faire l‚Äôobjet d‚Äôune automatisation.</em> ü§£</p>
<h2 id="le-projet-reste-les-fonctionnalit√©s-non" style="position:relative;"><a href="#le-projet-reste-les-fonctionnalit%C3%A9s-non" aria-label="le projet reste les fonctionnalit√©s non permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Le projet reste, les fonctionnalit√©s non</h2>
<blockquote>
<p>‚ÄúLa seconde √©volution d‚Äôune fonctionnalit√© est tr√®s souvent sa suppression.‚Äù</p>
</blockquote>
<p>Par principe, nous souhaitons faire en sorte que chaque nouvelle fonctionnalit√© de l‚Äôapplication ne base pas son activation sur le simple fait d‚Äô√™tre dans la codebase.
Classiquement, le cycle de vie d‚Äôune ‚Äúfeature‚Äù dans un projet peut √™tre le suivant (dans un <a href="https://guides.github.com/introduction/flow/">Github Flow</a>):</p>
<ul>
<li>une personne impl√©mente sur une branche</li>
<li>la fonctionnalit√© est <em>merg√©e</em> sur master</li>
<li>elle est d√©ploy√©e en production</li>
<li>vis sa vie de fonctionnalit√© (avec parfois des bugs et des correctifs)</li>
<li>la fonctionnalit√© n‚Äôest plus n√©cessaire</li>
<li>une personne d√©tricote le code et l‚Äôenl√®ve</li>
<li>nouveau d√©ploiement</li>
</ul>
<p>Pour simplifier certaines √©tapes, il a √©t√© mis en place du <em>feature flipping</em> sur le projet.</p>
<p><strong>Comment √ßa marche ?</strong></p>
<p>Dans notre config il y a une <em>map</em> cl√©/valeur qui liste toutes les fonctionnalit√©s de l‚Äôapplication associ√©es √† leur statut d‚Äôactivation.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> featureFlipping <span class="token operator">=</span> <span class="token punctuation">{</span>
  myAwesomeFeature<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  anotherOne<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Dans notre code, nous avons donc impl√©ment√© des traitements conditionnels qui disent ‚ÄúSi cette feature est activ√©e alors‚Ä¶‚Äú.
Cela peut changer le rendu d‚Äôun composant, changer l‚Äôimpl√©mentation d‚Äôune action Redux ou bien d√©sactiver une route de notre <em>react-router</em>.</p>
<p><strong>Mais √† quoi √ßa sert ?</strong></p>
<ul>
<li>On peut d√©velopper des nouvelles √©volutions progressivement en les cachant derri√®re une cl√© de configuration.
On livre des fonctionnalit√©s en production sans les activer.</li>
<li>En environnement de test, on peut surcharger cette config pour tester des features qui ne sont pas encore activ√©es en production.</li>
<li>Dans le cas d‚Äôun site en marque blanche, on peut proposer ces fonctionnalit√©s √† nos clients comme des options possibles.</li>
<li>Avant de supprimer le code d‚Äôune feature, on la d√©sactive puis on fait le m√©nage sans risque.</li>
<li>Gr√¢ce √† un outil maison nomm√© l‚Äô<em>Applaunch</em>, cette config de feature flipping est surchargeable dans une interface graphique √† chaud sans d√©ploiement.
Cela nous permet d‚Äôactiver des fonctionnalit√©s sans faire de mise en production du code.
En cas d‚Äôincident, on peut d√©sactiver des fonctionnalit√©s qui sont d√©grad√©es.</li>
</ul>
<p>Pour vous donner un exemple plus concret, entre 2018 et 2020 nous avons compl√®tement refondu l‚Äôinterface de l‚Äôapplication.
Cette √©volution graphique n‚Äô√©tait qu‚Äôune cl√© de featureFlipping.
La refonte graphique n‚Äôa donc pas √©t√© la remise √† z√©ro du projet, on continue encore aujourd‚Äôhui de vivre avec les deux versions (tant que la bascule de tous nos clients n‚Äôest pas termin√©e).</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/1148bec58444fa4ccea56315b956b236/f13a9/compare-v4-v5.avif 200w,
/static/1148bec58444fa4ccea56315b956b236/af71e/compare-v4-v5.avif 400w,
/static/1148bec58444fa4ccea56315b956b236/c9875/compare-v4-v5.avif 800w,
/static/1148bec58444fa4ccea56315b956b236/07e28/compare-v4-v5.avif 1200w,
/static/1148bec58444fa4ccea56315b956b236/2babf/compare-v4-v5.avif 1600w,
/static/1148bec58444fa4ccea56315b956b236/f696c/compare-v4-v5.avif 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,
/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,
/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,
/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,
/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,
/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,
/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,
/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,
/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,
/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,
/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/jpeg"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg"
            alt="screenshot comparatif v4 / v5 sur 6play"
            title="screenshot comparatif v4 / v5 sur 6play"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h3 id="lab-testing" style="position:relative;"><a href="#lab-testing" aria-label="lab testing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>L‚ÄôA/B testing</h3>
<p>Gr√¢ce au super travail des √©quipes backend et data, on a pu m√™me √©tendre l‚Äôusage du <em>feature flipping</em> en rendant cette configuration modifiable pour des sous groupes d‚Äôutilisateurs.</p>
<p>Cela permet de d√©ployer des nouvelles fonctionnalit√©s sur une portion plus r√©duite des utilisateurs afin de comparer nos <a href="https://www.journaldunet.fr/business/dictionnaire-du-marketing/1198189-kpi-key-performance-indicator-marketing-definition-exemples-okr/">KPI</a>.</p>
<p>Prise de d√©cision, am√©lioration des performances techniques ou produit, exp√©rimentations, les possibilit√©s sont nombreuses et nous les exploitons de plus en plus.</p>
<h3 id="le-futur-flipping" style="position:relative;"><a href="#le-futur-flipping" aria-label="le futur flipping permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Le <em>futur flipping</em></h3>
<blockquote>
<p>Sur une id√©e originale de <a href="https://twitter.com/SuperFlaw">Florent Lepretre</a>.</p>
</blockquote>
<p>Nous avions r√©guli√®rement le besoin d‚Äôactiver des feature √† des heures <del>tr√®s</del> trop matinales dans le futur.
Pour cela nous devions √™tre connect√© √† une heure pr√©cise sur notre poste pour modifier la configuration √† chaud.</p>
<p>Afin d‚Äô√©viter d‚Äôoublier de le faire, ou de le faire en retard, nous avons fait en sorte qu‚Äôune cl√© de configuration puisse √™tre activ√©e √† partir d‚Äôune certaine date.
Pour cela, nous avons fait √©voluer notre <em>selector redux</em> qui indiquait si une feature √©tait activ√©e pour qu‚Äôil puisse g√©rer des formats de date et les comparer √† l‚Äôheure courante.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> featureFlipping <span class="token operator">=</span> <span class="token punctuation">{</span>
  myAwesomeFeature<span class="token operator">:</span> <span class="token punctuation">{</span>
    offDate<span class="token operator">:</span> <span class="token string">'2021-07-12 20:30:00'</span><span class="token punctuation">,</span>
    onDate<span class="token operator">:</span> <span class="token string">'2021-07-12 19:30:00'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>De nombreux caf√©s ‚òïÔ∏è √† 9h ont √©t√© sauv√©s gr√¢ce au <em>futur flipping</em></p>
</blockquote>
<h2 id="monitorer-mesurer-alerter" style="position:relative;"><a href="#monitorer-mesurer-alerter" aria-label="monitorer mesurer alerter permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitorer, Mesurer, Alerter</h2>
<p>Pour maintenir un projet aussi longtemps que l‚Äôapplication web de bedrock, des tests, de la documentation et de la rigueur ne suffisent pas.
Il faut √©galement de la visibilit√© sur ce qui marche en production.</p>
<blockquote>
<p>‚ÄúComment sais-tu que l‚Äôapplication que tu as en production en ce moment m√™me fonctionne comme pr√©vu ?‚Äù</p>
</blockquote>
<p>On part du principe qu‚Äôaucune fonctionnalit√© ne marche tant qu‚Äôelle n‚Äôest pas monitor√©e.
Aujourd‚Äôhui le monitoring √† Bedrock cot√© Frontend se mat√©rialise par diff√©rents outils et diff√©rentes stacks.
Je pourrais vous citer <a href="https://newrelic.com/">NewRelic</a>, un <a href="https://github.com/statsd/statsd">Statsd</a>, une stack <a href="https://www.elastic.co/fr/what-is/elk-stack">ELK</a> ou bien encore <a href="https://youbora.nicepeopleatwork.com/">Youbora</a> pour la vid√©o.</p>
<p>Pour vous donner un exemple, √† chaque fois qu‚Äôun utilisateur commence une session de navigation on envoie un <em>Hit</em> de monitoring anonyme pour incr√©menter un compteur dans Statsd.
On a alors plus qu‚Äô√† d√©finir un dashboard qui affiche dans un graphique l‚Äô√©volution de ce nombre.
Si on observe une variation trop importante, cela peut nous permettre de d√©tecter un incident.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/5da9f76c5fa5325b394418fa229d9204/f13a9/grafana-monitoring-example.avif 200w,
/static/5da9f76c5fa5325b394418fa229d9204/af71e/grafana-monitoring-example.avif 400w,
/static/5da9f76c5fa5325b394418fa229d9204/c9875/grafana-monitoring-example.avif 800w,
/static/5da9f76c5fa5325b394418fa229d9204/07e28/grafana-monitoring-example.avif 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/2babf/grafana-monitoring-example.avif 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/8d64d/grafana-monitoring-example.avif 3702w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,
/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,
/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,
/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,
/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,
/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,
/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png"
            alt="exemple de dashboard de suivi"
            title="exemple de dashboard de suivi"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Le monitoring nous offre aussi des solutions pour comprendre et analyser un bug qui s‚Äôest produit dans le pass√©.
Comprendre un incident, l‚Äôexpliquer, en trouver sa <em>root cause</em> sont les possibilit√©s qui s‚Äôoffrent √† vous si vous monitorez votre application.
Le monitoring peut √©galement permettre de mieux communiquer avec les clients sur les impacts d‚Äôun incident et √©galement d‚Äôestimer le nombre d‚Äôutilisateurs impact√©s.</p>
<p>Avec la multiplication de nos clients, bien monitorer nos plateformes n‚Äôest plus suffisant.
Trop de donn√©es, trop de dashboards √† surveiller, il devient tr√®s facile de louper quelque chose.
Nous avons donc commenc√© √† compl√©ter notre suivi des mesures par de l‚Äô<em>alerting</em> automatique.
Une fois que les mesures nous apportent suffisamment de confiance, on peut facilement mettre en place des alertes qui vont nous pr√©venir en cas de valeur incoh√©rente.</p>
<p>Nous essayons cependant de toujours d√©clencher des alertes uniquement quand celle-ci est actionnable.
Dans d‚Äôautres termes, si une alerte sonne, nous avons quelque chose √† faire.
Faire sonner des alertes qui ne n√©cessitent aucune action imm√©diate humaine g√©n√®rent du bruit et de la perte de temps.</p>
<p><img src="/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif" alt="alerte g√©n√©rale"></p>
<h2 id="limiter-surveiller-et-mettre-√†-jour-ses-d√©pendances" style="position:relative;"><a href="#limiter-surveiller-et-mettre-%C3%A0-jour-ses-d%C3%A9pendances" aria-label="limiter surveiller et mettre √† jour ses d√©pendances permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limiter, surveiller et mettre √† jour ses d√©pendances</h2>
<p>Ce qui p√©rime plus vite que votre ombre dans un projet web bas√© sur des technologies javascript, ce sont vos d√©pendances.
L‚Äô√©cosyst√®me √©volue rapidement et vos d√©pendances peuvent vite se retrouver non maintenues, plus √† la mode ou bien compl√®tement refondues avec de gros <em>breaking changes</em>.</p>
<p>On essaye donc dans la mesure du possible de limiter nos d√©pendances et d‚Äô√©viter d‚Äôen ajouter inutilement.
Une d√©pendance, c‚Äôest souvent tr√®s facile √† ajouter mais elle peut devenir un vrai casse-t√™te √† enlever.</p>
<p>Les librairies de composants graphiques (exemple React bootstrap, Material Design) sont un bel exemple de d√©pendance que nous tenons √† ne pas introduire.
Elles peuvent faciliter l‚Äôint√©gration dans un premier temps mais celles-ci bloquent souvent la version de votre librairie de composant par la suite.
Vous ne voulez pas figer la version de React dans votre application pour deux composants de formulaires.</p>
<p>La surveillance fait aussi partie de nos routines de gestion de nos d√©pendances.
Depuis l‚Äôajout du <a href="https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities">signalement de failles de s√©curit√© dans un package NPM</a>, il est possible de savoir si un projet int√®gre une d√©pendance qui contient une faille de s√©curit√© connue par une simple commande.
Nous avons donc des jobs journaliers sur nos projets qui lancent la commande <code class="language-text">yarn audit</code> afin de nous forcer √† appliquer les correctifs.</p>
<blockquote>
<p>La maintenance de d√©pendances est grandement facilit√© par notre stack de tests E2E qui sonnent direcement si la mont√©e de version g√©n√®re une regression.</p>
</blockquote>
<p>Aujourd‚Äôhui, hors failles de s√©curit√©, nous mettons √† jour nos d√©pendances ‚Äúquand on a le temps‚Äù, souvent en fin de <em>sprint</em>.
Cela ne nous satisfait pas car certaines d√©pendances peuvent se retrouver oubli√©es.
J‚Äôai personnellement l‚Äôhabitude d‚Äôutiliser des outils comme <a href="https://classic.yarnpkg.com/en/docs/cli/outdated/"><code class="language-text">yarn outdated</code></a> et <a href="https://dependabot.com/">Dependabot</a> sur mes projets personels pour automatiser la mise √† jour de mes d√©pendances.</p>
<h2 id="accepter-sa-dette-technique" style="position:relative;"><a href="#accepter-sa-dette-technique" aria-label="accepter sa dette technique permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Accepter sa dette technique</h2>
<p>Un projet accumulera toujours de la dette technique.
<strong>C‚Äôest un fait.</strong>
Que ce soit de la dette volontaire ou involontaire, un projet qui r√©siste aux ann√©es va forc√©ment accumuler de la dette.
D‚Äôautant plus, si pendant toutes ces ann√©es vous continuez d‚Äôajouter des fonctionnalit√©s.</p>
<p>Depuis 2014, nos bonnes pratiques, nos fa√ßons de faire ont bien √©volu√©.
Parfois nous avons d√©cid√© ces changements mais parfois nous les avons subi (un exemple, l‚Äôarriv√©e des composants fonctionnels avec React et l‚Äôapi des Hooks).</p>
<p><strong>Notre projet n‚Äôest pas compl√®tement <em>‚Äústate of art‚Äù</em> et on l‚Äôassume.</strong></p>
<p><img src="/c80d0cd308b5657d54f976a32fe2c811/leak.gif" alt="√ßa tiendra !"></p>
<p>Nous essayons de prioriser nos sujets de <em>refactoring</em> sur les parties de l‚Äôapplication sur lequel on a le plus de souci, le plus de peine.
On consid√®re qu‚Äôune partie de l‚Äôapplication qui ne nous pla√Æt pas mais sur laquelle on n‚Äôa pas besoin de travailler (apporter des √©volutions) ne m√©rite pas qu‚Äôon la refactorise.</p>
<p>Je pourrais vous citer de nombreuses fonctionnalit√©s de notre application qui n‚Äôont pas √©volu√© fonctionnellement depuis plusieurs ann√©es.
Mais comme nous avons couvert ces fonctionnalit√©s de tests E2E depuis le d√©but, nous n‚Äôavons pas vraiment eu √† y retoucher.</p>
<p>Comme dit plus haut, la prochaine √©volution d‚Äôune feature de code est parfois sa d√©sactivation.
Alors pourquoi passer son temps √† r√©-√©crire toute l‚Äôapplication ?</p>
<ul>
<li>Le code devient dans tous les cas du ‚Äúlegacy‚Äù.</li>
<li>Tant que les fonctionnalit√©s sont test√©es, rien ne nous oblige √† tout refactorer en permanence pour que toute notre codebase soit <em>state of art</em>.</li>
<li>On se focalise sur nos <em>pain points</em>, on re-factorise ce qu‚Äôon a vraiment besoin de faire √©voluer.</li>
</ul>
<h2 id="pour-r√©sumer" style="position:relative;"><a href="#pour-r%C3%A9sumer" aria-label="pour r√©sumer permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pour r√©sumer</h2>
<p>Les bonnes pratiques pr√©sent√©es ici restent bien √©videmment subjectives et ne s‚Äôappliqueront pas parfaitement/directement dans vos contextes.
Je suis cependant convaincu qu‚Äôelles peuvent probablement vous aider √† identifier ce qui peut faire passer votre projet de fun √† p√©rim√©.
√Ä Bedrock nous avons mis en place d‚Äôautres pratiques que je n‚Äôai pas list√©es ici mais ce sera l‚Äôoccasion de faire un nouvel article un jour.</p>
<p>Enfin, si vous souhaitez que je revienne plus en d√©tail sur certains chapitres pr√©sent√©s ici, n‚Äôh√©sitez pas √† me le dire, je pourrais essayer d‚Äôy d√©dier un article sp√©cifique.</p></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","headline":"Bonnes pratiques pour la maintenance d'une application web","editor":"Antoine Caron","genre":"Tech Blog","wordcount":4276,"url":"https://slashgear.github.io/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/","mainEntityOfPage":"https://slashgear.github.io/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/","datePublished":"2021-08-25","dateCreated":"2021-08-25","dateModified":"2021-08-25","description":"Comment ne pas jeter son projet au bout de 2 ans ? Retour d'exp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez Bedrock Streaming.","articleBody":"<blockquote>\n<p>Comment ne pas jeter son application tous les deux ans ?</p>\n</blockquote>\n<p><em>Retour d‚Äôexp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez <a href=\"https://www.bedrockstreaming.com/\">Bedrock Streaming</a></em></p>\n<h2 id=\"un-peu-de-contexte\" style=\"position:relative;\"><a href=\"#un-peu-de-contexte\" aria-label=\"un peu de contexte permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un peu de contexte</h2>\n<p>Chez Bedrock Streaming de nombreuses √©quipes d√©veloppent et maintiennent des applications <em>frontend</em> pour nos clients et utilisateurs.\nCertaines ne sont pas toute jeune.\nEn effet, l‚Äôapplication sur laquelle je travaille principalement est un site web dont les d√©veloppements ont commenc√© en 2014.\nJe l‚Äôai d‚Äôailleurs d√©j√† √©voqu√©e dans diff√©rents articles de <a href=\"https://slashgear.github.io/\">ce blog</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/f13a9/commit-count.avif 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/6d0e0/commit-count.avif 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w\"\n            sizes=\"(max-width: 294px) 100vw, 294px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n            alt=\"impression d&#39;√©cran du nombre de commit sur master de notre projet 15668\"\n            title=\"impression d&#39;√©cran du nombre de commit sur master de notre projet 15668\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Vous pourriez vous dire: <em>‚ÄúOh les pauvres maintenir une application vieille de presque 10 ans √ßa doit √™tre un enfer !‚Äù</em></p>\n<p>Rassurez-vous, ce n‚Äôest pas le cas !\nJ‚Äôai travaill√© sur des projets bien moins vieux mais sur lesquels le d√©veloppement de nouvelles fonctionnalit√©s √©tait bien plus p√©nible.</p>\n<p>Aujourd‚Äôhui le projet reste √† jour techniquement, on doit √™tre sur la derni√®re version de React alors que celui-ci avait commenc√© sur une version <em>0.x.x</em>.\nDans ce monde des technologies web souvent d√©cri√© (ex: les nombreux articles sur la <em>Javascript Fatigue</em>) dont les outils et les pratiques √©voluent constamment, conserver un projet ‚Äú√† jour‚Äù reste un vrai challenge.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/f13a9/releases.avif 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/7bd34/releases.avif 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w\"\n            sizes=\"(max-width: 350px) 100vw, 350px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n            alt=\"nombre de versions de l&#39;application 1445\"\n            title=\"nombre de versions de l&#39;application 1445\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>De plus, dans le contexte de ce projet, en presque 10 ans, nous avons connu une centaine de contributeurs.\nCertains ne sont rest√©s que quelques mois/ann√©es.\nComment garder au maximum la connaissance sur ‚ÄúComment on fait les choses et comment √ßa marche ?‚Äù dans un contexte humain si mouvant ?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/f13a9/contributors.avif 200w,\n/static/333e464600eaed01c177c248b9aac0eb/af71e/contributors.avif 400w,\n/static/333e464600eaed01c177c248b9aac0eb/679d2/contributors.avif 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,\n/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,\n/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,\n/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,\n/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w\"\n            sizes=\"(max-width: 690px) 100vw, 690px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n            alt=\"liste des 100 contributeurs du projet\"\n            title=\"liste des 100 contributeurs du projet\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>C‚Äôest ce que je vous propose de vous pr√©senter.</p>\n<p>Avec l‚Äôaide de mes coll√®gues, j‚Äôai rassembl√© la liste des bonnes pratiques qui nous permettent encore aujourd‚Äôhui de maintenir ce projet en √©tat.\nAvec <a href=\"https://twitter.com/fooragnak\">Florent Dubost</a>, on s‚Äôest souvent dit qu‚Äôil serait int√©ressant de la publier.\nNous esp√®rons que cela vous sera utile.</p>\n<h2 id=\"simposer-des-r√®gles-et-les-automatiser\" style=\"position:relative;\"><a href=\"#simposer-des-r%C3%A8gles-et-les-automatiser\" aria-label=\"simposer des r√®gles et les automatiser permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>S‚Äôimposer des r√®gles et les automatiser</h2>\n<p>Un projet qui r√©siste au temps c‚Äôest tout d‚Äôabord un ensemble de connaissances qu‚Äôon empile les unes sur les autres.\nC‚Äôest en quelque sorte la tour de Kapla que vous assembliez petit en essayant d‚Äôaller le plus haut possible.\nUne base solide sur laquelle on esp√®re pouvoir ajouter le plus possible avant une potentielle chute.</p>\n<p>D√®s le d√©but d‚Äôun projet on est donc amen√© √† prendre des d√©cisions importantes sur ‚ÄúComment on souhaite faire les choses ?‚Äú.\nOn pense par exemple √† ‚ÄúQuel format pour nos fichiers ? Comment on nomme telle ou telle chose ?‚Äù\n√âcrire une documentation pr√©cise de ‚ÄúComment on fait les choses‚Äù pourrait paraitre une bonne id√©e.</p>\n<p>Cependant la documentation c‚Äôest cool, mais √ßa a tendance √† p√©rimer tr√®s vite.\nNos d√©cisions √©voluent mais pas la documentation.</p>\n<blockquote>\n<p>‚ÄúLes temps changent mais pas les README.‚Äù</p>\n<p><a href=\"https://twitter.com/omansour\"><em>Olivier Mansour (deputy CTO √† Bedrock)</em></a></p>\n</blockquote>\n<p>Automatiser la v√©rification de chacune des r√®gles qu‚Äôon s‚Äôimpose (sur notre codebase ou nos process) est bien plus p√©renne.\nPour faire simple, on √©vite dans la mesure du possible de dire ‚ÄúOn devrait faire les choses comme cela‚Äù, et on pr√©f√®re ‚Äúon va coder un truc qui nous le v√©rifie √† notre place‚Äù.\nEn plus de √ßa, cot√© JS on est vraiment bien √©quip√© avec des outils comme <a href=\"https://eslint.org/\">Eslint</a> qui nous permettent d‚Äôimpl√©menter nos propres r√®gles.</p>\n<p>Le r√©flexe qu‚Äôon essaie donc d‚Äôadopter est donc le suivant:</p>\n<ul>\n<li>‚ÄúOn devrait essayer de faire comme cela √† pr√©sent !‚Äù</li>\n<li>‚ÄúOk c‚Äôest int√©ressant, mais comment peut-on s‚Äôassurer qu‚Äôon fasse comme cela automatiquement avec notre CI (Int√©gration continue) ?‚Äù</li>\n</ul>\n<p>L‚Äôint√©gration continue d‚Äôun projet est la solution parfaite pour ne rien louper sur chacune des <em>Pull Request</em> que nous proposons.\nLes reviews n‚Äôen sont que plus simples car vous n‚Äôavez plus √† vous soucier de l‚Äôensemble des r√®gles qui sont d√©j√† automatis√©es.\nDans ce mod√®le, la review sert donc plus au partage de connaissance qu‚Äôau flicage de typo et autre non respect des conventions du projet.</p>\n<p>Dans ce principe, il faut donc essayer de bannir les r√®gles orales.\nLe temps des druides est termin√©, s‚Äôil faut transmettre oralement toutes les bonnes pratiques d‚Äôun projet, l‚Äôaccompagnement de nouveaux d√©veloppeurs dans votre √©quipe n‚Äôen sera que plus long.</p>\n<p><img src=\"/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif\" alt=\"la recette de la potion magique de panoramix est perdue car secr√®te\"></p>\n<p>Un projet n‚Äôest pas fig√©. Ces r√®gles √©voluent donc avec le temps.\nOn pr√©f√®rera alors l‚Äôajout de r√®gles qui poss√®dent un script qui <em>autofixera</em> toute la codebase intelligemment.\nDe nombreuses r√®gles Eslint le proposent, et cela est vraiment un crit√®re de s√©lection tr√®s important dans nos choix de nouvelles conventions.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">eslint --fix</code></pre></div>\n<p>Une r√®gle tr√®s stricte qui vous obligera √† modifier votre code manuellement avant chaque push est p√©nible √† la longue et √©nervera vos √©quipes.\nAlors qu‚Äôune r√®gle (m√™me tr√®s stricte) qui peut s‚Äôautofixer automatiquement au moment du commit ne sera pas per√ßue comme g√™nante.</p>\n<p><strong>Comment d√©cider d‚Äôajouter de nouvelles r√®gles ?</strong></p>\n<p>Cette question peut paraitre √©pineuse, prenons par exemple le cas des <code class=\"language-text\">&lt;tab></code> / <code class=\"language-text\">&lt;space></code> dans les fichiers.\nPour cela, on essaie d‚Äô√©viter les d√©bats sempiternels et on se plie √† la tendance et aux r√®gles de la communaut√©.\nPar exemple, <a href=\"https://github.com/M6Web/eslint-tools\">notre base de configuration Eslint</a>) est bas√©e sur celle d‚ÄôAirbnb qui semble avoir un certain succ√®s dans la communaut√© JS.\nMais si la r√®gle qu‚Äôon souhaite s‚Äôimposer n‚Äôest pas disponible dans Eslint ou d‚Äôautres outils, il nous arrive de pr√©f√©rer ne pas suivre la r√®gle plut√¥t que de se dire ‚ÄúOn le fait sans CI qui v√©rifie‚Äù.</p>\n<h3 id=\"la-liste-presque-exhaustive-\" style=\"position:relative;\"><a href=\"#la-liste-presque-exhaustive-\" aria-label=\"la liste presque exhaustive  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>La liste <em>presque</em> exhaustive ü§û</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/f13a9/ci-workflow.avif 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/af71e/ci-workflow.avif 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/0bbb0/ci-workflow.avif 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n            alt=\"Notre workflow d&#39;int√©gration continue\"\n            title=\"Notre workflow d&#39;int√©gration continue\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Le format des fichiers est suivi g√©r√© par <a href=\"https://editorconfig.org/\">Editorconfig</a>, <a href=\"https://prettier.io/\">prettier</a> et <a href=\"https://eslint.org/\">Eslint</a>.\nNous avons opensourc√© <a href=\"https://github.com/M6Web/eslint-tools\">notre propre configuration</a>, si jamais celle-ci peut vous √™tre utile.</li>\n<li>Nous utilisons un <a href=\"https://www.conventionalcommits.org/en/v1.0.0/\">nommage de commit bien sp√©cifique</a> pour g√©n√©rer nos changelog.\nPour s‚Äôassurer que les devs le respectent, une simple √©tape de notre CI le v√©rifie.</li>\n<li>On ne souhaite pas qu‚Äôun dev fasse grossir √©norm√©ment nos bundles JS en production, c‚Äôest pourquoi nous suivons et mesurons leur taille dans la CI.\nOn utilise un outil maison mais on peut vous recommander l‚Äôoutil <a href=\"https://buildtracker.dev/\">BuildTracker</a>.</li>\n<li>La couverture de tests n‚Äôest pas un indicateur pour l‚Äô√©quipe, toutes les lignes n‚Äôont pas la m√™me n√©cessit√© pour nous d‚Äô√™tre test√©es.\nCertaines √©quipes √† Bedrock suivent cependant cet indicateur qui a au moins l‚Äôint√©r√™t de donner une tendance.</li>\n<li>Nos tests unitaires tournent bien √©videmment sur la CI, ceux-ci doivent passer.</li>\n<li>Nos tests fonctionnels (End to end: E2E) tournent sur Chrome Headless, ils doivent √™tre au vert.</li>\n<li>Les logs de nos tests E2E sont r√©cup√©r√©s et pars√©s afin d‚Äô√©viter l‚Äôintroduction d‚Äôerreur ou de React warning (Le script de parsing est cependant compliqu√© √† maintenir)</li>\n<li>Les tests fonctionnels fonctionnent dans une <em>sandbox</em> o√π tout le r√©seau est proxyfi√©.\nNous surveillons que nos tests ne d√©pendent pas d‚Äôune API non mock√©e qui pourrait ralentir leur ex√©cution.</li>\n<li>Durant les tests E2E nous v√©rifions qu‚Äôaucune requ√™te d‚Äôimage n‚Äôa g√©n√©r√© une 404.</li>\n<li>On r√©alise quelques <a href=\"https://www.deque.com/axe/\">v√©rifications d‚Äôaccessibilit√© avec Axe</a> durant nos tests E2E.</li>\n<li>On v√©rifie quelques r√®gles sur le CSS avec <a href=\"https://stylelint.io/\">Stylelint</a> et <a href=\"https://github.com/M6Web/bemlinter\">bemlinter</a> (on n‚Äôutilise plus BEM aujourd‚Äôhui mais il reste encore un peu de style g√©r√© en SCSS qu‚Äôon migre petit √† petit en StyledComponent)</li>\n<li>Le projet est un monorepo sur lequel nous essayons de maintenir les m√™mes versions de d√©pendances pour chaque package.\nPour cela nous avons d√©velopp√© un outil qui permet de faire cette v√©rification <em><a href=\"https://www.npmjs.com/package/monorepo-dependencies-check\">monorepo-dependencies-check</a></em></li>\n<li>On v√©rifie que notre fichier <code class=\"language-text\">yarn.lock</code> n‚Äôa pas √©t√© modifi√© par inadvertance ou bien qu‚Äôil a √©t√© mis √† jour par rapport aux modifications du <code class=\"language-text\">package.json</code>.</li>\n<li><a href=\"https://www.terraform.io/\">Terraform</a> est utilis√© pour la gestion de nos ressources cloud, nous v√©rifions que le format des fichiers est correct.</li>\n</ul>\n<h2 id=\"tester-tester-tester\" style=\"position:relative;\"><a href=\"#tester-tester-tester\" aria-label=\"tester tester tester permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tester, tester, tester</h2>\n<p>J‚Äôesp√®re qu‚Äôen 2021 il n‚Äôest plus n√©cessaire d‚Äôexpliquer pourquoi tester automatiquement son application est indispensable pour la rendre p√©renne.\nEn JS on est plut√¥t bien √©quip√© en terme d‚Äôoutils pour tester aujourd‚Äôhui.\nIl reste cependant l‚Äô√©ternelle question:</p>\n<blockquote>\n<p>‚ÄúQu‚Äôest-ce qu‚Äôon veut tester ?‚Äù</p>\n</blockquote>\n<p>Globalement si on recherche sur internet cette question, on voit que des besoins diff√©rents font √©merger des pratiques et des outils de testing bien diff√©rents.\nCe serait tr√®s pr√©somptueux de penser qu‚Äôil y a une bonne mani√®re de tester automatiquement son application.\nC‚Äôest pourquoi il est pr√©f√©rable de d√©finir une ou plusieurs strat√©gies de test qui r√©pondent √† des besoins d√©finis et limit√©s.</p>\n<p>Nos strat√©gies de tests reposent sur deux volont√©s bien distinctes:</p>\n<ul>\n<li>Automatiser la v√©rification des fonctionnalit√©s propos√©es aux utilisateurs en se mettant √† sa place.</li>\n<li>Nous fournir des solutions efficaces pour specifier la mani√®re dont nous impl√©mentons nos solutions techniques pour nous permettre de les faire √©voluer plus facilement.</li>\n</ul>\n<p>Pour cela, nous r√©alisons deux ‚Äútypes de tests‚Äù que je propose de vous pr√©senter ici.</p>\n<h3 id=\"nos-tests-e2e\" style=\"position:relative;\"><a href=\"#nos-tests-e2e\" aria-label=\"nos tests e2e permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos tests E2E</h3>\n<p>On les appelle ‚Äútests fonctionels‚Äù, ce sont des tests End-to-end (E2E) sur une stack technique tr√®s efficace compos√©e de <a href=\"https://cucumber.io/docs/installation/javascript/\">CucumberJS</a>, <a href=\"https://webdriver.io/\">WebdriverIO</a> avec <a href=\"https://developers.google.com/web/updates/2017/04/headless-chrome\">ChromeHeadless</a>\nIl s‚Äôagit d‚Äôune stack technique mise en place au d√©but du projet (√† l‚Äô√©poque avec <a href=\"https://phantomjs.org/\">PhantomJS</a> pour les plus anciens d‚Äôentre-vous)</p>\n<p>Cette stack nous permet d‚Äôautomatiser le pilotage de tests qui contr√¥lent un navigateur.\nCe navigateur va r√©aliser des actions qui se rapprochent le plus de celles que nos vrais utilisateurs peuvent faire tout en v√©rifiant comment le site r√©agit.</p>\n<p>Il y a quelques ann√©es, cette stack technique √©tait plut√¥t compliqu√©e √† mettre en place, mais aujourd‚Äôhui il est plut√¥t simple de le faire.\n<a href=\"https://github.com/Slashgear/slashgear.github.io\">Le site qui h√©berge cet article de blog</a> en est lui-m√™me la preuve.\nIl ne m‚Äôa fallu qu‚Äôune dizaine de minutes pour mettre en place cette stack avec <a href=\"https://webdriver.io/docs/gettingstarted\">le WebdriverIo CLI</a> pour v√©rifier que mon blog fonctionne comme pr√©vu.</p>\n<p>J‚Äôai d‚Äôailleurs r√©cemment publi√© <a href=\"https://slashgear.github.io/how-to-setup-e2e-tests-with-webdriverio/\">un article pr√©sentant la mise en place de cette stack</a>.</p>\n<p>Voici donc un exemple de fichier de test E2E pour vous donner une id√©e:</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> Playground</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Background:</span><span class=\"token important\"> Playground context</span></span>\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> use <span class=\"token string\">\"playground\"</span> test context\n\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario:</span><span class=\"token important\"> Check if playground is reachable</span></span>\n    <span class=\"token atrule\">When</span> As user <span class=\"token string\">\"toto@toto.fr\"</span> I visit the <span class=\"token string\">\"playground\"</span> page\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a <span class=\"token string\">\"visible playground\"</span>\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> should see 4 <span class=\"token string\">\"playground tab\"</span> in <span class=\"token string\">\"playground\"</span>\n\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should not see a <span class=\"token string\">\"visible playground\"</span>\n\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>Et √ßa donne √ßa en local avec mon navigateur Chrome !</p>\n<p><img src=\"/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif\" alt=\"Exemple d&#x27;ex√©cution de test fonctionnel\"></p>\n<p>Voil√† un sch√©ma qui explique comment cette stack fonctionne:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/f13a9/e2e-archi.avif 200w,\n/static/8de3947494607606cd09c4b4a110bef5/af71e/e2e-archi.avif 400w,\n/static/8de3947494607606cd09c4b4a110bef5/c9875/e2e-archi.avif 800w,\n/static/8de3947494607606cd09c4b4a110bef5/07e28/e2e-archi.avif 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/2babf/e2e-archi.avif 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/5f214/e2e-archi.avif 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,\n/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,\n/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,\n/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,\n/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,\n/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,\n/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png\"\n            alt=\"sch√©ma qui explique le fonctionnement de notre stack\"\n            title=\"sch√©ma qui explique le fonctionnement de notre stack\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Aujourd‚Äôhui, l‚Äôapplication web de Bedrock poss√®de plus de 800 sc√©narios de tests E2E qui tournent sur chacune de nos <em>Pull Request</em> et sur la branche <code class=\"language-text\">master</code>.\nIls nous assurent que nous n‚Äôintroduisons pas de r√©gression fonctionnelle et c‚Äôest juste g√©nial !</p>\n<p>üëç Les points positifs</p>\n<ul>\n<li>WebdriverIO nous permet √©galement de lancer de mani√®re journali√®re ces m√™mes tests sur des vrais devices en passant par le service payant SAAS <a href=\"https://www.browserstack.com/\">Browserstack</a>.\nOn a donc tous les jours un <em>job</em> qui s‚Äôassure que notre site fonctionne correctement sur un Chrome derni√®re version sur Windows 10 et Safari sur MacOs.</li>\n<li>Ces tests nous permettent de facilement documenter les fonctionnalit√©s de l‚Äôapplication gr√¢ce au langage Gherkin.</li>\n<li>Ils nous permettent de reproduire des cas qui sont loin d‚Äô√™tre nominaux.\nDans une logique <em>TDD</em>, ils permettent d‚Äôavancer sur le d√©veloppement sans avoir √† cliquer pendant des heures.</li>\n<li>Ces tests nous ont permis de ne pas casser l‚Äôancienne version du site qui est toujours en production pour quelques clients alors que nos efforts se concentrent sur la nouvelle.</li>\n<li>Ils nous apportent une vraie confiance.</li>\n<li>Gr√¢ce notre librairie <a href=\"https://www.npmjs.com/package/superagent-mock\"><em>superagent-mock</em></a>, nous pouvons <em>fixturer</em> (bouchonner, mocker) toutes les API dont on d√©pend et ainsi m√™me v√©rifier les cas d‚Äôerreurs.\nDe plus, mocker la couche XHR du navigateur permet une am√©lioration significative du temps d‚Äôex√©cution des tests. üöÄ</li>\n<li>Ils nous donne acc√®s √† des usages √©tendus comme :\n<ul>\n<li>v√©rification de r√®gles d‚Äôaccessibilit√©</li>\n<li>check les logs de la console navigateur (pour ne pas introduire d‚Äôerreur ou de React Warning par exemple)</li>\n<li>surveiller tous les appels r√©seaux du site gr√¢ce √† un proxy</li>\n<li>et j‚Äôen passe‚Ä¶</li>\n</ul>\n</li>\n</ul>\n<p>üëé Les complications</p>\n<ul>\n<li>Maintenir cette stack est compliqu√© et co√ªteux.\n√âtant donn√© que peu de ressources sont publi√©es sur ce domaine, on se retrouve parfois √† devoir creuser pendant plusieurs jours pour les r√©parer üòÖ.\nIl nous arrive de nous sentir parfois bien seul √† avoir ces soucis.</li>\n<li>Il est tr√®s facile de coder un test E2E dit <em>flaky</em> (ie: un test qui peut √©chouer al√©atoirement).\nIls nous font croire que quelque chose est cass√©.\nIls nous prennent parfois du temps √† les stabiliser.\nIl reste cependant <strong>bien meilleur de supprimer un test qui ne vous donnera pas un r√©sultat stable.</strong></li>\n<li>Faire tourner tous les tests prend un temps important sur notre int√©gration continue.\nIl faut r√©guli√®rement travailler sur leur optimisation pour que le feedback qu‚Äôils vous apportent soit le plus rapide possible.\nCes temps importants coutent √©galement de l‚Äôargent, il faut en effet bien faire tourner ces tests sur des machines.\nPour information, l‚Äôinfrastructure du site web (√† lui seul, juste l‚Äôh√©bergement de nos servers Node + fichiers statiques + CDN) coutent bien moins cher que notre int√©gration continue.\nCela fait bien √©videmment sourire nos Ops ! üòä</li>\n<li>Les nouvelles recrues de nos √©quipes n‚Äôont souvent jamais r√©alis√© ce genre de tests, il y a donc une phase <del>de gal√®re</del> d‚Äôapprentissage..</li>\n<li>Certaines fonctionnalit√©s sont parfois trop compliqu√©es √† tester avec notre stack E2E (par exemple, les parcours de paiement qui d√©pendent de tiers).\nIl nous arrive alors de nous rabattre sur d‚Äôautres techniques avec Jest notamment en ayant un scope moins unitaire.</li>\n</ul>\n<h3 id=\"nos-tests-unitaires\" style=\"position:relative;\"><a href=\"#nos-tests-unitaires\" aria-label=\"nos tests unitaires permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos tests ‚Äúunitaires‚Äù</h3>\n<p>Pour compl√©ter nos tests fonctionnels nous avons √©galement une stack de tests √©crits avec <a href=\"https://jestjs.io/fr/\">Jest</a>.\nOn qualifie ces tests d‚Äôunitaires car nous avons comme principe d‚Äôessayer de toujours tester nos modules JS en ind√©pendance des autres.</p>\n<p><em>Ne d√©battons pas ici sur ‚ÄúEst-ce que ce sont des vrais tests unitaires ?‚Äù, suffisamment d‚Äôarticles sur internet traitent de ce sujet.</em></p>\n<p>On utilise ces tests pour diff√©rentes raisons qui couvrent des besoins que nos tests fonctionnels ne couvrent pas:</p>\n<ul>\n<li>nous aider √† d√©velopper nos modules JS avec des pratiques TDD.</li>\n<li>documenter et d√©crire comment fonctionne un module JS.</li>\n<li>tester des cas limites tr√®s/trop compliqu√©s √† tester avec nos tests E2E.</li>\n<li>faciliter le refactoring de notre application en nous montrant les impacts techniques de nos modifications.</li>\n</ul>\n<p>Avec ces tests, on se met au niveau d‚Äôune fonction utilitaire, d‚Äôune action Redux, d‚Äôun reducer, d‚Äôun composant React.\nOn se base essentiellement sur <a href=\"https://slashgear.github.io/discover-jest-hidden-feature-automock/\">la fonctionnalit√© d‚Äô<code class=\"language-text\">automock</code> de Jest</a> qui nous propose d‚Äôisoler nos modules JS lorsqu‚Äôon teste.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/f13a9/mocked-modules.avif 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/af71e/mocked-modules.avif 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/c9875/mocked-modules.avif 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/07e28/mocked-modules.avif 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/2babf/mocked-modules.avif 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/f696c/mocked-modules.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg\"\n            alt=\"repr√©sentation visuelle de l&#39;automock\"\n            title=\"repr√©sentation visuelle de l&#39;automock\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>L‚Äôimage pr√©c√©dente repr√©sente la m√©taphore qui nous permet d‚Äôexpliquer notre strat√©gie de tests unitaires aux nouveaux arrivant.</p>\n<blockquote>\n<p>‚ÄúIl faut s‚Äôimaginer que l‚Äôapplication est un mur compos√© de briques unitaires (nos modules ecmascript), nos tests unitaires doivent tester une √† une les briques en ind√©pendance totale des autres.\nNos tests fonctionnels sont l√† pour tester le ciment entre les briques.‚Äù</p>\n</blockquote>\n<p><strong>Pour r√©sumer, on pourrait dire que nos tests E2E testent <em>ce que notre application doit faire</em>, et nos tests unitaires s‚Äôassurent eux de v√©rifier <em>comment √ßa marche.</em></strong></p>\n<p>Aujourd‚Äôhui ce sont plus de 6000 tests unitaires qui couvrent l‚Äôapplication et permettent de limiter les r√©gressions.</p>\n<p>üëç</p>\n<ul>\n<li><a href=\"https://jestjs.io/fr/\">Jest</a> est vraiment une librairie g√©niale, rapide, compl√®te, bien document√©e.</li>\n<li>Les tests unitaires nous aident beaucoup √† comprendre <em>plusieurs ann√©es apr√®s</em> comment tout cela fonctionne.</li>\n<li>On arrive toujours √† tester unitairement notre code, et cela compl√®te bien nos tests E2E.</li>\n<li>L‚Äô<code class=\"language-text\">automock</code> est vraiment pratique pour le d√©coupage de tests par modules.</li>\n</ul>\n<p>üëé</p>\n<ul>\n<li>Parfois, nous nous sommes trouv√©s limit√©s par notre stack de tests E2E et nous ne pouvions pas uniquement nous baser sur les tests unitaires.\nIl nous manquait quelque chose pour pouvoir s‚Äôassurer que le <em>ciment entre les briques</em> fonctionnait comme on le souhaitait.\nPour cela, il a √©t√© mis en place une deuxi√®me stack de tests <a href=\"https://jestjs.io/fr/\">Jest</a> nomm√© ‚Äútest d‚Äôint√©gration‚Äù ou l‚Äô<code class=\"language-text\">automock</code> est d√©sactiv√©.</li>\n<li>L‚Äôabus de <a href=\"https://jestjs.io/docs/snapshot-testing\"><em>Snapshot</em></a> est dangereux pour la sant√©.\nL‚Äôusage du <em>‚ÄúSnapshot testing‚Äù</em> peut faire gagner du temps sur l‚Äôimpl√©mentation de vos tests mais peuvent en r√©duire la qualit√©.\nAvoir √† review un object de 50 lignes en <em>Snapshot</em> est ni facile, ni pertinent.</li>\n<li>Avec la d√©pr√©ciation d‚Äô<a href=\"https://enzymejs.github.io/enzyme/\">EnzymeJS</a>, nous sommes contraints de migrer sur <a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a>.\nIl est bien √©videmment possible de tester unitairement des composants avec cette nouvelle librairie.\nMalheureusement, ce n‚Äôest pas vraiment l‚Äôesprit et la fa√ßon de faire.\n<a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a> nous pousse <a href=\"https://kentcdodds.com/blog/why-i-never-use-shallow-rendering\">√† ne pas jouer avec le <em>shallow rendering</em></a>.</li>\n</ul>\n<h3 id=\"nos-principes\" style=\"position:relative;\"><a href=\"#nos-principes\" aria-label=\"nos principes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos principes</h3>\n<p>Nous essayons de toujours respecter les r√®gles suivantes lorsqu‚Äôon se pose la question ‚ÄúDois-je ajouter des tests ?‚Äú.</p>\n<ol>\n<li>Si notre <em>Pull Request</em> introduit des nouvelles fonctionnalit√©s utilisateurs, il faut int√©grer des scenarios de test E2E.\nDes tests unitaires avec Jest peuvent les compl√©ter / remplacer en fonction.</li>\n<li>Si notre <em>Pull Request</em> a pour but de corriger un bug, cela signifie qu‚Äôil nous manque un cas de test.\nOn doit donc essayer de rajouter un test E2E ou √† d√©faut un test unitaire.</li>\n</ol>\n<p><em>C‚Äôest en √©crivant ces lignes que je me dis que ces principes pourraient tr√®s bien faire l‚Äôobjet d‚Äôune automatisation.</em> ü§£</p>\n<h2 id=\"le-projet-reste-les-fonctionnalit√©s-non\" style=\"position:relative;\"><a href=\"#le-projet-reste-les-fonctionnalit%C3%A9s-non\" aria-label=\"le projet reste les fonctionnalit√©s non permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le projet reste, les fonctionnalit√©s non</h2>\n<blockquote>\n<p>‚ÄúLa seconde √©volution d‚Äôune fonctionnalit√© est tr√®s souvent sa suppression.‚Äù</p>\n</blockquote>\n<p>Par principe, nous souhaitons faire en sorte que chaque nouvelle fonctionnalit√© de l‚Äôapplication ne base pas son activation sur le simple fait d‚Äô√™tre dans la codebase.\nClassiquement, le cycle de vie d‚Äôune ‚Äúfeature‚Äù dans un projet peut √™tre le suivant (dans un <a href=\"https://guides.github.com/introduction/flow/\">Github Flow</a>):</p>\n<ul>\n<li>une personne impl√©mente sur une branche</li>\n<li>la fonctionnalit√© est <em>merg√©e</em> sur master</li>\n<li>elle est d√©ploy√©e en production</li>\n<li>vis sa vie de fonctionnalit√© (avec parfois des bugs et des correctifs)</li>\n<li>la fonctionnalit√© n‚Äôest plus n√©cessaire</li>\n<li>une personne d√©tricote le code et l‚Äôenl√®ve</li>\n<li>nouveau d√©ploiement</li>\n</ul>\n<p>Pour simplifier certaines √©tapes, il a √©t√© mis en place du <em>feature flipping</em> sur le projet.</p>\n<p><strong>Comment √ßa marche ?</strong></p>\n<p>Dans notre config il y a une <em>map</em> cl√©/valeur qui liste toutes les fonctionnalit√©s de l‚Äôapplication associ√©es √† leur statut d‚Äôactivation.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  anotherOne<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dans notre code, nous avons donc impl√©ment√© des traitements conditionnels qui disent ‚ÄúSi cette feature est activ√©e alors‚Ä¶‚Äú.\nCela peut changer le rendu d‚Äôun composant, changer l‚Äôimpl√©mentation d‚Äôune action Redux ou bien d√©sactiver une route de notre <em>react-router</em>.</p>\n<p><strong>Mais √† quoi √ßa sert ?</strong></p>\n<ul>\n<li>On peut d√©velopper des nouvelles √©volutions progressivement en les cachant derri√®re une cl√© de configuration.\nOn livre des fonctionnalit√©s en production sans les activer.</li>\n<li>En environnement de test, on peut surcharger cette config pour tester des features qui ne sont pas encore activ√©es en production.</li>\n<li>Dans le cas d‚Äôun site en marque blanche, on peut proposer ces fonctionnalit√©s √† nos clients comme des options possibles.</li>\n<li>Avant de supprimer le code d‚Äôune feature, on la d√©sactive puis on fait le m√©nage sans risque.</li>\n<li>Gr√¢ce √† un outil maison nomm√© l‚Äô<em>Applaunch</em>, cette config de feature flipping est surchargeable dans une interface graphique √† chaud sans d√©ploiement.\nCela nous permet d‚Äôactiver des fonctionnalit√©s sans faire de mise en production du code.\nEn cas d‚Äôincident, on peut d√©sactiver des fonctionnalit√©s qui sont d√©grad√©es.</li>\n</ul>\n<p>Pour vous donner un exemple plus concret, entre 2018 et 2020 nous avons compl√®tement refondu l‚Äôinterface de l‚Äôapplication.\nCette √©volution graphique n‚Äô√©tait qu‚Äôune cl√© de featureFlipping.\nLa refonte graphique n‚Äôa donc pas √©t√© la remise √† z√©ro du projet, on continue encore aujourd‚Äôhui de vivre avec les deux versions (tant que la bascule de tous nos clients n‚Äôest pas termin√©e).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/f13a9/compare-v4-v5.avif 200w,\n/static/1148bec58444fa4ccea56315b956b236/af71e/compare-v4-v5.avif 400w,\n/static/1148bec58444fa4ccea56315b956b236/c9875/compare-v4-v5.avif 800w,\n/static/1148bec58444fa4ccea56315b956b236/07e28/compare-v4-v5.avif 1200w,\n/static/1148bec58444fa4ccea56315b956b236/2babf/compare-v4-v5.avif 1600w,\n/static/1148bec58444fa4ccea56315b956b236/f696c/compare-v4-v5.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,\n/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,\n/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,\n/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,\n/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,\n/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,\n/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,\n/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,\n/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,\n/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,\n/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg\"\n            alt=\"screenshot comparatif v4 / v5 sur 6play\"\n            title=\"screenshot comparatif v4 / v5 sur 6play\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"lab-testing\" style=\"position:relative;\"><a href=\"#lab-testing\" aria-label=\"lab testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>L‚ÄôA/B testing</h3>\n<p>Gr√¢ce au super travail des √©quipes backend et data, on a pu m√™me √©tendre l‚Äôusage du <em>feature flipping</em> en rendant cette configuration modifiable pour des sous groupes d‚Äôutilisateurs.</p>\n<p>Cela permet de d√©ployer des nouvelles fonctionnalit√©s sur une portion plus r√©duite des utilisateurs afin de comparer nos <a href=\"https://www.journaldunet.fr/business/dictionnaire-du-marketing/1198189-kpi-key-performance-indicator-marketing-definition-exemples-okr/\">KPI</a>.</p>\n<p>Prise de d√©cision, am√©lioration des performances techniques ou produit, exp√©rimentations, les possibilit√©s sont nombreuses et nous les exploitons de plus en plus.</p>\n<h3 id=\"le-futur-flipping\" style=\"position:relative;\"><a href=\"#le-futur-flipping\" aria-label=\"le futur flipping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le <em>futur flipping</em></h3>\n<blockquote>\n<p>Sur une id√©e originale de <a href=\"https://twitter.com/SuperFlaw\">Florent Lepretre</a>.</p>\n</blockquote>\n<p>Nous avions r√©guli√®rement le besoin d‚Äôactiver des feature √† des heures <del>tr√®s</del> trop matinales dans le futur.\nPour cela nous devions √™tre connect√© √† une heure pr√©cise sur notre poste pour modifier la configuration √† chaud.</p>\n<p>Afin d‚Äô√©viter d‚Äôoublier de le faire, ou de le faire en retard, nous avons fait en sorte qu‚Äôune cl√© de configuration puisse √™tre activ√©e √† partir d‚Äôune certaine date.\nPour cela, nous avons fait √©voluer notre <em>selector redux</em> qui indiquait si une feature √©tait activ√©e pour qu‚Äôil puisse g√©rer des formats de date et les comparer √† l‚Äôheure courante.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    offDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 20:30:00'</span><span class=\"token punctuation\">,</span>\n    onDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 19:30:00'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>De nombreux caf√©s ‚òïÔ∏è √† 9h ont √©t√© sauv√©s gr√¢ce au <em>futur flipping</em></p>\n</blockquote>\n<h2 id=\"monitorer-mesurer-alerter\" style=\"position:relative;\"><a href=\"#monitorer-mesurer-alerter\" aria-label=\"monitorer mesurer alerter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitorer, Mesurer, Alerter</h2>\n<p>Pour maintenir un projet aussi longtemps que l‚Äôapplication web de bedrock, des tests, de la documentation et de la rigueur ne suffisent pas.\nIl faut √©galement de la visibilit√© sur ce qui marche en production.</p>\n<blockquote>\n<p>‚ÄúComment sais-tu que l‚Äôapplication que tu as en production en ce moment m√™me fonctionne comme pr√©vu ?‚Äù</p>\n</blockquote>\n<p>On part du principe qu‚Äôaucune fonctionnalit√© ne marche tant qu‚Äôelle n‚Äôest pas monitor√©e.\nAujourd‚Äôhui le monitoring √† Bedrock cot√© Frontend se mat√©rialise par diff√©rents outils et diff√©rentes stacks.\nJe pourrais vous citer <a href=\"https://newrelic.com/\">NewRelic</a>, un <a href=\"https://github.com/statsd/statsd\">Statsd</a>, une stack <a href=\"https://www.elastic.co/fr/what-is/elk-stack\">ELK</a> ou bien encore <a href=\"https://youbora.nicepeopleatwork.com/\">Youbora</a> pour la vid√©o.</p>\n<p>Pour vous donner un exemple, √† chaque fois qu‚Äôun utilisateur commence une session de navigation on envoie un <em>Hit</em> de monitoring anonyme pour incr√©menter un compteur dans Statsd.\nOn a alors plus qu‚Äô√† d√©finir un dashboard qui affiche dans un graphique l‚Äô√©volution de ce nombre.\nSi on observe une variation trop importante, cela peut nous permettre de d√©tecter un incident.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/f13a9/grafana-monitoring-example.avif 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/af71e/grafana-monitoring-example.avif 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/c9875/grafana-monitoring-example.avif 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/07e28/grafana-monitoring-example.avif 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/2babf/grafana-monitoring-example.avif 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/8d64d/grafana-monitoring-example.avif 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png\"\n            alt=\"exemple de dashboard de suivi\"\n            title=\"exemple de dashboard de suivi\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Le monitoring nous offre aussi des solutions pour comprendre et analyser un bug qui s‚Äôest produit dans le pass√©.\nComprendre un incident, l‚Äôexpliquer, en trouver sa <em>root cause</em> sont les possibilit√©s qui s‚Äôoffrent √† vous si vous monitorez votre application.\nLe monitoring peut √©galement permettre de mieux communiquer avec les clients sur les impacts d‚Äôun incident et √©galement d‚Äôestimer le nombre d‚Äôutilisateurs impact√©s.</p>\n<p>Avec la multiplication de nos clients, bien monitorer nos plateformes n‚Äôest plus suffisant.\nTrop de donn√©es, trop de dashboards √† surveiller, il devient tr√®s facile de louper quelque chose.\nNous avons donc commenc√© √† compl√©ter notre suivi des mesures par de l‚Äô<em>alerting</em> automatique.\nUne fois que les mesures nous apportent suffisamment de confiance, on peut facilement mettre en place des alertes qui vont nous pr√©venir en cas de valeur incoh√©rente.</p>\n<p>Nous essayons cependant de toujours d√©clencher des alertes uniquement quand celle-ci est actionnable.\nDans d‚Äôautres termes, si une alerte sonne, nous avons quelque chose √† faire.\nFaire sonner des alertes qui ne n√©cessitent aucune action imm√©diate humaine g√©n√®rent du bruit et de la perte de temps.</p>\n<p><img src=\"/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif\" alt=\"alerte g√©n√©rale\"></p>\n<h2 id=\"limiter-surveiller-et-mettre-√†-jour-ses-d√©pendances\" style=\"position:relative;\"><a href=\"#limiter-surveiller-et-mettre-%C3%A0-jour-ses-d%C3%A9pendances\" aria-label=\"limiter surveiller et mettre √† jour ses d√©pendances permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limiter, surveiller et mettre √† jour ses d√©pendances</h2>\n<p>Ce qui p√©rime plus vite que votre ombre dans un projet web bas√© sur des technologies javascript, ce sont vos d√©pendances.\nL‚Äô√©cosyst√®me √©volue rapidement et vos d√©pendances peuvent vite se retrouver non maintenues, plus √† la mode ou bien compl√®tement refondues avec de gros <em>breaking changes</em>.</p>\n<p>On essaye donc dans la mesure du possible de limiter nos d√©pendances et d‚Äô√©viter d‚Äôen ajouter inutilement.\nUne d√©pendance, c‚Äôest souvent tr√®s facile √† ajouter mais elle peut devenir un vrai casse-t√™te √† enlever.</p>\n<p>Les librairies de composants graphiques (exemple React bootstrap, Material Design) sont un bel exemple de d√©pendance que nous tenons √† ne pas introduire.\nElles peuvent faciliter l‚Äôint√©gration dans un premier temps mais celles-ci bloquent souvent la version de votre librairie de composant par la suite.\nVous ne voulez pas figer la version de React dans votre application pour deux composants de formulaires.</p>\n<p>La surveillance fait aussi partie de nos routines de gestion de nos d√©pendances.\nDepuis l‚Äôajout du <a href=\"https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities\">signalement de failles de s√©curit√© dans un package NPM</a>, il est possible de savoir si un projet int√®gre une d√©pendance qui contient une faille de s√©curit√© connue par une simple commande.\nNous avons donc des jobs journaliers sur nos projets qui lancent la commande <code class=\"language-text\">yarn audit</code> afin de nous forcer √† appliquer les correctifs.</p>\n<blockquote>\n<p>La maintenance de d√©pendances est grandement facilit√© par notre stack de tests E2E qui sonnent direcement si la mont√©e de version g√©n√®re une regression.</p>\n</blockquote>\n<p>Aujourd‚Äôhui, hors failles de s√©curit√©, nous mettons √† jour nos d√©pendances ‚Äúquand on a le temps‚Äù, souvent en fin de <em>sprint</em>.\nCela ne nous satisfait pas car certaines d√©pendances peuvent se retrouver oubli√©es.\nJ‚Äôai personnellement l‚Äôhabitude d‚Äôutiliser des outils comme <a href=\"https://classic.yarnpkg.com/en/docs/cli/outdated/\"><code class=\"language-text\">yarn outdated</code></a> et <a href=\"https://dependabot.com/\">Dependabot</a> sur mes projets personels pour automatiser la mise √† jour de mes d√©pendances.</p>\n<h2 id=\"accepter-sa-dette-technique\" style=\"position:relative;\"><a href=\"#accepter-sa-dette-technique\" aria-label=\"accepter sa dette technique permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accepter sa dette technique</h2>\n<p>Un projet accumulera toujours de la dette technique.\n<strong>C‚Äôest un fait.</strong>\nQue ce soit de la dette volontaire ou involontaire, un projet qui r√©siste aux ann√©es va forc√©ment accumuler de la dette.\nD‚Äôautant plus, si pendant toutes ces ann√©es vous continuez d‚Äôajouter des fonctionnalit√©s.</p>\n<p>Depuis 2014, nos bonnes pratiques, nos fa√ßons de faire ont bien √©volu√©.\nParfois nous avons d√©cid√© ces changements mais parfois nous les avons subi (un exemple, l‚Äôarriv√©e des composants fonctionnels avec React et l‚Äôapi des Hooks).</p>\n<p><strong>Notre projet n‚Äôest pas compl√®tement <em>‚Äústate of art‚Äù</em> et on l‚Äôassume.</strong></p>\n<p><img src=\"/c80d0cd308b5657d54f976a32fe2c811/leak.gif\" alt=\"√ßa tiendra !\"></p>\n<p>Nous essayons de prioriser nos sujets de <em>refactoring</em> sur les parties de l‚Äôapplication sur lequel on a le plus de souci, le plus de peine.\nOn consid√®re qu‚Äôune partie de l‚Äôapplication qui ne nous pla√Æt pas mais sur laquelle on n‚Äôa pas besoin de travailler (apporter des √©volutions) ne m√©rite pas qu‚Äôon la refactorise.</p>\n<p>Je pourrais vous citer de nombreuses fonctionnalit√©s de notre application qui n‚Äôont pas √©volu√© fonctionnellement depuis plusieurs ann√©es.\nMais comme nous avons couvert ces fonctionnalit√©s de tests E2E depuis le d√©but, nous n‚Äôavons pas vraiment eu √† y retoucher.</p>\n<p>Comme dit plus haut, la prochaine √©volution d‚Äôune feature de code est parfois sa d√©sactivation.\nAlors pourquoi passer son temps √† r√©-√©crire toute l‚Äôapplication ?</p>\n<ul>\n<li>Le code devient dans tous les cas du ‚Äúlegacy‚Äù.</li>\n<li>Tant que les fonctionnalit√©s sont test√©es, rien ne nous oblige √† tout refactorer en permanence pour que toute notre codebase soit <em>state of art</em>.</li>\n<li>On se focalise sur nos <em>pain points</em>, on re-factorise ce qu‚Äôon a vraiment besoin de faire √©voluer.</li>\n</ul>\n<h2 id=\"pour-r√©sumer\" style=\"position:relative;\"><a href=\"#pour-r%C3%A9sumer\" aria-label=\"pour r√©sumer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pour r√©sumer</h2>\n<p>Les bonnes pratiques pr√©sent√©es ici restent bien √©videmment subjectives et ne s‚Äôappliqueront pas parfaitement/directement dans vos contextes.\nJe suis cependant convaincu qu‚Äôelles peuvent probablement vous aider √† identifier ce qui peut faire passer votre projet de fun √† p√©rim√©.\n√Ä Bedrock nous avons mis en place d‚Äôautres pratiques que je n‚Äôai pas list√©es ici mais ce sera l‚Äôoccasion de faire un nouvel article un jour.</p>\n<p>Enfin, si vous souhaitez que je revienne plus en d√©tail sur certains chapitres pr√©sent√©s ici, n‚Äôh√©sitez pas √† me le dire, je pourrais essayer d‚Äôy d√©dier un article sp√©cifique.</p>","image":["https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/6edcc/bedrock.jpg","https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/e14ae/bedrock.jpg","https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/db124/bedrock.jpg"],"keywords":["web","javascript","bedrock"],"author":{"@type":"Person","name":"Antoine Caron"},"publisher":{"@type":"Organization","name":"Antoine Caron","logo":{"@type":"ImageObject","url":"https://slashgear.github.io/static/picture_of_me-cb64a6913d2e31dbb5dab1f4d113d077.jpg"}}}</script><div class="editOnGithubcomponent__Wrapper-sc-zzrn7j-0 vwLCS"><a href="https://github.com/Slashgear/slashgear.github.io/edit/source/src/pages/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/index.md" target="_blank">Edit this page on Github</a></div><hr style="margin-bottom:1.75rem"/><div id="bio" class="biocomponent__Wrapper-sc-1oo1jyu-0 iGlUyE"><div class="biocomponent__Image-sc-1oo1jyu-1 jfWtSW gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:150px;height:150px;margin:0 1.2rem 0 0"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMFAf/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAG3IRvHRVI4AjTXCH//xAAcEAACAwADAQAAAAAAAAAAAAABAwACEQQSEyH/2gAIAQEAAQUC6wYZku3yCW1pAY761gycU6n/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAwEBPwFRMpn/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIQEv/aAAgBAgEBPwFzNUj/xAAdEAABAgcAAAAAAAAAAAAAAAAAASECEBExUWFx/9oACAEBAAY/AhpUV9GCxF0QQ//EABwQAAICAgMAAAAAAAAAAAAAAAABESEQYUFRsf/aAAgBAQABPyFCLOFTLjQbQ1B6JVPsazoJp6GSuKP/2gAMAwEAAgADAAAAEGQPAv/EABkRAAMAAwAAAAAAAAAAAAAAAAABERAxQf/aAAgBAwEBPxBMbuHDY//EABgRAAIDAAAAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EKGlLB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFxYZHw/9oACAEBAAE/EKNkyAJaeoOtRKluqcd8RmOi2rb9uUoCJYmDFbmiHgMEWoc82bH3R0M//9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/6d4845a20dbe813a1019a37775ca875f/763d7/picture_of_me.webp 1x,
/static/6d4845a20dbe813a1019a37775ca875f/13190/picture_of_me.webp 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/9a9e1/picture_of_me.webp 2x" /><source srcset="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg 1x,
/static/6d4845a20dbe813a1019a37775ca875f/b4472/picture_of_me.jpg 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/18255/picture_of_me.jpg 2x" /><img loading="lazy" width="150" height="150" srcset="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg 1x,
/static/6d4845a20dbe813a1019a37775ca875f/b4472/picture_of_me.jpg 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/18255/picture_of_me.jpg 2x" src="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div><p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille √† Lyon et d√©veloppe des choses utiles √† <a href="https://www.bedrockstreaming.com/">Bedrock</a>.
Tu devrais le suivre sur <a href="https://twitter.com/Slashgear_">Twitter</a>.
N‚Äôh√©sites pas √† aller voir <a href="/conferences">ses conf√©rences sur la page d√©di√©e</a>.
Si vous voulez voir mon parcours pro, <a href="/resume">mon CV est disponible ici en üá¨üáß</a>.</p></div></div><footer class="footercomponent__FooterWrapper-sc-1ogqr1t-0 dyTbaF blog-post__SocialFooter-sc-hrojot-2 golnhM"><div><a href="https://github.com/Slashgear">Github</a> ‚Ä¢ <a href="https://twitter.com/Slashgear_">Twitter</a> ‚Ä¢ <a href="https://www.linkedin.com/in/antoine-caron-7089788a">LinkedIn</a> ‚Ä¢ <a href="https://dev.to/slashgear_">DevTo</a> ‚Ä¢ <a href="https://medium.com/@Slashgear_">Medium</a> ‚Ä¢ <a href="https://hackernoon.com/u/antoinecaron">HackerNoon</a></div><div><a href="/rss.xml">RSS</a></div></footer><a id="foundation" class="foundationcomponent__StyledLink-sc-hocuye-3 kEhtux" href="/fr/abbe-pierre"><div class="foundationcomponent__TextWrapper-sc-hocuye-1 bXruOx">Si vous aimez le contenu de ce blog, ou bien qu&#x27;il vous a aid√©, s&#x27;il vous plait, consid√©rez donner √† la fondation Abb√© Pierre que je soutiens personnellement.<br/><blockquote class="foundationcomponent__Blocquote-sc-hocuye-2 ktFGxy">‚ÄúOn n‚Äôest jamais heureux que dans le bonheur qu‚Äôon donne. Donner, c‚Äôest recevoir.‚Äù</blockquote></div><div class="foundationcomponent__Logo-sc-hocuye-0 kZCWtO gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:151px;height:150px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAECAwQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAMBBP/aAAwDAQACEAMQAAAB6dY2l0+esnashAb/AP/EABoQAAIDAQEAAAAAAAAAAAAAAAIRAAEDECL/2gAIAQEAAQUCzEbs8hrmJKaH4JON8//EABYRAQEBAAAAAAAAAAAAAAAAAAESIP/aAAgBAwEBPwFWsf/EABYRAQEBAAAAAAAAAAAAAAAAABEBIP/aAAgBAgEBPwGBj//EAB4QAAEDBAMAAAAAAAAAAAAAAAEAAhEQEiAhIjFB/9oACAEBAAY/AuSNp68odS5EOEOWsP/EABoQAQEBAAMBAAAAAAAAAAAAAAERABAxQSH/2gAIAQEAAT8hZ1DEJL2XBQKOshYB8nup4GFGjHK7K8f/2gAMAwEAAgADAAAAEPQ4wv/EABoRAAICAwAAAAAAAAAAAAAAAAABECERgfD/2gAIAQMBAT8Qq12hWjEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAASAx/9oACAECAQE/EAqn/8QAHBABAAICAwEAAAAAAAAAAAAAAREhADEQUWHR/9oACAEBAAE/EKk0IJhVyIm5BNecB1Jj38yvtWwtcOJKaQPa3hpQaRhyKrCCWYOP/9k=" alt="logo de la fondation abb√© pierre" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/907eb9bd5732972738e42845f14772cc/7307a/abbe_pierre.webp 1x,
/static/907eb9bd5732972738e42845f14772cc/305a6/abbe_pierre.webp 1.5x,
/static/907eb9bd5732972738e42845f14772cc/75eb0/abbe_pierre.webp 2x" /><source srcset="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg 1x,
/static/907eb9bd5732972738e42845f14772cc/20600/abbe_pierre.jpg 1.5x,
/static/907eb9bd5732972738e42845f14772cc/e48d1/abbe_pierre.jpg 2x" /><img loading="lazy" width="151" height="150" srcset="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg 1x,
/static/907eb9bd5732972738e42845f14772cc/20600/abbe_pierre.jpg 1.5x,
/static/907eb9bd5732972738e42845f14772cc/e48d1/abbe_pierre.jpg 2x" src="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg" alt="logo de la fondation abb√© pierre" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><aside><header><h2>Related posts:</h2></header><div data-testid="related-post" class="blog-post__RelatedPost-sc-hrojot-1 dRHucu"><h3 style="margin-bottom:0.4375rem"><a style="box-shadow:none" href="/fr/react-redux-pieges-bonnes-pratiques/">React/Redux : pi√®ges et meilleures pratiques</a></h3><small><time dateTime="2021-03-23">March 23, 2021</time></small><small style="margin:0 1rem"><span role="img" aria-label="Time to read">üïê</span>13<!-- --> min</small><small><a style="margin-right:0.5rem" href="/fr/react">#<!-- -->react</a><a style="margin-right:0.5rem" href="/fr/redux">#<!-- -->redux</a><a style="margin-right:0.5rem" href="/fr/web">#<!-- -->web</a></small><p>Apr√®s 2 ans d‚Äôutilisation de React avec Redux pour la plateforme vid√©o 6play, j‚Äôai pu identifier les bonnes pratiques et les pi√®ges √† √©viter‚Ä¶</p></div></aside></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-77930802-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-77930802-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0dfc0587dc8dac5c5bc5.js"],"app":["/app-38a7b70e9f1d2bfeafe0.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-bc7d028465e33e12b2ad.js"],"component---src-pages-404-js":["/component---src-pages-404-js-ff263d1ab8d3225534ed.js"],"component---src-pages-abbe-pierre-js":["/component---src-pages-abbe-pierre-js-98c785ab602bb9f5d65c.js"],"component---src-pages-conferences-js":["/component---src-pages-conferences-js-20fa8540d54b1f4efe3a.js"],"component---src-pages-fr-abbe-pierre-js":["/component---src-pages-fr-abbe-pierre-js-8141b3bd8c5051a4f322.js"],"component---src-pages-friends-you-should-follow-js":["/component---src-pages-friends-you-should-follow-js-a9f8fcd55eda27521a56.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-c4b1d3e9a0d61370f8b9.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-589f99041fc0cef9e9dd.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-a96a47ad9e5a68cf2735.js"],"component---src-templates-tag-list-js":["/component---src-templates-tag-list-js-31effd14651ea0827f70.js"]};/*]]>*/</script><script src="/polyfill-0dfc0587dc8dac5c5bc5.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-a96a47ad9e5a68cf2735.js" async=""></script><script src="/079251e69bb3615baf60b97640b02e16a0d9c5f7-28543bd4f90992a84c43.js" async=""></script><script src="/9f1f62790889034df7ac6a396fc580c0128782a4-2f71093bc28a441b8052.js" async=""></script><script src="/743791b12bf7cb00b427fac0e2749395f37c471f-65ad4b111e5d372d98e6.js" async=""></script><script src="/6cc983252ef082d05857c6f27e42306283885478-e3480eaaa6cc148209d4.js" async=""></script><script src="/app-38a7b70e9f1d2bfeafe0.js" async=""></script><script src="/framework-af7bfe51d22328080f87.js" async=""></script><script src="/webpack-runtime-1d737514584b4a075cb7.js" async=""></script></body></html>