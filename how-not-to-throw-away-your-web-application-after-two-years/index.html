<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;color:var(--header);}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><style data-href="/styles.3ded6d74481102e19f97.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}body{--bg-transition:background-color 0.5s ease;background-color:var(--bg);transition:var(--bg-transition)}body.light-mode{--bg:#fff;--bg-secondary:#f9fafb;--header:#7e40c4;--textNormal:#222;--textTitle:#222;--textLink:#7e40c4;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;--form-shadow:0 2px 15px 0 rgba(210,214,220,0.5)}body.dark-mode{-webkit-font-smoothing:antialiased;--bg:#282c35;--bg-secondary:#363c48;--header:#b675ff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:#b675ff;--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:rgba(115,124,153,0.2);--inlineCode-text:#e6e6e6;--form-shadow:0 2px 15px 0 rgba(26,26,27,0.637)}@media print{body.dark-mode{--bg:#fff;--bg-secondary:#f9fafb;--header:#7e40c4;--textNormal:#222;--textTitle:#222;--textLink:#7e40c4;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;--form-shadow:0 2px 15px 0 rgba(210,214,220,0.5)}}.react-toggle{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;background-color:transparent;border:0;cursor:pointer;display:inline-block;height:24px;padding:0;position:relative;touch-action:pan-x;-webkit-user-select:none;-ms-user-select:none;user-select:none}.react-toggle-screenreader-only{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{background-color:#0f1114;border-radius:30px;height:24px;padding:0;transition:all .2s ease;width:50px}.react-toggle-track-check{bottom:0;height:17px;left:5px;line-height:0;margin-bottom:auto;margin-top:auto;opacity:0;position:absolute;top:0;transition:opacity .25s ease;width:17px}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{bottom:0;height:17px;line-height:0;margin-bottom:auto;margin-top:auto;position:absolute;right:5px;top:0;width:17px}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{background-color:#fafafa;border-radius:50%;box-sizing:border-box;height:22px;left:1px;position:absolute;top:1px;-webkit-transform:translateX(0);transform:translateX(0);transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;width:22px}.react-toggle--checked .react-toggle-thumb{border-color:#19ab27;-webkit-transform:translateX(26px);transform:translateX(26px)}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #7e40c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #7e40c4}</style><meta name="generator" content="Gatsby 3.13.0"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=6d4845a20dbe813a1019a37775ca875f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="darkgrey"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=6d4845a20dbe813a1019a37775ca875f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=6d4845a20dbe813a1019a37775ca875f"/><title data-react-helmet="true">Best practices for Web application maintenance | Antoine Caron</title><link data-react-helmet="true" rel="alternate" hreflang="fr" href="/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans"/><link data-react-helmet="true" rel="alternate" hreflang="en" href="/how-not-to-throw-away-your-web-application-after-two-years/"/><meta data-react-helmet="true" property="og:locale:alternate" content="fr_FR"/><meta data-react-helmet="true" property="og:site_name" content="Antoine Caron"/><meta data-react-helmet="true" name="description" content="How not to throw away your project after 2 years? Feedback based on best practices applied to the web platform developed at Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:url" content="https://slashgear.github.io/how-not-to-throw-away-your-web-application-after-two-years/"/><meta data-react-helmet="true" property="og:title" content="Best practices for Web application maintenance"/><meta data-react-helmet="true" property="og:description" content="How not to throw away your project after 2 years? Feedback based on best practices applied to the web platform developed at Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:locale" content="en_US"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Slashgear_"/><meta data-react-helmet="true" name="twitter:title" content="Best practices for Web application maintenance"/><meta data-react-helmet="true" name="twitter:description" content="How not to throw away your project after 2 years? Feedback based on best practices applied to the web platform developed at Bedrock Streaming. web, javascript, bedrock"/><meta data-react-helmet="true" property="og:image" content="https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"/><meta data-react-helmet="true" property="og:image:alt" content="Best practices for Web application maintenance"/><meta data-react-helmet="true" property="og:image:width" content="1080"/><meta data-react-helmet="true" property="og:image:type" content="image/jpeg"/><meta data-react-helmet="true" property="article:author" content="Antoine Caron"/><meta data-react-helmet="true" property="article:section" content="Frontend Tech"/><meta data-react-helmet="true" property="article:tag" content="web"/><meta data-react-helmet="true" property="article:tag" content="javascript"/><meta data-react-helmet="true" property="article:tag" content="bedrock"/><meta data-react-helmet="true" property="article:published_time" content="2021-09-05"/><meta data-react-helmet="true" name="keywords" content="web,javascript,bedrock"/><meta data-react-helmet="true" name="google-site-verification" content="h1uQ_z8fdlLI60AmxP8vjy1H-bKSDlv0n5XolWfeDIo"/><meta data-react-helmet="true" property="fb:app_id" content="235346886871248"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style data-styled="" data-styled-version="5.3.1">.iGlUyE{margin-bottom:2.5rem;}/*!sc*/
.iGlUyE * > div{margin-left:0.5rem;}/*!sc*/
data-styled.g6[id="biocomponent__Wrapper-sc-1oo1jyu-0"]{content:"iGlUyE,"}/*!sc*/
.jfWtSW{float:left;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}/*!sc*/
data-styled.g7[id="biocomponent__Image-sc-1oo1jyu-1"]{content:"jfWtSW,"}/*!sc*/
.ijFmkR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
data-styled.g8[id="layoutcomponent__Wrapper-sc-kmaazn-0"]{content:"ijFmkR,"}/*!sc*/
.bHLACg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}/*!sc*/
data-styled.g10[id="fundationcomponent__Logo-sc-pkqxf3-0"]{content:"bHLACg,"}/*!sc*/
.ccXtUA{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-right:1rem;}/*!sc*/
data-styled.g11[id="fundationcomponent__TextWrapper-sc-pkqxf3-1"]{content:"ccXtUA,"}/*!sc*/
.hVknCU{border:none;}/*!sc*/
data-styled.g12[id="fundationcomponent__Blocquote-sc-pkqxf3-2"]{content:"hVknCU,"}/*!sc*/
.ePDrnP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--textNormal);box-shadow:none;}/*!sc*/
.ePDrnP:hover .fundationcomponent__Logo-sc-pkqxf3-0,.ePDrnP:focus .fundationcomponent__Logo-sc-pkqxf3-0{-webkit-filter:drop-shadow(5px 5px 3px var(--textNormal));filter:drop-shadow(5px 5px 3px var(--textNormal));}/*!sc*/
.ePDrnP:hover .fundationcomponent__TextWrapper-sc-pkqxf3-1,.ePDrnP:focus .fundationcomponent__TextWrapper-sc-pkqxf3-1{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g13[id="fundationcomponent__Link-sc-pkqxf3-3"]{content:"ePDrnP,"}/*!sc*/
.cbXOgd{display:none;width:400px;}/*!sc*/
.cbXOgd nav{margin-left:0.5rem;overflow:auto;max-height:80vh;}/*!sc*/
.cbXOgd ul{list-style:none;}/*!sc*/
.cbXOgd li{margin-bottom:0.5rem;overflow:hidden;white-space:nowrap;,wordwrap:normal;text-overflow:ellipsis;}/*!sc*/
.cbXOgd li > ul{margin-top:0;margin-left:1rem;}/*!sc*/
.cbXOgd a{color:currentColor;box-shadow:none;}/*!sc*/
.cbXOgd a:hover{box-shadow:0 1px 0 0 currentColor;}/*!sc*/
@media screen and (min-width:1500px){.cbXOgd{display:block;position:fixed;top:7rem;right:2rem;font-size:0.8rem;}}/*!sc*/
data-styled.g14[id="tableOfContentscomponent__Aside-sc-ep791a-0"]{content:"cbXOgd,"}/*!sc*/
.cVqbCQ{margin-bottom:0.8rem;font-weight:bold;font-size:1.1rem;}/*!sc*/
data-styled.g15[id="tableOfContentscomponent__Heading-sc-ep791a-1"]{content:"cVqbCQ,"}/*!sc*/
.hkmXGu{padding:1rem;margin:2rem 0;font-weight:bold;background-color:hsla(268,53%,51%,30%);border-radius:0.75rem;border:solid hsla(268,53%,51%) 1px;}/*!sc*/
data-styled.g16[id="availableLanguagescomponent__Container-sc-zfico6-0"]{content:"hkmXGu,"}/*!sc*/
.vwLCS{margin-bottom:1rem;}/*!sc*/
data-styled.g17[id="editOnGithubcomponent__Wrapper-sc-zzrn7j-0"]{content:"vwLCS,"}/*!sc*/
.cwUnwa{margin-top:2rem;}/*!sc*/
data-styled.g18[id="blog-post__PostContent-sc-hrojot-0"]{content:"cwUnwa,"}/*!sc*/
.dRHucu{margin-left:1rem;}/*!sc*/
data-styled.g19[id="blog-post__RelatedPost-sc-hrojot-1"]{content:"dRHucu,"}/*!sc*/
</style><link rel="canonical" href="https://slashgear.github.io/how-not-to-throw-away-your-web-application-after-two-years/" data-baseprotocol="https:" data-basehost="slashgear.github.io"/><link as="script" rel="preload" href="/webpack-runtime-47d124455bcd4367b045.js"/><link as="script" rel="preload" href="/framework-af7bfe51d22328080f87.js"/><link as="script" rel="preload" href="/app-29446ea12b9052a1e534.js"/><link as="script" rel="preload" href="/90b60a54e0da56b4a5a70b026a0daf8c49da01f5-8c2eca738b0d7e3d6512.js"/><link as="script" rel="preload" href="/407648b791f0caf7f45b6dd3573fbfcb3f43f3b8-66117943a52744bd0a0a.js"/><link as="script" rel="preload" href="/0f10e620f25f6db15e9cdb25730d936ff5fc9d8b-c71d6ceaa2a3827045c8.js"/><link as="script" rel="preload" href="/0998afcbd8473179214d67a707c226f3df286a85-81cd4d48cf83aab2a9e8.js"/><link as="script" rel="preload" href="/079251e69bb3615baf60b97640b02e16a0d9c5f7-8292756883167f7e5025.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-96c8a4914bf7465648bf.js"/><link as="fetch" rel="preload" href="/page-data/how-not-to-throw-away-your-web-application-after-two-years/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1264045386.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1666466174.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2564629789.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4061151221.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/62118570.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>!function(e,a,o){function d(e){document.body.classList.add(e?"dark-mode":"light-mode"),document.body.classList.remove(e?"light-mode":"dark-mode")}var t=window.matchMedia("(prefers-color-scheme: dark)"),r="(prefers-color-scheme: dark)"===t.media,s=null;try{s=localStorage.getItem("darkMode")}catch(e){}var c=null!==s;if(c&&(s=JSON.parse(s)),c)d(s);else if(r)d(t.matches),localStorage.setItem("darkMode",t.matches);else{var l=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",JSON.stringify(l))}}();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;color:var(--textNormal);background:var(--bg);transition:var(--bg-transition);max-width:42rem;padding:2.625rem 1.3125rem"><div class="layoutcomponent__Wrapper-sc-kmaazn-0 ijFmkR"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;color:var(--header)"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Antoine Caron</a></h3><div class="react-toggle"><div class="react-toggle-track"><div class="react-toggle-track-check"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABlJJREFUWAm1V3tsFEUcntnXvXu0tBWo1ZZHihBjCEWqkHiNaMLDRKOtQSKaiCFKQtS/SbxiFCHGCIkmkBSMwZhQNTFoQZD0DFiwtCDFAkdDqBBBKFj63rvdnfH7zfVo5aFBj0l2Z/dm5vd98/0es8dYjlpr62azufnDQNZcU1PciMfjWvb9rvZSMk4Ayfb36pLH13189GC8LAtIRLLPt+pzwrCuLq4ISEv/gHmitrAwfPbEkXc/ad4dL6iujrvyX0jcitgd/yZlZqftP6995Mr5TVLa22Tn8XVX2g/XLSRjUu7Q79jonS7I7hS7/0oOb5VyqF52n98oj7esXX07EjlxwXWisRmSnm3b29TTM8iYrjmFBWExubxwY/uhNas4r/WySl1fc5cetDMd7ydl+lMJJRw5WC8ud62Xx5rfepzwxgZmbhUYNS5Stvsj4yo2GXJEFBVHWDBkfdbR9HpYBaaUajDnBLKKpl1xRKYcgGtMCqEzTaSnThk/SQT0uJqTqFNBmXMCsZE48DzRZRMBRjv1GHNdk3HBImF9ZUvTyxM40pMKVc4JZBXQOLOFoDeKSxdp6HIQcO4rjYT9fn0pjbz9GLt7BAAODmjSVReXUMFzNW5x5vfxp2mIxZjIuQKJxAmFa+is2DQJJQ0JyBVExNOYcJnPxx/6/utnijmP555ALEagKAGGnGn64QORBjARcIA/yJk7JMJBLRrNtybTvH88KGjCf2jK86bhzmMcwDKFZEQvbIhxFYhChoMWMzU2iWznlIBEVJOsP+1bdX/ALx9l7jApADeDAEcMkE90JnUmmGl4USKQ0xhoW3JB5XY0YrxYWhLwMZZypUyjDGH35AbNwgUGiFBPpuGbHCpAOV1ZGXf2f/taftAv31DyeymN2d1IhAFAwTOmnzF/kKcdh3me7CYCOVNgycju84u8DeVlwfFq9/ZlTfldYrMUjOlrkjkD+rU+WzCROkcEchIDHR011syZW9JHD7y07N6JvhWMpz3pugaTkB6lWFVCKkhck0zzeMp2utq+uHrmfxOgoCO/Z8CXPlEQ1bdH8wgvhSIkEG0ICcQeExIFGdimjvKka7btJFZuaXOammIGKUCFQ53j9EN1dYKWqHf0t2w407W2tgs6h89ZnImjB55flh81tt9XirjjDuSl+oIPRQ0iWPgNZ5GqTqbBe3vSzEl5n5PhWKwocyR2HlqYN61qV18WjYjE8JLARZPQsUSim8foIRYTlGr02Ly7piASFRtKJ4VfieYhxdS2JcDVMN6xVOKZyrCGm8b108lrLRVzvptLH7IoEFLFANes6KnDi+uxfmvFnF17oALq5u1agu3/YfHkcSFzeSggV5eXRfIB7CHNcO5SUI+Ih5Ir7f4MAV9IqdFzdZgNpZw1Gcs1mNvgGbTbqQ9/cz7ZuuhgyYRQ49ljTyWHhr2DwpNHHFf+5gnWZ3Bharo+0TD5dNMw5vv9RlVpSRDHK4TlnoukhtYApuOHejSZQuo5g/A9BysdKRCyLl6062fN37OXMDlvUJtUrtmxo0avrW3wTrYs3jJ9RvRVChrmSmanPMpX2OXMsmDGh6AiEIwBAlvkOqIdBy+8JyAz8pz7QxiDth4KDy5uAlwzrWTnwC8Vc4KVAMZ3YUZ+IqoIjP3h5KFFX1ZMy3uW+7RhEDHgTi0zC9rS7uhPCDiNrGFyqBeERtKN/B0YlyFCkw0NJ5C0Ojv7zvT1a1WV1TuvZDdL4NTgB7CASYpsen6gqvG5jmTf5qHedADgkBl3D0nkSgNhZACDyi0FUKZRr3IdRjgN4WPPoFMIIegIK3mqd38fS80mcJKelM4szNyzZtQbkchGePuBRS8Eg9pHU8ojRQpSqs+ajAIwTjjUMQ/nvTNM0kicwYxZIYMh/891DYi+fvedB+c1xsm4lDU6ya+Axtz+RiAzEVYbajQOpq17F0R9QevNcEhfcU+xvyQQUalGJBSesqOkgPQ4YNyUZL9fSvUPDjoNAwN8/dwFjaczNkc3ptaMud1EIDtGcmXTcefO2cGSvKIFfp/2JIJxlq7xEl3nVPM4fDeIbPkD16/ptNc0bDu7qxbsu0R2JGywWMIjF2ft3tjfloAyQAGXiOn8hrqwbVvMXzaO+QeHXP6nF0wvX74Hf4NGG5GPjSlYoyM3P/0FbCT6zvM/yYoAAAAASUVORK5CYII=" width="16" height="16" role="presentation" style="pointer-events:none"/></div><div class="react-toggle-track-x"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABwNJREFUWAmtV1tsFFUY/s6Z2d22zLYlZakUCRVaQcqlWIiCiS1gTEB9UAO+GR9En3iQGI0xJiSiRB98MjEq8cEQTSBeHhQM0V7whtEGDWC90BYitxahtNtu25058/v/ZzvLbilawJNM5+yZ89+//1LgJhYRNLW1uDfBAvpGiIk2O5auvfFxqIH3ZJ8/u06GN6Z9+wVl5SjcD1IbZa/UPkPyYl2uR4dreoD2bnbYxTlBBRytkHXtAREphP5KuH4lddx9h70yxX05t7yYXwGb6W8nx1jibpl2rFlGBxcG9M18okOrn7Bnk/BAO/4bI0UeEE1zjBp3UmvjOxJXJdaKN/ZiIu4tOZrAb4aTdZAZArKmWeiiJZ6jt5tiagdCS9+6cgO1Ne6Mvhe+ixTIfyDVhipnK9p+P0Edqx9RW/YZtQVGmOLChRxNNlyPsTEgPQKMB3dbEHa0h1awYmQ83enTd2vmUtvKd1Glv2RkzBb+kZGRrKtjzG60Wguhd/lJZBingbcfWWe72vjT75bJDrhYtvA0hrurETDr5HyF2Knb1MM4ab//xIoOqueA0edRnkkinTyJdYvqLFDZO4zUPFCvVoDjJq4T7TE61IWh4x5KqxX5KVKkX8WZ/t2ov2cb3MHt4dhIyOxIJxJOOF6xRx/99BksXLoecWcXytILMNBDqKpnGZWPquYfPxY8iXGR9fK+SgFrgcRPXPjVqhehL+3EmZ5RGJQi1QBU8TPThQnOQzm+5UXGIcetUeEAfP13VwzpI+w1jGJWdSliNfvVhiMPiOsllJag4M/UGHiqM6dlBb2OTLKHHV6KkvogrJ4XhBWniWK/Gp1MQyf93FOeUXKmKk/FzJxbQtKLjFXYT4USupy8fQVir2ynVEBiZMG0qtOHMS/AW4Gwrk7BG3C1F0B5nqNKE0CME4MfVRLPnXkBKe+ipvoFhNQywOhdghvLi0F8ReyVXV4BKTBRbbe5f64zR/DHsdZw1hJfeWlHl/GNRJzDxrd5m192z78TMaVnKELZoINZS4BzQ7vtnZljSnha/pPCbkuxzXcupYwI5tIeCpGc0Yp9tWHZQy/rmYhRfNgg4bHJBYLzGkxsRJF4XKlE2jBOHNSv3kY7Tj6vthzPFl61BrYwqFlmEQhtSVXmLiksxLmtRgYXI1ULU61JJ4eVKmG3/5sCVgpbMT6OMJ2E08/29Xf3w6v4FnHdCjfWgXu/O8Z5mLdCkeRs2khHe1DqOtQwbHWTAnM5S2HNmhALYo5KjkPFrMMKjZl6HxhWIAb0BqE+/73GrBRQUsKYiBu4JX8ycI6wtw+i5ef3NZpsrKVSHYCP37jwGDgeE1SA0S/xtl5SU2fs1ApEp0qTLVRjgyycDSsLHMSwmFltZMStR3uLLg6BdLhDa5dC6ryU2pHBe1BVO9tUcwfitJt2CLJZUHoG6T7Op75u0IyK31TCPcwFqgPk/KCaD3dFOuZBCO7xvCT/j048b3I3c7F2+WuOW7qdgkucFYlcQ4qop3yzTX7WaKfOCccye3Ts1Etq0+a/BHCF1yPgF3tAUkR6OrtGmo6gl94qqcXKh3rDyrOkPa58URoWcov2Mo6M+0QjrqKB+b7++oMa9Sz+ZkM0mie6aAtnGUvhmxaI+TogPOSQedgWioGSHFLn3v4kLh4HRspNmOGv41k+55siLFp2z6xYeJjhljFcbmxJlr4ga06TbevSByz/glQq4BJx46/c+237PbBqEYKxX3HpmKZEnQnr65X20hqJYaNcLoFOLiJk2LuBbyg7Q0OEn+hm0P3honxFD6rdxYorKpeIoi4YSSvyQHQIbM5t4+YNxLj/OxhVOOE4585qGpjnq+wSx6Q9CtNxTjd5klB+g6Mv36r0+b9cZFi44WYkHdG2ZWb3TtOUOXyVAlKlpGvJIAJ3eBMyfYS5C0qRZGtC85j+4sOasDe9xznPYezhhO/2Q6eP2fSOvYHOjtuQ1a9Q1VKynVDaMc8E0tptdxUsTFpFIYjcZKcbnoaQTNdiqCwNlL4G7oziSqGnT1ALf34vhk4R5zU3qYV9ONp9K88RtouShE68JwaU8dFw5W617shWa9ykeaBIn2hcsvPgL00k45QdTCZuSVcTRNs+8fnyLvooQfR5iujAnR9bxfY2xOVOxFS8SK3Le0l48VyYu1M8HRe5JD8wKPTjYnifaK3Wfn/GChYQ8ZAi6WRzWgqLV5YrsVLnZaVSoXU1g9gOIDwFySiGi+Zdrnzr7J3r+SMuszlcQCRn8lNGcTuSy2jOI7o9mxjZo+vR3ej3tN+ifRSOyUTS0+VMOid93cCubeiy/6TImS0QxRSCq2vxKr45zV+FQnjWH6D2xg+E9EatLcLAdHTgtGGD80D6jM0+aOl4wJgO/f96R2aJKCQ3yvgftRhdFMOpd6oAAAAASUVORK5CYII=" width="16" height="16" role="presentation" style="pointer-events:none"/></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between Dark and Light mode"/></div></div><h1 style="color:var(--header)">Best practices for Web application maintenance</h1><aside id="table-of-content" class="tableOfContentscomponent__Aside-sc-ep791a-0 cbXOgd"><header class="tableOfContentscomponent__Heading-sc-ep791a-1 cVqbCQ">Table of content</header><nav><ul>
<li>
<p><a href="#a-bit-of-context">A bit of context</a></p>
</li>
<li>
<p><a href="#set-rules-and-automate-them">Set rules and automate them</a></p>
<ul>
<li><a href="#the-almost-exhaustive-list-">The <em>almost</em> exhaustive list 🤞</a></li>
</ul>
</li>
<li>
<p><a href="#test-test-test">Test, test, test</a></p>
<ul>
<li><a href="#our-e2e-tests">Our E2E tests</a></li>
<li><a href="#our-unit-tests">Our “unit” tests</a></li>
<li><a href="#our-principles">Our principles</a></li>
</ul>
</li>
<li>
<p><a href="#the-project-stays-the-features-dont">The project stays, the features don’t</a></p>
<ul>
<li><a href="#ab-testing">A/B testing</a></li>
<li><a href="#the-future-flipping">The <em>future flipping</em>.</a></li>
</ul>
</li>
<li>
<p><a href="#monitor-measure-alert">Monitor, Measure, Alert</a></p>
</li>
<li>
<p><a href="#limit-monitor-and-update-your-dependencies">Limit, monitor and update your dependencies</a></p>
</li>
<li>
<p><a href="#accepting-your-technical-debt">Accepting your technical debt</a></p>
</li>
<li>
<p><a href="#to-summarize">To summarize</a></p>
</li>
</ul></nav></aside><div style="font-size:0.83255rem;line-height:1.75rem;margin-bottom:1.75rem;margin-top:-1.75rem"><time dateTime="2021-09-05">September 05, 2021</time><small style="margin-left:1rem"><a style="margin-right:0.5rem" href="/en/web">#<!-- -->web</a><a style="margin-right:0.5rem" href="/en/javascript">#<!-- -->javascript</a><a style="margin-right:0.5rem" href="/en/bedrock">#<!-- -->bedrock</a></small></div><div id="lang-switcher" class="availableLanguagescomponent__Container-sc-zfico6-0 hkmXGu">Post available in<!-- -->:<!-- --> <a style="box-shadow:none;text-decoration:none" hrefLang="fr" href="/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans">Français</a></div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:56.400000000000006%"></div><noscript><picture><source type='image/webp' srcset="/static/706dca8ff24a680a04318fad5f7a023c/7ca0e/bedrock.webp 250w,
/static/706dca8ff24a680a04318fad5f7a023c/e9589/bedrock.webp 500w,
/static/706dca8ff24a680a04318fad5f7a023c/e30b5/bedrock.webp 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/90fb1/bedrock.webp 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/25f09/bedrock.webp 1920w" sizes="(max-width: 1000px) 100vw, 1000px" /><source srcset="/static/706dca8ff24a680a04318fad5f7a023c/8f7df/bedrock.jpg 250w,
/static/706dca8ff24a680a04318fad5f7a023c/0f3a1/bedrock.jpg 500w,
/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/37d86/bedrock.jpg 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w" sizes="(max-width: 1000px) 100vw, 1000px" /><img loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" srcset="/static/706dca8ff24a680a04318fad5f7a023c/8f7df/bedrock.jpg 250w,
/static/706dca8ff24a680a04318fad5f7a023c/0f3a1/bedrock.jpg 500w,
/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg 1000w,
/static/706dca8ff24a680a04318fad5f7a023c/37d86/bedrock.jpg 1500w,
/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w" src="/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg" alt="Best practices for Web application maintenance" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="blog-post__PostContent-sc-hrojot-0 cwUnwa"><blockquote>
<p>How not to throw away your application every two years?</p>
</blockquote>
<p>Feedback based on best practices applied to the web platform developed at <em><a href="https://www.bedrockstreaming.com/">Bedrock Streaming</a></em></p>
<h2 id="a-bit-of-context" style="position:relative;"><a href="#a-bit-of-context" aria-label="a bit of context permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A bit of context</h2>
<p>At Bedrock Streaming many teams develop and maintain <em>frontend</em> applications for our customers and users.
Some of those application are not very young.
In fact, the application I’m mainly working on is a website whose developments started in 2014.
I have already mentioned it in different articles of <a href="https://slashgear.github.io/">this blog</a>.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/f13a9/commit-count.avif 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/6d0e0/commit-count.avif 294w"
              sizes="(max-width: 294px) 100vw, 294px"
              type="image/avif"
            /><source
              srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w"
              sizes="(max-width: 294px) 100vw, 294px"
              type="image/webp"
            />
          <source
            srcset="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,
/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w"
            sizes="(max-width: 294px) 100vw, 294px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png"
            alt="screenshot of the number of commits on master of our project 15668"
            title="screenshot of the number of commits on master of our project 15668"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>You might think: “Oh poor people, maintaining an almost 10 year old application must be hell!”</p>
<p>Don’t worry, it’s not the case!
I have worked on projects that are much less old but where the development of new features was much more painful.</p>
<p>Today the project is technically up to date, we must be on the latest version of React while it had started on a version <em>0.x.x</em>.
In this world of web technologies often criticized (eg: the many articles on the <em>Javascript Fatigue</em>) whose tools and practices are constantly evolving, keeping a project “up to date” remains a real challenge.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/87ea590416839a8413c9d4905c0fa4b6/f13a9/releases.avif 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/7bd34/releases.avif 350w"
              sizes="(max-width: 350px) 100vw, 350px"
              type="image/avif"
            /><source
              srcset="/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w"
              sizes="(max-width: 350px) 100vw, 350px"
              type="image/webp"
            />
          <source
            srcset="/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,
/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w"
            sizes="(max-width: 350px) 100vw, 350px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png"
            alt="number of versions of the application 1445"
            title="number of versions of the application 1445"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Moreover, in the context of this project, in almost 10 years, we have had about 100 contributors.
Some have only stayed a few months/years.
How can we keep the maximum knowledge on “How we do things and how it works?” in such a moving human context?</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/333e464600eaed01c177c248b9aac0eb/f13a9/contributors.avif 200w,
/static/333e464600eaed01c177c248b9aac0eb/af71e/contributors.avif 400w,
/static/333e464600eaed01c177c248b9aac0eb/679d2/contributors.avif 690w"
              sizes="(max-width: 690px) 100vw, 690px"
              type="image/avif"
            /><source
              srcset="/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,
/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,
/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w"
              sizes="(max-width: 690px) 100vw, 690px"
              type="image/webp"
            />
          <source
            srcset="/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,
/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,
/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w"
            sizes="(max-width: 690px) 100vw, 690px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png"
            alt="list of the 100 contributors of the project"
            title="list of the 100 contributors of the project"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>This is what I would like to present you.</p>
<p>With the help of my colleagues, I have collected the list of good practices that still allow us to maintain this project today.
With <a href="https://twitter.com/fooragnak">Florent Dubost</a>, we often thought that it would be interesting to publish it.
We hope you will find it useful.</p>
<h2 id="set-rules-and-automate-them" style="position:relative;"><a href="#set-rules-and-automate-them" aria-label="set rules and automate them permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set rules and automate them</h2>
<p>A project that stands the test of time is first and foremost a set of knowledge that is stacked one on top of the other.
It’s like the Kapla tower you used to build as a child, trying to get as high as possible.
A solid base on which we hope to add as much as possible before a potential fall.</p>
<p>From the beginning of a project, we have to make important decisions about “How do we want to do things?
We think for example about “What format for our files? How do we name this or that thing?”
Writing accurate documentation of “How we do things” might seem like a good idea.</p>
<p>However, documentation is cool, but it tends to get outdated very quickly.
Our decisions evolve, but documentation does not.</p>
<blockquote>
<p>“Times change but not READMEs.”</p>
<p><a href="https://twitter.com/omansour"><em>Olivier Mansour (deputy CTO at Bedrock)</em></a></p>
</blockquote>
<p>Automating the checking of each of the rules we impose on ourselves (on our codebase or our processes) is much more durable.
To make it simple, we avoid as much as possible to say “We should do things like that”, and we prefer “we’ll code something that checks it for us”.
On top of that, on the JS side we are really well equipped with tools like <a href="https://eslint.org/">Eslint</a> that allow us to implement our own rules.</p>
<p>So the reflex we try to adopt is the following:</p>
<ul>
<li>“We should try to do it like this now!”</li>
<li>“Ok that’s interesting, but how can we make sure we do it like that automatically with our CI (Continuous Integration)?”</li>
</ul>
<p>Continuous Integration of a project is the perfect solution to not miss anything on every <em>Pull Request</em> we provide.
Reviews are only easier because you don’t have to worry about all the rules that are already automated.
In this model, the review is more for knowledge sharing than for typo copying and other non-compliance with the project conventions.</p>
<p>In this principle, we must therefore try to banish oral rules.
The time of the druids is over, if all the good practices of a project have to be transmitted orally, it will only take longer to guide new developers into your team.</p>
<p><img src="/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif" alt="the recipe of the magic potion of panoramix is lost because secret"></p>
<p>A project is not set in stone. These rules evolve with time.
It is therefore preferable to add rules that have a script that will <em>autofix</em> the whole codebase intelligently.
Many Eslint rules offer this, and it is a very important selection criteria when choosing new conventions.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">eslint --fix</code></pre></div>
<p>A very strict rule that will force you to modify your code manually before each push is annoying in the long run and will annoy your teams.
Whereas a rule (even a very strict one) that can auto-fix itself at commit time will not be seen as annoying.</p>
<p><strong>How to decide to add new rules ?</strong></p>
<p>This question may seem thorny, take for example the case of <code class="language-text">&lt;tab></code> / <code class="language-text">&lt;space></code> in files.
For this, we try to avoid the endless debates and follow the trend and rules of the community.
For example, <a href="https://github.com/M6Web/eslint-tools">our Eslint configuration base</a> is based on Airbnb’s which seems to have some success in the JS community.
But if the rule we want to impose on ourselves is not available in Eslint or other tools, we sometimes prefer not to follow the rule rather than say “We’ll do it without a checking CI”.</p>
<h3 id="the-almost-exhaustive-list-" style="position:relative;"><a href="#the-almost-exhaustive-list-" aria-label="the almost exhaustive list  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <em>almost</em> exhaustive list 🤞</h3>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/f13a9/ci-workflow.avif 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/af71e/ci-workflow.avif 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/0bbb0/ci-workflow.avif 768w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/avif"
            /><source
              srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,
/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,
/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png"
            alt="Our continuous integration workflow"
            title="Our continuous integration workflow"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<ul>
<li>The file format is tracked managed by <a href="https://editorconfig.org/">Editorconfig</a>, <a href="https://prettier.io/">prettier</a> and <a href="https://eslint.org/">Eslint</a>.
We have opensourced <a href="https://github.com/M6Web/eslint-tools">our own configuration</a>, if it is of any use to you.</li>
<li>We use a <a href="https://www.conventionalcommits.org/en/v1.0.0/">specific commit name</a> to generate our changelog.
To make sure devs follow it, a simple step in our CI checks it.</li>
<li>We don’t want a dev to make our JS bundles very big in production, so we track and measure their size in the CI.
We use an in-house tool but we can recommend the [BuildTracker] tool (<a href="https://buildtracker.dev/">https://buildtracker.dev/</a>).</li>
<li>Test coverage is not an indicator for the team, not all lines have the same need for us to be tested.
Some teams at Bedrock however follow this indicator which at least has the interest to give a trend.</li>
<li>Our unit tests obviously run on the CI, these must pass.</li>
<li>Our functional tests (End to end: E2E) run on Chrome Headless, they must be green.</li>
<li>The logs of our E2E tests are retrieved and parsed to avoid errors or React warnings (the parsing script is however complicated to maintain)</li>
<li>Functional tests run in a <em>sandbox</em> where the whole network is proxied.
We make sure that our tests do not depend on a non mocked API that could slow down their execution.</li>
<li>During the E2E tests we check that no image request has generated a 404.</li>
<li>We perform some <a href="https://www.deque.com/axe/">accessibility checks with Axe</a> during our E2E tests.</li>
<li>We check some rules on the CSS with <a href="https://stylelint.io/">Stylelint</a> and <a href="https://github.com/M6Web/bemlinter">bemlinter</a> (we don’t use BEM anymore but there is still some style managed in SCSS that we migrate little by little in StyledComponent)</li>
<li>The project is a monorepo on which we try to maintain the same dependencies versions for each package.
For that we have developed a tool that allows to do this check <em><a href="https://www.npmjs.com/package/monorepo-dependencies-check">monorepo-dependencies-check</a></em></li>
<li>We check that our <code class="language-text">yarn.lock</code> file has not been inadvertently modified or that it has been updated with respect to the modifications of the <code class="language-text">package.json</code>.</li>
<li><a href="https://www.terraform.io/">Terraform</a> is used to manage our cloud resources, we check that the file format is correct.</li>
</ul>
<h2 id="test-test-test" style="position:relative;"><a href="#test-test-test" aria-label="test test test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test, test, test</h2>
<p>I hope that in 2021 it is no longer necessary to explain why automatic testing of your application is essential to make it sustainable.
In JS, we are rather well equipped in terms of testing tools today.
However, the eternal question remains:</p>
<blockquote>
<p>“What do we want to test?”</p>
</blockquote>
<p>Globally if we search on the internet this question, we see that different needs make emerge very different practices and testing tools.
It would be very presumptuous to think that there is a good way to automatically test your application.
This is why it is preferable to define one or more test strategies that meet defined and limited needs.</p>
<p>Our test strategies are based on two distinct goals:</p>
<ul>
<li>To automate the verification of the functionalities proposed to the users by putting ourselves in their place.</li>
<li>To provide us with efficient solutions to specify the way we implement our technical solutions to allow us to make them evolve more easily.</li>
</ul>
<p>To do this, we perform two “types of tests” that I propose to present here.</p>
<h3 id="our-e2e-tests" style="position:relative;"><a href="#our-e2e-tests" aria-label="our e2e tests permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Our E2E tests</h3>
<p>We call them “functional tests”, they are End-to-end (E2E) tests on a very efficient technical stack composed of <a href="https://cucumber.io/docs/installation/javascript/">CucumberJS</a>, <a href="https://webdriver.io/">WebdriverIO</a> with <a href="https://developers.google.com/web/updates/2017/04/headless-chrome">ChromeHeadless</a>
This is a technical stack set up at the beginning of the project (at the time with <a href="https://phantomjs.org/">PhantomJS</a> for the oldest among you)</p>
<p>This stack allows us to automate the piloting of tests that control a browser.
This browser will perform actions that are as close as possible to what our real users can do while checking how the site reacts.</p>
<p>A few years ago, this technical stack was rather complicated to set up, but today it is rather simple to do.
<a href="https://github.com/Slashgear/slashgear.github.io">The site that hosts this blog post</a> is itself proof of this.
It only took me about ten minutes to set up this stack with <a href="https://webdriver.io/docs/gettingstarted">the WebdriverIo CLI</a> to verify that my blog is working as expected.</p>
<p>I recently published <a href="https://slashgear.github.io/how-to-setup-e2e-tests-with-webdriverio/">an article presenting the implementation of this stack</a>.</p>
<p>So here is an example of an E2E test file to give you an idea:</p>
<div class="gatsby-highlight" data-language="gherkin"><pre class="language-gherkin"><code class="language-gherkin"><span class="token feature"><span class="token keyword">Feature:</span><span class="token important"> Playground</span>
</span>
  <span class="token scenario"><span class="token keyword">Background:</span><span class="token important"> Playground context</span></span>
    <span class="token atrule">Given</span> <span class="token atrule">I</span> use <span class="token string">"playground"</span> test context

  <span class="token scenario"><span class="token keyword">Scenario:</span><span class="token important"> Check if playground is reachable</span></span>
    <span class="token atrule">When</span> As user <span class="token string">"toto@toto.fr"</span> I visit the <span class="token string">"playground"</span> page
    <span class="token atrule">And</span> <span class="token atrule">I</span> click on <span class="token string">"playground trigger"</span>
    <span class="token atrule">Then</span> <span class="token atrule">I</span> should see a <span class="token string">"visible playground"</span>
    <span class="token atrule">And</span> <span class="token atrule">I</span> should see 4 <span class="token string">"playground tab"</span> in <span class="token string">"playground"</span>

    <span class="token atrule">When</span> <span class="token atrule">I</span> click on <span class="token string">"playground trigger"</span>
    <span class="token atrule">Then</span> <span class="token atrule">I</span> should not see a <span class="token string">"visible playground"</span>

    <span class="token comment"># ...</span></code></pre></div>
<p>And it looks like this in local with my Chrome browser!</p>
<p><img src="/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif" alt="Example of functional test execution"></p>
<p>Here is a diagram that explains how this stack works:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/8de3947494607606cd09c4b4a110bef5/f13a9/e2e-archi.avif 200w,
/static/8de3947494607606cd09c4b4a110bef5/af71e/e2e-archi.avif 400w,
/static/8de3947494607606cd09c4b4a110bef5/c9875/e2e-archi.avif 800w,
/static/8de3947494607606cd09c4b4a110bef5/07e28/e2e-archi.avif 1200w,
/static/8de3947494607606cd09c4b4a110bef5/2babf/e2e-archi.avif 1600w,
/static/8de3947494607606cd09c4b4a110bef5/5f214/e2e-archi.avif 2058w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,
/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,
/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,
/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,
/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,
/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,
/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,
/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,
/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,
/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,
/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png"
            alt="diagram that explains how our stack works"
            title="diagram that explains how our stack works"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Today, Bedrock’s web application has over 800 E2E test cases running on each of our <em>Pull Request</em> and the <code class="language-text">master</code> branch.
They assure us that we are not introducing any functional regression and that’s just great!</p>
<p>👍 The positives</p>
<ul>
<li>WebdriverIO also allows us to run these same tests on real devices on a daily basis through the paid SAAS service <a href="https://www.browserstack.com/">Browserstack</a>.
So we have every day a <em>job</em> that makes sure that our site works correctly on a Chrome last version on Windows 10 and Safari on MacOs.</li>
<li>These tests allow us to easily document the functionality of the application using the Gherkin language.</li>
<li>They allow us to reproduce cases that are far from nominal.
In a <em>TDD</em> logic, they allow us to advance on the development without having to click for hours.</li>
<li>These tests allowed us not to break the old version of the site which is still in production for some customers while our efforts are concentrated on the new one.</li>
<li>They give us real confidence.</li>
<li>Thanks to our library <a href="https://www.npmjs.com/package/superagent-mock"><em>superagent-mock</em></a>, we can <em>fixturer</em> (plug, mock) all the APIs we depend on and thus even check the error cases.
Also, mocking the browser’s XHR layer allows for a significant improvement in test execution time. 🚀</li>
<li>They give us access to extended uses like:
<ul>
<li>checking accessibility rules</li>
<li>check the browser console logs (to avoid introducing errors or React Warning for example)</li>
<li>monitoring all network calls of the site through a proxy</li>
<li>and so on…</li>
</ul>
</li>
</ul>
<p>👎 The complications</p>
<ul>
<li>Maintaining this stack is complicated and expensive.
Since few resources are published on this domain, we sometimes find ourselves digging for days to fix them 😅.
Sometimes we feel quite alone in having these worries.</li>
<li>It is very easy to code a so-called <em>flaky</em> E2E test (ie: a test that can fail randomly).
They make us think that something is broken.
They sometimes take us a long time to stabilize.
It is still <strong>much better to remove a test that will not give you a stable result.</strong></li>
<li>Running all the tests takes a lot of time on our continuous integration.
We must regularly work on their optimization so that the feedback they provide you is as fast as possible.
These important times also cost money, because we have to run these tests on machines.
For your information, the infrastructure of the website (just the hosting of our Node servers + static files + CDN) cost much less than our continuous integration.
This obviously makes our Ops team smile! 😊</li>
<li>The new recruits in our teams have often never done this kind of testing, so there is a <del>struggle</del> phase of learning…</li>
<li>Some features are sometimes too complicated to test with our E2E stack (for example, payment paths that depend on third parties).
So we sometimes fall back on other techniques with Jest, especially with a less unitary scope.</li>
</ul>
<h3 id="our-unit-tests" style="position:relative;"><a href="#our-unit-tests" aria-label="our unit tests permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Our “unit” tests</h3>
<p>To complete our functional tests we also have a stack of tests written with <a href="https://jestjs.io/en/">Jest</a>.
We call these tests unit tests because we have as a principle to try to always test our JS modules independently from the others.</p>
<p>Let’s not debate here about “Are these real unit tests?”, there are enough articles on the internet about this topic.</p>
<p>We use these tests for different reasons that cover needs that our functional tests do not cover:</p>
<ul>
<li>to help us develop our JS modules with TDD practices.</li>
<li>to document and describe how a JS module works.</li>
<li>test very/too complicated edge cases with our E2E tests.</li>
<li>facilitate the refactoring of our application by showing us the technical impacts of our modifications.</li>
</ul>
<p>With these tests, we put ourselves at the level of a utility function, a Redux action, a reducer, a React component.
We rely mainly on <a href="https://slashgear.github.io/discover-jest-hidden-feature-automock/">the <code class="language-text">automock</code> functionality of Jest</a> which allows us to isolate our JS modules when we test.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/f13a9/mocked-modules.avif 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/af71e/mocked-modules.avif 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/c9875/mocked-modules.avif 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/07e28/mocked-modules.avif 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/2babf/mocked-modules.avif 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/f696c/mocked-modules.avif 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,
/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/jpeg"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg"
            alt="visual representation of the automock"
            title="visual representation of the automock"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>The previous image represents the metaphor that allows us to explain our unit testing strategy to newcomers.</p>
<blockquote>
<p>You have to imagine that the application is a wall made of unit bricks (our ecmascript modules), our unit tests must test one by one the bricks in total independence from the others.
Our functional tests are there to test the cement between the bricks.</p>
</blockquote>
<p><strong>To summarize, we could say that our E2E tests test <em>what our application should do</em>, and our unit tests make sure to check <em>how it works.</em></strong></p>
<p>Today there are more than 6000 unit tests that cover the application and allow to limit regressions.</p>
<p>👍</p>
<ul>
<li><a href="https://jestjs.io/en/">Jest</a> is really a great library, fast, complete, well documented.</li>
<li>Unit tests help us a lot to understand <em>several years later</em> how it all works.</li>
<li>We always manage to unit test our code, and it complements our E2E tests well.</li>
<li>The <code class="language-text">automock</code> is really handy for breaking down tests by modules.</li>
</ul>
<p>👎</p>
<ul>
<li>Sometimes we found ourselves limited by our E2E test stack and couldn’t rely solely on unit tests.
We were missing something to be able to make sure that the <em>cement between the bricks</em> worked as we wanted it to.
For this, a second test stack <a href="https://jestjs.io/en/">Jest</a> was set up called “integration test” where the <code class="language-text">automock</code> is disabled.</li>
<li>The abuse of <a href="https://jestjs.io/docs/snapshot-testing"><em>Snapshot</em></a> is dangerous for your health.
The use of <em>“Snapshot testing”</em> can save time on the implementation of your tests but can reduce the quality.
Having to review a 50 line object in <em>Snapshot</em> is neither easy nor relevant.</li>
<li>With the depreciation of <a href="https://enzymejs.github.io/enzyme/">EnzymeJS</a>, we are forced to migrate to <a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library</a>.
It is of course possible to unit test components with this new library.
Unfortunately, this is not really the spirit and the way to do it.
<a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library</a> pushes us <a href="https://kentcdodds.com/blog/why-i-never-use-shallow-rendering">not to play with <em>shallow rendering</em></a>.</li>
</ul>
<h3 id="our-principles" style="position:relative;"><a href="#our-principles" aria-label="our principles permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Our principles</h3>
<p>We try to always follow the following rules when asking the question “Should I add tests?“.</p>
<ol>
<li>If our <em>Pull Request</em> introduces new user features, we need to integrate E2E test scenarios.
Unit tests with Jest can complete / replace them accordingly.</li>
<li>If our <em>Pull Request</em> aims to fix a bug, it means that we are missing a test case.
We must therefore try to add an E2E test or, failing that, a unit test.</li>
</ol>
<p><em>It is while writing these lines that I think that these principles could very well be automated.</em> 🤣</p>
<h2 id="the-project-stays-the-features-dont" style="position:relative;"><a href="#the-project-stays-the-features-dont" aria-label="the project stays the features dont permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The project stays, the features don’t</h2>
<blockquote>
<p>“The second evolution of a feature is very often its removal.”</p>
</blockquote>
<p>As a matter of principle, we want to make sure that every new feature in the application does not base its activation on simply being in the codebase.
Typically, the lifecycle of a feature in a project can be as follows (in a <a href="https://guides.github.com/introduction/flow/">Github Flow</a>):</p>
<ul>
<li>a person implements on a branch</li>
<li>the feature is <em>merged</em> on master</li>
<li>it is deployed in production</li>
<li>lives its feature life (sometimes with bugs and fixes)</li>
<li>the feature is not needed anymore</li>
<li>a person unravels the code and removes it</li>
<li>new deployment</li>
</ul>
<p>To simplify some steps, we have implemented <em>feature flipping</em> on the project.</p>
<p><strong>How does it work?</strong></p>
<p>In our config there is a <em>map</em> key/value that lists all the features of the application associated with their activation status.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> featureFlipping <span class="token operator">=</span> <span class="token punctuation">{</span>
  myAwesomeFeature<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  anotherOne<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In our code, we have implemented conditional treatments that say “If this feature is activated then…“.
This can change the rendering of a component, change the implementation of a Redux action or disable a route in our <em>react-router</em>.</p>
<p><strong>But what’s the point?</strong></p>
<ul>
<li>We can develop new evolutions progressively by hiding them behind a configuration key.
We deliver features in production without activating them.</li>
<li>In a test environment, we can overload this config to test features that are not yet activated in production.</li>
<li>In the case of a white label site, we can propose these features to our customers as possible options.</li>
<li>Before deleting code of a feature, we deactivate it and clean it up without risk.</li>
<li>Thanks to an in-house tool called <em>Applaunch</em>, this feature flipping config can be overloaded on time in a GUI without deployment.
This allows us to activate features without putting the code into production.
In the event of an incident, we can deactivate features that have been degraded.</li>
</ul>
<p>To give you a more concrete example, between 2018 and 2020 we completely overhauled the application’s interface.
This graphical evolution was just a featureFlipping key.
The graphical redesign was not a reset of the project, we still live with both versions (as long as the switchover of all our customers is not completed).</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/1148bec58444fa4ccea56315b956b236/f13a9/compare-v4-v5.avif 200w,
/static/1148bec58444fa4ccea56315b956b236/af71e/compare-v4-v5.avif 400w,
/static/1148bec58444fa4ccea56315b956b236/c9875/compare-v4-v5.avif 800w,
/static/1148bec58444fa4ccea56315b956b236/07e28/compare-v4-v5.avif 1200w,
/static/1148bec58444fa4ccea56315b956b236/2babf/compare-v4-v5.avif 1600w,
/static/1148bec58444fa4ccea56315b956b236/f696c/compare-v4-v5.avif 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,
/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,
/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,
/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,
/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,
/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,
/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,
/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,
/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,
/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,
/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/jpeg"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg"
            alt="screenshot comparing v4 / v5 on 6play"
            title="screenshot comparing v4 / v5 on 6play"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h3 id="ab-testing" style="position:relative;"><a href="#ab-testing" aria-label="ab testing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A/B testing</h3>
<p>Thanks to the great work of the backend and data teams, we were even able to extend the use of <em>feature flipping</em> by making this configuration modifiable for sub-groups of users.</p>
<p>This allows us to deploy new features on a smaller portion of users in order to compare our <a href="https://en.wikipedia.org/wiki/Performance_indicator">KPI</a>.</p>
<p>Decision making, technical or product performance improvement, experimentation, the possibilities are numerous and we exploit them more and more.</p>
<h3 id="the-future-flipping" style="position:relative;"><a href="#the-future-flipping" aria-label="the future flipping permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <em>future flipping</em>.</h3>
<blockquote>
<p>Based on an original idea by <a href="https://twitter.com/SuperFlaw">Florent Lepretre</a>.</p>
</blockquote>
<p>We regularly had the need to activate features at <del>very</del> early hours in the future.
For that we had to be connected at a precise time on our computer to modify the configuration on the fly.</p>
<p>To avoid forgetting to do this, or doing it late, we made sure that a configuration key could be activated from a certain date.
To do this, we evolved our <em>selector redux</em> which indicated if a feature was activated so that it could handle date formats and compare them to the current time.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> featureFlipping <span class="token operator">=</span> <span class="token punctuation">{</span>
  myAwesomeFeature<span class="token operator">:</span> <span class="token punctuation">{</span>
    offDate<span class="token operator">:</span> <span class="token string">'2021-07-12 20:30:00'</span><span class="token punctuation">,</span>
    onDate<span class="token operator">:</span> <span class="token string">'2021-07-12 19:30:00'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>Many coffees ☕️ at 9am have been saved by <em>future flipping</em>.</p>
</blockquote>
<h2 id="monitor-measure-alert" style="position:relative;"><a href="#monitor-measure-alert" aria-label="monitor measure alert permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitor, Measure, Alert</h2>
<p>To maintain a project as long as bedrock’s web application, testing, documentation and rigor are not enough.
You also need visibility on what works in production.</p>
<blockquote>
<p>“How do you know that the application you have in production right now is working as expected?”</p>
</blockquote>
<p>We assume that no functionality works until it is monitored.
Today, monitoring in Bedrock on the frontend side takes the form of different tools and different stacks.
I could quote <a href="https://newrelic.com/">NewRelic</a>, a <a href="https://github.com/statsd/statsd">Statsd</a>, a <a href="https://www.elastic.co/fr/what-is/elk-stack">ELK</a> stack or even <a href="https://youbora.nicepeopleatwork.com/">Youbora</a> for the video.</p>
<p>To give you an example, each time a user starts a browsing session we send an anonymous monitoring <em>Hit</em> to increment a counter in Statsd.
We then have to define a dashboard that displays the evolution of this number in a graph.
If we observe a too important variation, it can allow us to detect an incident.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/5da9f76c5fa5325b394418fa229d9204/f13a9/grafana-monitoring-example.avif 200w,
/static/5da9f76c5fa5325b394418fa229d9204/af71e/grafana-monitoring-example.avif 400w,
/static/5da9f76c5fa5325b394418fa229d9204/c9875/grafana-monitoring-example.avif 800w,
/static/5da9f76c5fa5325b394418fa229d9204/07e28/grafana-monitoring-example.avif 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/2babf/grafana-monitoring-example.avif 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/8d64d/grafana-monitoring-example.avif 3702w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/avif"
            /><source
              srcset="/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,
/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,
/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,
/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,
/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,
/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,
/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,
/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,
/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png"
            alt="example of monitoring dashboard"
            title="example of monitoring dashboard"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>Monitoring also offers us solutions to understand and analyze a bug that occurred in the past.
Understanding an incident, explaining it, finding its root cause are the possibilities that are open to you if you monitor your application.
Monitoring can also allow you to better communicate with your customers about the impact of an incident and also to estimate the number of impacted users.</p>
<p>With the multiplication of our customers, monitoring our platforms well is not enough.
Too much data, too many dashboards to monitor, it becomes very easy to miss something.
So we started to complement our metrics monitoring with automatic <em>alerting</em>.
Once we have enough confidence in the metrics, we can easily set up alerts that will warn us if there is an inconsistent value.</p>
<p>However, we try to always trigger alerts only when it is actionable.
In other words, if an alert sounds, we have something to do.
Sounding alerts that do not require immediate human action generates noise and wastes time.</p>
<p><img src="/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif" alt="general alert"></p>
<h2 id="limit-monitor-and-update-your-dependencies" style="position:relative;"><a href="#limit-monitor-and-update-your-dependencies" aria-label="limit monitor and update your dependencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limit, monitor and update your dependencies</h2>
<p>What goes out of date faster than your shadow in a web project based on javascript technologies are your dependencies.
The ecosystem evolves rapidly and your dependencies can quickly become unmaintained, out of fashion or completely overhauled with big <em>breaking changes</em>.</p>
<p>We therefore try as much as possible to limit our dependencies and avoid adding them unnecessarily.
A dependency is often very easy to add but it can become a real headache to remove.</p>
<p>The graphic component libraries (e.g. React bootstrap, Material Design) are a good example of dependencies that we do not want to introduce.
They can make integration easier at first, but they often freeze the version of your component library later on.
You don’t want to freeze the React version in your application for two form components.</p>
<p>Monitoring is also part of our dependency management routines.
Since the addition of <a href="https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities">reporting security flaws in an NPM package</a>, it is possible to know if a project has a dependency that contains a known security flaw with a simple command.
So we have daily jobs on our projects that run the <code class="language-text">yarn audit</code> command to force us to apply patches.</p>
<blockquote>
<p>Dependency maintenance is greatly facilitated by our E2E test stack which sounds the alarm if the version upgrade generates a regression.</p>
</blockquote>
<p>Today, except for security flaws, we update our dependencies “when we have time”, often at the end of <em>sprint</em>.
We are not satisfied with this because some dependencies can be forgotten.
I personally use tools like <a href="https://classic.yarnpkg.com/en/docs/cli/outdated/"><code class="language-text">yarn outdated</code></a> and <a href="https://dependabot.com/">Dependabot</a> on my personal projects to automate the update of my dependencies.</p>
<h2 id="accepting-your-technical-debt" style="position:relative;"><a href="#accepting-your-technical-debt" aria-label="accepting your technical debt permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Accepting your technical debt</h2>
<p>A project will always accumulate technical debt.
<strong>This is a fact.</strong>
Whether it is voluntary or involuntary debt, a project that resists the years will inevitably accumulate debt.
Even more so, if during all these years you keep adding features.</p>
<p>Since 2014, our best practices, our ways of doing things have evolved well.
Sometimes we decided these changes but sometimes we underwent them (an example, the arrival of functional components with React and the Hooks api).</p>
<p><strong>Our project is not completely <em>“state of art”</em> and we assume it.</strong></p>
<p><img src="/c80d0cd308b5657d54f976a32fe2c811/leak.gif" alt="It will hold!"></p>
<p>We try to prioritize our <em>refactoring</em> topics on the parts of the application on which we have the most concern, the most pain.
We consider that a part of the application that we don’t like but on which we don’t need to work (bring evolutions) doesn’t deserve that we refactor it.</p>
<p>I could name many features of our application that have not evolved functionally for several years.
But since we have covered these features with E2E tests since the beginning, we didn’t really have to touch them.</p>
<p>As said above, the next evolution of a code feature is sometimes its deactivation.
So why spend time rewriting the whole application?</p>
<ul>
<li>In any case, the code becomes “legacy”.</li>
<li>As long as the features are tested, nothing obliges us to refactor everything permanently so that our entire codebase is <em>state of art</em>.</li>
<li>We focus on our <em>pain points</em>, we re-factor what we really need to evolve.</li>
</ul>
<h2 id="to-summarize" style="position:relative;"><a href="#to-summarize" aria-label="to summarize permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To summarize</h2>
<p>The best practices presented here are obviously subjective and will not be perfectly/directly applicable in your contexts.
However, I am convinced that they can probably help you identify what can make your project go from fun to stale.
At Bedrock we have other practices in place that I haven’t listed here but that will be the occasion for a new article sometime.</p>
<p>Finally, if you want me to go into more detail on some of the chapters presented here, don’t hesitate to tell me, I could try to dedicate a specific article to it.</p></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","headline":"Best practices for Web application maintenance","editor":"Antoine Caron","genre":"Tech Blog","wordcount":4098,"url":"https://slashgear.github.io/how-not-to-throw-away-your-web-application-after-two-years/","mainEntityOfPage":"https://slashgear.github.io/how-not-to-throw-away-your-web-application-after-two-years/","datePublished":"2021-09-05","dateCreated":"2021-09-05","dateModified":"2021-09-05","description":"How not to throw away your project after 2 years? Feedback based on best practices applied to the web platform developed at Bedrock Streaming.","articleBody":"<blockquote>\n<p>How not to throw away your application every two years?</p>\n</blockquote>\n<p>Feedback based on best practices applied to the web platform developed at <em><a href=\"https://www.bedrockstreaming.com/\">Bedrock Streaming</a></em></p>\n<h2 id=\"a-bit-of-context\" style=\"position:relative;\"><a href=\"#a-bit-of-context\" aria-label=\"a bit of context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A bit of context</h2>\n<p>At Bedrock Streaming many teams develop and maintain <em>frontend</em> applications for our customers and users.\nSome of those application are not very young.\nIn fact, the application I’m mainly working on is a website whose developments started in 2014.\nI have already mentioned it in different articles of <a href=\"https://slashgear.github.io/\">this blog</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/f13a9/commit-count.avif 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/6d0e0/commit-count.avif 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w\"\n            sizes=\"(max-width: 294px) 100vw, 294px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n            alt=\"screenshot of the number of commits on master of our project 15668\"\n            title=\"screenshot of the number of commits on master of our project 15668\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>You might think: “Oh poor people, maintaining an almost 10 year old application must be hell!”</p>\n<p>Don’t worry, it’s not the case!\nI have worked on projects that are much less old but where the development of new features was much more painful.</p>\n<p>Today the project is technically up to date, we must be on the latest version of React while it had started on a version <em>0.x.x</em>.\nIn this world of web technologies often criticized (eg: the many articles on the <em>Javascript Fatigue</em>) whose tools and practices are constantly evolving, keeping a project “up to date” remains a real challenge.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/f13a9/releases.avif 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/7bd34/releases.avif 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w\"\n            sizes=\"(max-width: 350px) 100vw, 350px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n            alt=\"number of versions of the application 1445\"\n            title=\"number of versions of the application 1445\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Moreover, in the context of this project, in almost 10 years, we have had about 100 contributors.\nSome have only stayed a few months/years.\nHow can we keep the maximum knowledge on “How we do things and how it works?” in such a moving human context?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/f13a9/contributors.avif 200w,\n/static/333e464600eaed01c177c248b9aac0eb/af71e/contributors.avif 400w,\n/static/333e464600eaed01c177c248b9aac0eb/679d2/contributors.avif 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,\n/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,\n/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,\n/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,\n/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w\"\n            sizes=\"(max-width: 690px) 100vw, 690px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n            alt=\"list of the 100 contributors of the project\"\n            title=\"list of the 100 contributors of the project\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>This is what I would like to present you.</p>\n<p>With the help of my colleagues, I have collected the list of good practices that still allow us to maintain this project today.\nWith <a href=\"https://twitter.com/fooragnak\">Florent Dubost</a>, we often thought that it would be interesting to publish it.\nWe hope you will find it useful.</p>\n<h2 id=\"set-rules-and-automate-them\" style=\"position:relative;\"><a href=\"#set-rules-and-automate-them\" aria-label=\"set rules and automate them permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set rules and automate them</h2>\n<p>A project that stands the test of time is first and foremost a set of knowledge that is stacked one on top of the other.\nIt’s like the Kapla tower you used to build as a child, trying to get as high as possible.\nA solid base on which we hope to add as much as possible before a potential fall.</p>\n<p>From the beginning of a project, we have to make important decisions about “How do we want to do things?\nWe think for example about “What format for our files? How do we name this or that thing?”\nWriting accurate documentation of “How we do things” might seem like a good idea.</p>\n<p>However, documentation is cool, but it tends to get outdated very quickly.\nOur decisions evolve, but documentation does not.</p>\n<blockquote>\n<p>“Times change but not READMEs.”</p>\n<p><a href=\"https://twitter.com/omansour\"><em>Olivier Mansour (deputy CTO at Bedrock)</em></a></p>\n</blockquote>\n<p>Automating the checking of each of the rules we impose on ourselves (on our codebase or our processes) is much more durable.\nTo make it simple, we avoid as much as possible to say “We should do things like that”, and we prefer “we’ll code something that checks it for us”.\nOn top of that, on the JS side we are really well equipped with tools like <a href=\"https://eslint.org/\">Eslint</a> that allow us to implement our own rules.</p>\n<p>So the reflex we try to adopt is the following:</p>\n<ul>\n<li>“We should try to do it like this now!”</li>\n<li>“Ok that’s interesting, but how can we make sure we do it like that automatically with our CI (Continuous Integration)?”</li>\n</ul>\n<p>Continuous Integration of a project is the perfect solution to not miss anything on every <em>Pull Request</em> we provide.\nReviews are only easier because you don’t have to worry about all the rules that are already automated.\nIn this model, the review is more for knowledge sharing than for typo copying and other non-compliance with the project conventions.</p>\n<p>In this principle, we must therefore try to banish oral rules.\nThe time of the druids is over, if all the good practices of a project have to be transmitted orally, it will only take longer to guide new developers into your team.</p>\n<p><img src=\"/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif\" alt=\"the recipe of the magic potion of panoramix is lost because secret\"></p>\n<p>A project is not set in stone. These rules evolve with time.\nIt is therefore preferable to add rules that have a script that will <em>autofix</em> the whole codebase intelligently.\nMany Eslint rules offer this, and it is a very important selection criteria when choosing new conventions.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">eslint --fix</code></pre></div>\n<p>A very strict rule that will force you to modify your code manually before each push is annoying in the long run and will annoy your teams.\nWhereas a rule (even a very strict one) that can auto-fix itself at commit time will not be seen as annoying.</p>\n<p><strong>How to decide to add new rules ?</strong></p>\n<p>This question may seem thorny, take for example the case of <code class=\"language-text\">&lt;tab></code> / <code class=\"language-text\">&lt;space></code> in files.\nFor this, we try to avoid the endless debates and follow the trend and rules of the community.\nFor example, <a href=\"https://github.com/M6Web/eslint-tools\">our Eslint configuration base</a> is based on Airbnb’s which seems to have some success in the JS community.\nBut if the rule we want to impose on ourselves is not available in Eslint or other tools, we sometimes prefer not to follow the rule rather than say “We’ll do it without a checking CI”.</p>\n<h3 id=\"the-almost-exhaustive-list-\" style=\"position:relative;\"><a href=\"#the-almost-exhaustive-list-\" aria-label=\"the almost exhaustive list  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <em>almost</em> exhaustive list 🤞</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/f13a9/ci-workflow.avif 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/af71e/ci-workflow.avif 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/0bbb0/ci-workflow.avif 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n            alt=\"Our continuous integration workflow\"\n            title=\"Our continuous integration workflow\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>The file format is tracked managed by <a href=\"https://editorconfig.org/\">Editorconfig</a>, <a href=\"https://prettier.io/\">prettier</a> and <a href=\"https://eslint.org/\">Eslint</a>.\nWe have opensourced <a href=\"https://github.com/M6Web/eslint-tools\">our own configuration</a>, if it is of any use to you.</li>\n<li>We use a <a href=\"https://www.conventionalcommits.org/en/v1.0.0/\">specific commit name</a> to generate our changelog.\nTo make sure devs follow it, a simple step in our CI checks it.</li>\n<li>We don’t want a dev to make our JS bundles very big in production, so we track and measure their size in the CI.\nWe use an in-house tool but we can recommend the [BuildTracker] tool (<a href=\"https://buildtracker.dev/\">https://buildtracker.dev/</a>).</li>\n<li>Test coverage is not an indicator for the team, not all lines have the same need for us to be tested.\nSome teams at Bedrock however follow this indicator which at least has the interest to give a trend.</li>\n<li>Our unit tests obviously run on the CI, these must pass.</li>\n<li>Our functional tests (End to end: E2E) run on Chrome Headless, they must be green.</li>\n<li>The logs of our E2E tests are retrieved and parsed to avoid errors or React warnings (the parsing script is however complicated to maintain)</li>\n<li>Functional tests run in a <em>sandbox</em> where the whole network is proxied.\nWe make sure that our tests do not depend on a non mocked API that could slow down their execution.</li>\n<li>During the E2E tests we check that no image request has generated a 404.</li>\n<li>We perform some <a href=\"https://www.deque.com/axe/\">accessibility checks with Axe</a> during our E2E tests.</li>\n<li>We check some rules on the CSS with <a href=\"https://stylelint.io/\">Stylelint</a> and <a href=\"https://github.com/M6Web/bemlinter\">bemlinter</a> (we don’t use BEM anymore but there is still some style managed in SCSS that we migrate little by little in StyledComponent)</li>\n<li>The project is a monorepo on which we try to maintain the same dependencies versions for each package.\nFor that we have developed a tool that allows to do this check <em><a href=\"https://www.npmjs.com/package/monorepo-dependencies-check\">monorepo-dependencies-check</a></em></li>\n<li>We check that our <code class=\"language-text\">yarn.lock</code> file has not been inadvertently modified or that it has been updated with respect to the modifications of the <code class=\"language-text\">package.json</code>.</li>\n<li><a href=\"https://www.terraform.io/\">Terraform</a> is used to manage our cloud resources, we check that the file format is correct.</li>\n</ul>\n<h2 id=\"test-test-test\" style=\"position:relative;\"><a href=\"#test-test-test\" aria-label=\"test test test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test, test, test</h2>\n<p>I hope that in 2021 it is no longer necessary to explain why automatic testing of your application is essential to make it sustainable.\nIn JS, we are rather well equipped in terms of testing tools today.\nHowever, the eternal question remains:</p>\n<blockquote>\n<p>“What do we want to test?”</p>\n</blockquote>\n<p>Globally if we search on the internet this question, we see that different needs make emerge very different practices and testing tools.\nIt would be very presumptuous to think that there is a good way to automatically test your application.\nThis is why it is preferable to define one or more test strategies that meet defined and limited needs.</p>\n<p>Our test strategies are based on two distinct goals:</p>\n<ul>\n<li>To automate the verification of the functionalities proposed to the users by putting ourselves in their place.</li>\n<li>To provide us with efficient solutions to specify the way we implement our technical solutions to allow us to make them evolve more easily.</li>\n</ul>\n<p>To do this, we perform two “types of tests” that I propose to present here.</p>\n<h3 id=\"our-e2e-tests\" style=\"position:relative;\"><a href=\"#our-e2e-tests\" aria-label=\"our e2e tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our E2E tests</h3>\n<p>We call them “functional tests”, they are End-to-end (E2E) tests on a very efficient technical stack composed of <a href=\"https://cucumber.io/docs/installation/javascript/\">CucumberJS</a>, <a href=\"https://webdriver.io/\">WebdriverIO</a> with <a href=\"https://developers.google.com/web/updates/2017/04/headless-chrome\">ChromeHeadless</a>\nThis is a technical stack set up at the beginning of the project (at the time with <a href=\"https://phantomjs.org/\">PhantomJS</a> for the oldest among you)</p>\n<p>This stack allows us to automate the piloting of tests that control a browser.\nThis browser will perform actions that are as close as possible to what our real users can do while checking how the site reacts.</p>\n<p>A few years ago, this technical stack was rather complicated to set up, but today it is rather simple to do.\n<a href=\"https://github.com/Slashgear/slashgear.github.io\">The site that hosts this blog post</a> is itself proof of this.\nIt only took me about ten minutes to set up this stack with <a href=\"https://webdriver.io/docs/gettingstarted\">the WebdriverIo CLI</a> to verify that my blog is working as expected.</p>\n<p>I recently published <a href=\"https://slashgear.github.io/how-to-setup-e2e-tests-with-webdriverio/\">an article presenting the implementation of this stack</a>.</p>\n<p>So here is an example of an E2E test file to give you an idea:</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> Playground</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Background:</span><span class=\"token important\"> Playground context</span></span>\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> use <span class=\"token string\">\"playground\"</span> test context\n\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario:</span><span class=\"token important\"> Check if playground is reachable</span></span>\n    <span class=\"token atrule\">When</span> As user <span class=\"token string\">\"toto@toto.fr\"</span> I visit the <span class=\"token string\">\"playground\"</span> page\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a <span class=\"token string\">\"visible playground\"</span>\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> should see 4 <span class=\"token string\">\"playground tab\"</span> in <span class=\"token string\">\"playground\"</span>\n\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should not see a <span class=\"token string\">\"visible playground\"</span>\n\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>And it looks like this in local with my Chrome browser!</p>\n<p><img src=\"/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif\" alt=\"Example of functional test execution\"></p>\n<p>Here is a diagram that explains how this stack works:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/f13a9/e2e-archi.avif 200w,\n/static/8de3947494607606cd09c4b4a110bef5/af71e/e2e-archi.avif 400w,\n/static/8de3947494607606cd09c4b4a110bef5/c9875/e2e-archi.avif 800w,\n/static/8de3947494607606cd09c4b4a110bef5/07e28/e2e-archi.avif 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/2babf/e2e-archi.avif 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/5f214/e2e-archi.avif 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,\n/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,\n/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,\n/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,\n/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,\n/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,\n/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png\"\n            alt=\"diagram that explains how our stack works\"\n            title=\"diagram that explains how our stack works\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Today, Bedrock’s web application has over 800 E2E test cases running on each of our <em>Pull Request</em> and the <code class=\"language-text\">master</code> branch.\nThey assure us that we are not introducing any functional regression and that’s just great!</p>\n<p>👍 The positives</p>\n<ul>\n<li>WebdriverIO also allows us to run these same tests on real devices on a daily basis through the paid SAAS service <a href=\"https://www.browserstack.com/\">Browserstack</a>.\nSo we have every day a <em>job</em> that makes sure that our site works correctly on a Chrome last version on Windows 10 and Safari on MacOs.</li>\n<li>These tests allow us to easily document the functionality of the application using the Gherkin language.</li>\n<li>They allow us to reproduce cases that are far from nominal.\nIn a <em>TDD</em> logic, they allow us to advance on the development without having to click for hours.</li>\n<li>These tests allowed us not to break the old version of the site which is still in production for some customers while our efforts are concentrated on the new one.</li>\n<li>They give us real confidence.</li>\n<li>Thanks to our library <a href=\"https://www.npmjs.com/package/superagent-mock\"><em>superagent-mock</em></a>, we can <em>fixturer</em> (plug, mock) all the APIs we depend on and thus even check the error cases.\nAlso, mocking the browser’s XHR layer allows for a significant improvement in test execution time. 🚀</li>\n<li>They give us access to extended uses like:\n<ul>\n<li>checking accessibility rules</li>\n<li>check the browser console logs (to avoid introducing errors or React Warning for example)</li>\n<li>monitoring all network calls of the site through a proxy</li>\n<li>and so on…</li>\n</ul>\n</li>\n</ul>\n<p>👎 The complications</p>\n<ul>\n<li>Maintaining this stack is complicated and expensive.\nSince few resources are published on this domain, we sometimes find ourselves digging for days to fix them 😅.\nSometimes we feel quite alone in having these worries.</li>\n<li>It is very easy to code a so-called <em>flaky</em> E2E test (ie: a test that can fail randomly).\nThey make us think that something is broken.\nThey sometimes take us a long time to stabilize.\nIt is still <strong>much better to remove a test that will not give you a stable result.</strong></li>\n<li>Running all the tests takes a lot of time on our continuous integration.\nWe must regularly work on their optimization so that the feedback they provide you is as fast as possible.\nThese important times also cost money, because we have to run these tests on machines.\nFor your information, the infrastructure of the website (just the hosting of our Node servers + static files + CDN) cost much less than our continuous integration.\nThis obviously makes our Ops team smile! 😊</li>\n<li>The new recruits in our teams have often never done this kind of testing, so there is a <del>struggle</del> phase of learning…</li>\n<li>Some features are sometimes too complicated to test with our E2E stack (for example, payment paths that depend on third parties).\nSo we sometimes fall back on other techniques with Jest, especially with a less unitary scope.</li>\n</ul>\n<h3 id=\"our-unit-tests\" style=\"position:relative;\"><a href=\"#our-unit-tests\" aria-label=\"our unit tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our “unit” tests</h3>\n<p>To complete our functional tests we also have a stack of tests written with <a href=\"https://jestjs.io/en/\">Jest</a>.\nWe call these tests unit tests because we have as a principle to try to always test our JS modules independently from the others.</p>\n<p>Let’s not debate here about “Are these real unit tests?”, there are enough articles on the internet about this topic.</p>\n<p>We use these tests for different reasons that cover needs that our functional tests do not cover:</p>\n<ul>\n<li>to help us develop our JS modules with TDD practices.</li>\n<li>to document and describe how a JS module works.</li>\n<li>test very/too complicated edge cases with our E2E tests.</li>\n<li>facilitate the refactoring of our application by showing us the technical impacts of our modifications.</li>\n</ul>\n<p>With these tests, we put ourselves at the level of a utility function, a Redux action, a reducer, a React component.\nWe rely mainly on <a href=\"https://slashgear.github.io/discover-jest-hidden-feature-automock/\">the <code class=\"language-text\">automock</code> functionality of Jest</a> which allows us to isolate our JS modules when we test.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/f13a9/mocked-modules.avif 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/af71e/mocked-modules.avif 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/c9875/mocked-modules.avif 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/07e28/mocked-modules.avif 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/2babf/mocked-modules.avif 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/f696c/mocked-modules.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg\"\n            alt=\"visual representation of the automock\"\n            title=\"visual representation of the automock\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>The previous image represents the metaphor that allows us to explain our unit testing strategy to newcomers.</p>\n<blockquote>\n<p>You have to imagine that the application is a wall made of unit bricks (our ecmascript modules), our unit tests must test one by one the bricks in total independence from the others.\nOur functional tests are there to test the cement between the bricks.</p>\n</blockquote>\n<p><strong>To summarize, we could say that our E2E tests test <em>what our application should do</em>, and our unit tests make sure to check <em>how it works.</em></strong></p>\n<p>Today there are more than 6000 unit tests that cover the application and allow to limit regressions.</p>\n<p>👍</p>\n<ul>\n<li><a href=\"https://jestjs.io/en/\">Jest</a> is really a great library, fast, complete, well documented.</li>\n<li>Unit tests help us a lot to understand <em>several years later</em> how it all works.</li>\n<li>We always manage to unit test our code, and it complements our E2E tests well.</li>\n<li>The <code class=\"language-text\">automock</code> is really handy for breaking down tests by modules.</li>\n</ul>\n<p>👎</p>\n<ul>\n<li>Sometimes we found ourselves limited by our E2E test stack and couldn’t rely solely on unit tests.\nWe were missing something to be able to make sure that the <em>cement between the bricks</em> worked as we wanted it to.\nFor this, a second test stack <a href=\"https://jestjs.io/en/\">Jest</a> was set up called “integration test” where the <code class=\"language-text\">automock</code> is disabled.</li>\n<li>The abuse of <a href=\"https://jestjs.io/docs/snapshot-testing\"><em>Snapshot</em></a> is dangerous for your health.\nThe use of <em>“Snapshot testing”</em> can save time on the implementation of your tests but can reduce the quality.\nHaving to review a 50 line object in <em>Snapshot</em> is neither easy nor relevant.</li>\n<li>With the depreciation of <a href=\"https://enzymejs.github.io/enzyme/\">EnzymeJS</a>, we are forced to migrate to <a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a>.\nIt is of course possible to unit test components with this new library.\nUnfortunately, this is not really the spirit and the way to do it.\n<a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a> pushes us <a href=\"https://kentcdodds.com/blog/why-i-never-use-shallow-rendering\">not to play with <em>shallow rendering</em></a>.</li>\n</ul>\n<h3 id=\"our-principles\" style=\"position:relative;\"><a href=\"#our-principles\" aria-label=\"our principles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our principles</h3>\n<p>We try to always follow the following rules when asking the question “Should I add tests?“.</p>\n<ol>\n<li>If our <em>Pull Request</em> introduces new user features, we need to integrate E2E test scenarios.\nUnit tests with Jest can complete / replace them accordingly.</li>\n<li>If our <em>Pull Request</em> aims to fix a bug, it means that we are missing a test case.\nWe must therefore try to add an E2E test or, failing that, a unit test.</li>\n</ol>\n<p><em>It is while writing these lines that I think that these principles could very well be automated.</em> 🤣</p>\n<h2 id=\"the-project-stays-the-features-dont\" style=\"position:relative;\"><a href=\"#the-project-stays-the-features-dont\" aria-label=\"the project stays the features dont permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The project stays, the features don’t</h2>\n<blockquote>\n<p>“The second evolution of a feature is very often its removal.”</p>\n</blockquote>\n<p>As a matter of principle, we want to make sure that every new feature in the application does not base its activation on simply being in the codebase.\nTypically, the lifecycle of a feature in a project can be as follows (in a <a href=\"https://guides.github.com/introduction/flow/\">Github Flow</a>):</p>\n<ul>\n<li>a person implements on a branch</li>\n<li>the feature is <em>merged</em> on master</li>\n<li>it is deployed in production</li>\n<li>lives its feature life (sometimes with bugs and fixes)</li>\n<li>the feature is not needed anymore</li>\n<li>a person unravels the code and removes it</li>\n<li>new deployment</li>\n</ul>\n<p>To simplify some steps, we have implemented <em>feature flipping</em> on the project.</p>\n<p><strong>How does it work?</strong></p>\n<p>In our config there is a <em>map</em> key/value that lists all the features of the application associated with their activation status.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  anotherOne<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In our code, we have implemented conditional treatments that say “If this feature is activated then…“.\nThis can change the rendering of a component, change the implementation of a Redux action or disable a route in our <em>react-router</em>.</p>\n<p><strong>But what’s the point?</strong></p>\n<ul>\n<li>We can develop new evolutions progressively by hiding them behind a configuration key.\nWe deliver features in production without activating them.</li>\n<li>In a test environment, we can overload this config to test features that are not yet activated in production.</li>\n<li>In the case of a white label site, we can propose these features to our customers as possible options.</li>\n<li>Before deleting code of a feature, we deactivate it and clean it up without risk.</li>\n<li>Thanks to an in-house tool called <em>Applaunch</em>, this feature flipping config can be overloaded on time in a GUI without deployment.\nThis allows us to activate features without putting the code into production.\nIn the event of an incident, we can deactivate features that have been degraded.</li>\n</ul>\n<p>To give you a more concrete example, between 2018 and 2020 we completely overhauled the application’s interface.\nThis graphical evolution was just a featureFlipping key.\nThe graphical redesign was not a reset of the project, we still live with both versions (as long as the switchover of all our customers is not completed).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/f13a9/compare-v4-v5.avif 200w,\n/static/1148bec58444fa4ccea56315b956b236/af71e/compare-v4-v5.avif 400w,\n/static/1148bec58444fa4ccea56315b956b236/c9875/compare-v4-v5.avif 800w,\n/static/1148bec58444fa4ccea56315b956b236/07e28/compare-v4-v5.avif 1200w,\n/static/1148bec58444fa4ccea56315b956b236/2babf/compare-v4-v5.avif 1600w,\n/static/1148bec58444fa4ccea56315b956b236/f696c/compare-v4-v5.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,\n/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,\n/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,\n/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,\n/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,\n/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,\n/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,\n/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,\n/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,\n/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,\n/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg\"\n            alt=\"screenshot comparing v4 / v5 on 6play\"\n            title=\"screenshot comparing v4 / v5 on 6play\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"ab-testing\" style=\"position:relative;\"><a href=\"#ab-testing\" aria-label=\"ab testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A/B testing</h3>\n<p>Thanks to the great work of the backend and data teams, we were even able to extend the use of <em>feature flipping</em> by making this configuration modifiable for sub-groups of users.</p>\n<p>This allows us to deploy new features on a smaller portion of users in order to compare our <a href=\"https://en.wikipedia.org/wiki/Performance_indicator\">KPI</a>.</p>\n<p>Decision making, technical or product performance improvement, experimentation, the possibilities are numerous and we exploit them more and more.</p>\n<h3 id=\"the-future-flipping\" style=\"position:relative;\"><a href=\"#the-future-flipping\" aria-label=\"the future flipping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <em>future flipping</em>.</h3>\n<blockquote>\n<p>Based on an original idea by <a href=\"https://twitter.com/SuperFlaw\">Florent Lepretre</a>.</p>\n</blockquote>\n<p>We regularly had the need to activate features at <del>very</del> early hours in the future.\nFor that we had to be connected at a precise time on our computer to modify the configuration on the fly.</p>\n<p>To avoid forgetting to do this, or doing it late, we made sure that a configuration key could be activated from a certain date.\nTo do this, we evolved our <em>selector redux</em> which indicated if a feature was activated so that it could handle date formats and compare them to the current time.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    offDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 20:30:00'</span><span class=\"token punctuation\">,</span>\n    onDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 19:30:00'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Many coffees ☕️ at 9am have been saved by <em>future flipping</em>.</p>\n</blockquote>\n<h2 id=\"monitor-measure-alert\" style=\"position:relative;\"><a href=\"#monitor-measure-alert\" aria-label=\"monitor measure alert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitor, Measure, Alert</h2>\n<p>To maintain a project as long as bedrock’s web application, testing, documentation and rigor are not enough.\nYou also need visibility on what works in production.</p>\n<blockquote>\n<p>“How do you know that the application you have in production right now is working as expected?”</p>\n</blockquote>\n<p>We assume that no functionality works until it is monitored.\nToday, monitoring in Bedrock on the frontend side takes the form of different tools and different stacks.\nI could quote <a href=\"https://newrelic.com/\">NewRelic</a>, a <a href=\"https://github.com/statsd/statsd\">Statsd</a>, a <a href=\"https://www.elastic.co/fr/what-is/elk-stack\">ELK</a> stack or even <a href=\"https://youbora.nicepeopleatwork.com/\">Youbora</a> for the video.</p>\n<p>To give you an example, each time a user starts a browsing session we send an anonymous monitoring <em>Hit</em> to increment a counter in Statsd.\nWe then have to define a dashboard that displays the evolution of this number in a graph.\nIf we observe a too important variation, it can allow us to detect an incident.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/f13a9/grafana-monitoring-example.avif 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/af71e/grafana-monitoring-example.avif 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/c9875/grafana-monitoring-example.avif 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/07e28/grafana-monitoring-example.avif 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/2babf/grafana-monitoring-example.avif 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/8d64d/grafana-monitoring-example.avif 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png\"\n            alt=\"example of monitoring dashboard\"\n            title=\"example of monitoring dashboard\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Monitoring also offers us solutions to understand and analyze a bug that occurred in the past.\nUnderstanding an incident, explaining it, finding its root cause are the possibilities that are open to you if you monitor your application.\nMonitoring can also allow you to better communicate with your customers about the impact of an incident and also to estimate the number of impacted users.</p>\n<p>With the multiplication of our customers, monitoring our platforms well is not enough.\nToo much data, too many dashboards to monitor, it becomes very easy to miss something.\nSo we started to complement our metrics monitoring with automatic <em>alerting</em>.\nOnce we have enough confidence in the metrics, we can easily set up alerts that will warn us if there is an inconsistent value.</p>\n<p>However, we try to always trigger alerts only when it is actionable.\nIn other words, if an alert sounds, we have something to do.\nSounding alerts that do not require immediate human action generates noise and wastes time.</p>\n<p><img src=\"/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif\" alt=\"general alert\"></p>\n<h2 id=\"limit-monitor-and-update-your-dependencies\" style=\"position:relative;\"><a href=\"#limit-monitor-and-update-your-dependencies\" aria-label=\"limit monitor and update your dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limit, monitor and update your dependencies</h2>\n<p>What goes out of date faster than your shadow in a web project based on javascript technologies are your dependencies.\nThe ecosystem evolves rapidly and your dependencies can quickly become unmaintained, out of fashion or completely overhauled with big <em>breaking changes</em>.</p>\n<p>We therefore try as much as possible to limit our dependencies and avoid adding them unnecessarily.\nA dependency is often very easy to add but it can become a real headache to remove.</p>\n<p>The graphic component libraries (e.g. React bootstrap, Material Design) are a good example of dependencies that we do not want to introduce.\nThey can make integration easier at first, but they often freeze the version of your component library later on.\nYou don’t want to freeze the React version in your application for two form components.</p>\n<p>Monitoring is also part of our dependency management routines.\nSince the addition of <a href=\"https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities\">reporting security flaws in an NPM package</a>, it is possible to know if a project has a dependency that contains a known security flaw with a simple command.\nSo we have daily jobs on our projects that run the <code class=\"language-text\">yarn audit</code> command to force us to apply patches.</p>\n<blockquote>\n<p>Dependency maintenance is greatly facilitated by our E2E test stack which sounds the alarm if the version upgrade generates a regression.</p>\n</blockquote>\n<p>Today, except for security flaws, we update our dependencies “when we have time”, often at the end of <em>sprint</em>.\nWe are not satisfied with this because some dependencies can be forgotten.\nI personally use tools like <a href=\"https://classic.yarnpkg.com/en/docs/cli/outdated/\"><code class=\"language-text\">yarn outdated</code></a> and <a href=\"https://dependabot.com/\">Dependabot</a> on my personal projects to automate the update of my dependencies.</p>\n<h2 id=\"accepting-your-technical-debt\" style=\"position:relative;\"><a href=\"#accepting-your-technical-debt\" aria-label=\"accepting your technical debt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accepting your technical debt</h2>\n<p>A project will always accumulate technical debt.\n<strong>This is a fact.</strong>\nWhether it is voluntary or involuntary debt, a project that resists the years will inevitably accumulate debt.\nEven more so, if during all these years you keep adding features.</p>\n<p>Since 2014, our best practices, our ways of doing things have evolved well.\nSometimes we decided these changes but sometimes we underwent them (an example, the arrival of functional components with React and the Hooks api).</p>\n<p><strong>Our project is not completely <em>“state of art”</em> and we assume it.</strong></p>\n<p><img src=\"/c80d0cd308b5657d54f976a32fe2c811/leak.gif\" alt=\"It will hold!\"></p>\n<p>We try to prioritize our <em>refactoring</em> topics on the parts of the application on which we have the most concern, the most pain.\nWe consider that a part of the application that we don’t like but on which we don’t need to work (bring evolutions) doesn’t deserve that we refactor it.</p>\n<p>I could name many features of our application that have not evolved functionally for several years.\nBut since we have covered these features with E2E tests since the beginning, we didn’t really have to touch them.</p>\n<p>As said above, the next evolution of a code feature is sometimes its deactivation.\nSo why spend time rewriting the whole application?</p>\n<ul>\n<li>In any case, the code becomes “legacy”.</li>\n<li>As long as the features are tested, nothing obliges us to refactor everything permanently so that our entire codebase is <em>state of art</em>.</li>\n<li>We focus on our <em>pain points</em>, we re-factor what we really need to evolve.</li>\n</ul>\n<h2 id=\"to-summarize\" style=\"position:relative;\"><a href=\"#to-summarize\" aria-label=\"to summarize permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To summarize</h2>\n<p>The best practices presented here are obviously subjective and will not be perfectly/directly applicable in your contexts.\nHowever, I am convinced that they can probably help you identify what can make your project go from fun to stale.\nAt Bedrock we have other practices in place that I haven’t listed here but that will be the occasion for a new article sometime.</p>\n<p>Finally, if you want me to go into more detail on some of the chapters presented here, don’t hesitate to tell me, I could try to dedicate a specific article to it.</p>","image":["https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/6edcc/bedrock.jpg","https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/e14ae/bedrock.jpg","https://slashgear.github.io/static/706dca8ff24a680a04318fad5f7a023c/db124/bedrock.jpg"],"keywords":["web","javascript","bedrock"],"author":{"@type":"Person","name":"Antoine Caron"},"publisher":{"@type":"Organization","name":"Antoine Caron","logo":{"@type":"ImageObject","url":"https://slashgear.github.io/static/picture_of_me-cb64a6913d2e31dbb5dab1f4d113d077.jpg"}}}</script><div class="editOnGithubcomponent__Wrapper-sc-zzrn7j-0 vwLCS"><a href="https://github.com/Slashgear/slashgear.github.io/edit/source/src/pages/how-not-to-throw-away-your-web-application-after-two-years/index.md" target="_blank">Edit this page on Github</a></div><hr style="margin-bottom:1.75rem"/><div id="bio" class="biocomponent__Wrapper-sc-1oo1jyu-0 iGlUyE"><div class="biocomponent__Image-sc-1oo1jyu-1 jfWtSW gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:150px;height:150px;margin:0 1.2rem 0 0"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMFAf/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAG3IRvHRVI4AjTXCH//xAAcEAACAwADAQAAAAAAAAAAAAABAwACEQQSEyH/2gAIAQEAAQUC6wYZku3yCW1pAY761gycU6n/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAwEBPwFRMpn/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIQEv/aAAgBAgEBPwFzNUj/xAAdEAABAgcAAAAAAAAAAAAAAAAAASECEBExUWFx/9oACAEBAAY/AhpUV9GCxF0QQ//EABwQAAICAgMAAAAAAAAAAAAAAAABESEQYUFRsf/aAAgBAQABPyFCLOFTLjQbQ1B6JVPsazoJp6GSuKP/2gAMAwEAAgADAAAAEGQPAv/EABkRAAMAAwAAAAAAAAAAAAAAAAABERAxQf/aAAgBAwEBPxBMbuHDY//EABgRAAIDAAAAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EKGlLB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFxYZHw/9oACAEBAAE/EKNkyAJaeoOtRKluqcd8RmOi2rb9uUoCJYmDFbmiHgMEWoc82bH3R0M//9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/6d4845a20dbe813a1019a37775ca875f/763d7/picture_of_me.webp 1x,
/static/6d4845a20dbe813a1019a37775ca875f/13190/picture_of_me.webp 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/9a9e1/picture_of_me.webp 2x" /><source srcset="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg 1x,
/static/6d4845a20dbe813a1019a37775ca875f/b4472/picture_of_me.jpg 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/18255/picture_of_me.jpg 2x" /><img loading="lazy" width="150" height="150" srcset="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg 1x,
/static/6d4845a20dbe813a1019a37775ca875f/b4472/picture_of_me.jpg 1.5x,
/static/6d4845a20dbe813a1019a37775ca875f/18255/picture_of_me.jpg 2x" src="/static/6d4845a20dbe813a1019a37775ca875f/81545/picture_of_me.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div><p>Written by <strong>Antoine Caron</strong> who lives and works in Lyon (France) building useful things at <a href="https://www.bedrockstreaming.com/">Bedrock</a>.
You should follow him <a href="https://twitter.com/Slashgear_">on Twitter</a>.
Take a look at <a href="/friends-you-should-follow">my friends websites</a>.
You could also <a href="/conferences">take a look at the conferences I gave</a>.
If you want to see my professional background, <a href="/resume">my resume is available here</a>.</p></div></div><a id="foundation" target="_blank" rel="noreferrer" href="https://www.fondation-abbe-pierre.fr/" class="fundationcomponent__Link-sc-pkqxf3-3 ePDrnP"><div class="fundationcomponent__TextWrapper-sc-pkqxf3-1 ccXtUA">If you like some content of this blog, or it has helped you, please consider donating to the Abbé Pierre Foundation which I personally support.<br/><blockquote class="fundationcomponent__Blocquote-sc-pkqxf3-2 hVknCU">&quot;We are only ever happy in the happiness we give. To give is to receive.&quot;</blockquote></div><div class="fundationcomponent__Logo-sc-pkqxf3-0 bHLACg gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:151px;height:150px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAECAwQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAMBBP/aAAwDAQACEAMQAAAB6dY2l0+esnashAb/AP/EABoQAAIDAQEAAAAAAAAAAAAAAAIRAAEDECL/2gAIAQEAAQUCzEbs8hrmJKaH4JON8//EABYRAQEBAAAAAAAAAAAAAAAAAAESIP/aAAgBAwEBPwFWsf/EABYRAQEBAAAAAAAAAAAAAAAAABEBIP/aAAgBAgEBPwGBj//EAB4QAAEDBAMAAAAAAAAAAAAAAAEAAhEQEiAhIjFB/9oACAEBAAY/AuSNp68odS5EOEOWsP/EABoQAQEBAAMBAAAAAAAAAAAAAAERABAxQSH/2gAIAQEAAT8hZ1DEJL2XBQKOshYB8nup4GFGjHK7K8f/2gAMAwEAAgADAAAAEPQ4wv/EABoRAAICAwAAAAAAAAAAAAAAAAABECERgfD/2gAIAQMBAT8Qq12hWjEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAASAx/9oACAECAQE/EAqn/8QAHBABAAICAwEAAAAAAAAAAAAAAREhADEQUWHR/9oACAEBAAE/EKk0IJhVyIm5BNecB1Jj38yvtWwtcOJKaQPa3hpQaRhyKrCCWYOP/9k=" alt="logo de la fondation abbé pierre" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/907eb9bd5732972738e42845f14772cc/7307a/abbe_pierre.webp 1x,
/static/907eb9bd5732972738e42845f14772cc/305a6/abbe_pierre.webp 1.5x,
/static/907eb9bd5732972738e42845f14772cc/75eb0/abbe_pierre.webp 2x" /><source srcset="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg 1x,
/static/907eb9bd5732972738e42845f14772cc/20600/abbe_pierre.jpg 1.5x,
/static/907eb9bd5732972738e42845f14772cc/e48d1/abbe_pierre.jpg 2x" /><img loading="lazy" width="151" height="150" srcset="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg 1x,
/static/907eb9bd5732972738e42845f14772cc/20600/abbe_pierre.jpg 1.5x,
/static/907eb9bd5732972738e42845f14772cc/e48d1/abbe_pierre.jpg 2x" src="/static/907eb9bd5732972738e42845f14772cc/e2676/abbe_pierre.jpg" alt="logo de la fondation abbé pierre" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><aside><header><h2>Related posts:</h2></header><div data-testid="related-post" class="blog-post__RelatedPost-sc-hrojot-1 dRHucu"><h3 style="margin-bottom:0.4375rem"><a style="box-shadow:none" href="/react-redux-pitfalls-and-best-pratices/">React/Redux: pitfalls and best practices</a></h3><small><time dateTime="2020-04-04">April 04, 2020</time></small><small style="margin:0 1rem"><span role="img" aria-label="Time to read">🕐</span>12<!-- --> min</small><small><a style="margin-right:0.5rem" href="/en/react">#<!-- -->react</a><a style="margin-right:0.5rem" href="/en/redux">#<!-- -->redux</a><a style="margin-right:0.5rem" href="/en/web">#<!-- -->web</a></small><p>After 2 years using React with Redux for the video platform 6play, I was able to identify good practices and pitfalls to avoid at all costs…</p></div><div data-testid="related-post" class="blog-post__RelatedPost-sc-hrojot-1 dRHucu"><h3 style="margin-bottom:0.4375rem"><a style="box-shadow:none" href="/stop-dev-to/">Why you should not publish content on Dev.to?</a></h3><small><time dateTime="2019-07-18">July 18, 2019</time></small><small style="margin:0 1rem"><span role="img" aria-label="Time to read">🕐</span>3<!-- --> min</small><small><a style="margin-right:0.5rem" href="/en/publication">#<!-- -->publication</a><a style="margin-right:0.5rem" href="/en/web">#<!-- -->web</a></small><p>First things first: I’m not an Internet warrior. I do not wish to make Dev.to’s judgment here nor am I trying to convince you that this…</p></div></aside></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-77930802-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-77930802-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-not-to-throw-away-your-web-application-after-two-years/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0dfc0587dc8dac5c5bc5.js"],"app":["/app-29446ea12b9052a1e534.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-bc7d028465e33e12b2ad.js"],"component---src-pages-404-js":["/component---src-pages-404-js-ff263d1ab8d3225534ed.js"],"component---src-pages-conferences-js":["/component---src-pages-conferences-js-d9b149bd446f9d50da84.js"],"component---src-pages-friends-you-should-follow-js":["/component---src-pages-friends-you-should-follow-js-a9f8fcd55eda27521a56.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-c4b1d3e9a0d61370f8b9.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-5247f685a6ab8287416c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-96c8a4914bf7465648bf.js"],"component---src-templates-tag-list-js":["/component---src-templates-tag-list-js-e1134768bcfbdf2cd9ff.js"]};/*]]>*/</script><script src="/polyfill-0dfc0587dc8dac5c5bc5.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-96c8a4914bf7465648bf.js" async=""></script><script src="/079251e69bb3615baf60b97640b02e16a0d9c5f7-8292756883167f7e5025.js" async=""></script><script src="/0998afcbd8473179214d67a707c226f3df286a85-81cd4d48cf83aab2a9e8.js" async=""></script><script src="/0f10e620f25f6db15e9cdb25730d936ff5fc9d8b-c71d6ceaa2a3827045c8.js" async=""></script><script src="/407648b791f0caf7f45b6dd3573fbfcb3f43f3b8-66117943a52744bd0a0a.js" async=""></script><script src="/90b60a54e0da56b4a5a70b026a0daf8c49da01f5-8c2eca738b0d7e3d6512.js" async=""></script><script src="/app-29446ea12b9052a1e534.js" async=""></script><script src="/framework-af7bfe51d22328080f87.js" async=""></script><script src="/webpack-runtime-47d124455bcd4367b045.js" async=""></script></body></html>