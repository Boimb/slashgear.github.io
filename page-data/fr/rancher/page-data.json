{"componentChunkName":"component---src-templates-blog-post-js","path":"/fr/rancher/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://slashgear.github.io"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille à Lyon et développe des choses utiles à <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a></p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"71230cb2-1f00-5018-b94d-adf66ef35d34","excerpt":"Mon expérience en tant que stagiaire chez Zenika m’a amené à utiliser\nRancher pour orchestrer mes conteneurs Docker. Je vous présente ici un…","html":"<p>Mon expérience en tant que stagiaire chez Zenika m’a amené à utiliser\nRancher pour orchestrer mes conteneurs Docker. Je vous présente ici un\ncondensé de mon expérience avec cet outil, de son intérêt et de ses\npoints forts, par le biais d’un petit “How to“ sur comment déployer son\napplication ?</p>\n<p>On constate que de plus en plus d’utilisateurs Docker cherchent à\nmanipuler plus facilement leurs conteneurs et à mettre en place du\ndéploiement continu. L’environnement technique autour de la\nproblématique d’orchestration des modèles CaaS (Container as a Service)\nest très large et il est parfois difficile de s’y retrouver.</p>\n<h2 id=\"quen-est-t-il-de-rancher-\" style=\"position:relative;\"><a href=\"#quen-est-t-il-de-rancher-\" aria-label=\"quen est t il de rancher  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Qu’en est-t-il de Rancher ?</h2>\n<h3 id=\"késako\" style=\"position:relative;\"><a href=\"#k%C3%A9sako\" aria-label=\"késako permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Késako</h3>\n<p>Rancher, projet open-source créé par la société Rancher Labs est un\noutil gratuit d’orchestration de conteneurs Docker. Il permet de\nfacilement déployer des conteneurs Docker sur des machines possédant\nDocker. Grâce à une configuration simple et complète, il permet de lier\nses conteneurs afin de composer des architectures de services aisément.\nIl peut déployer des containeurs sur des services cloud comme AWS,\nAzure, DigitalOcean mais aussi sur des machines personnalisées\npossédant Docker tout en s’appuyant sur docker-machine.</p>\n<h3 id=\"une-installation-assez-simple\" style=\"position:relative;\"><a href=\"#une-installation-assez-simple\" aria-label=\"une installation assez simple permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Une installation assez simple</h3>\n<p>Pour installer Rancher, à ce jour il suffit de posséder une machine\nlinux 64-bit avec au moins 1GB de mémoire vive.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> docker run -d --restart<span class=\"token operator\">=</span>always -p <span class=\"token number\">8080</span>:8080 rancher/server</code></pre></div>\n<p>Après quelques minutes d’installation, le server Rancher est disponible\nsur le port 8080 de votre machine (l’image contient une base MySQL, un\nZookeeper, Redis, et le serveur rancher). Vous pouvez vous y connecter\ncar l’accès est par défaut ouvert à tous. Par la suite, vous pourrez\nactiver l’authentification,et ainsi facilement configurer des comptes\npour vos utilisateurs.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7044fcf8b2240abbf24b959028a4f610/77f8f/environnement.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz32R3UrDQBCF9/0fxAuvfATRFgS90BupSFNM27T5z2Z/ZmZ3kzht0lasOHwMhxkWzpwV81U2X+WzKJutJh6j/3hYprcvHzdP73fPC2GsRQTvHDOWd+SnTsG74Nyhn+DhLi/iXbpMUhGtk6/tvtGmNfaMAdAAygLrsf+EVwZQWysQyVoIoRsu1WcK4kKyoy4EROz7frgqH4K4ng59/xptNnkVx7FSaptsQwh/P/bheKC/QM4RoiNuxBppTML/AohEWtalbH9RSFVKlVX1Js2LRk7DhpGVbEfKRopUQqmwUHAEi5POFWS1kkorTohz0paIQvDGogUEQF6J9T7LqqaQLdsDDg+J/ZD3yIbZP1/BmvzQdYt9ff+ZaKOzumELjGBved1UrbL8rz6MwSKn0U35oz9MWWylfUtqbcz58TdPyzi0WEB+zAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/7044fcf8b2240abbf24b959028a4f610/ba381/environnement.webp 200w,\n/static/7044fcf8b2240abbf24b959028a4f610/7f61c/environnement.webp 400w,\n/static/7044fcf8b2240abbf24b959028a4f610/d00b9/environnement.webp 800w,\n/static/7044fcf8b2240abbf24b959028a4f610/92f8c/environnement.webp 1200w,\n/static/7044fcf8b2240abbf24b959028a4f610/87c73/environnement.webp 1353w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/7044fcf8b2240abbf24b959028a4f610/772e8/environnement.png 200w,\n/static/7044fcf8b2240abbf24b959028a4f610/e17e5/environnement.png 400w,\n/static/7044fcf8b2240abbf24b959028a4f610/5a190/environnement.png 800w,\n/static/7044fcf8b2240abbf24b959028a4f610/c1b63/environnement.png 1200w,\n/static/7044fcf8b2240abbf24b959028a4f610/77f8f/environnement.png 1353w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/7044fcf8b2240abbf24b959028a4f610/5a190/environnement.png\"\n          alt=\"Interface graphique de Rancher\"\n          title=\"Interface graphique de Rancher\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h3 id=\"déployer-une-application-simple-avec-rancher\" style=\"position:relative;\"><a href=\"#d%C3%A9ployer-une-application-simple-avec-rancher\" aria-label=\"déployer une application simple avec rancher permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Déployer une application simple avec Rancher</h3>\n<p>Après l’IaaS, le SaaS, le PaaS, le DaaS et Patricia Kaas, voila\nmaintenant venue l’ère du Caas (Container as a Service). L’objectif\nici est de conteneuriser les services de son(ses) application(s) et de\nles faire interagir. Pour montrer simplement la mécanique de Rancher,\nj’ai choisi de vous présenter le déploiement d’une application web très\nsimple nommée whoami, disponible sur le Docker Hub (développé en Go\npar Emile Vauge).</p>\n<p>Pour ce faire, je vais vous expliquer la méthode de création de\nservices par l’interface graphique. Sachez que l’on peut interagir\navec Rancher par l’intermédiaire d’un outil en ligne de commande\n(rancher-cli,encore très limité pour l’instant) ou d’API REST.</p>\n<h4 id=\"ajouter-des-hosts-sur-lesquels-déployer\" style=\"position:relative;\"><a href=\"#ajouter-des-hosts-sur-lesquels-d%C3%A9ployer\" aria-label=\"ajouter des hosts sur lesquels déployer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ajouter des hosts sur lesquels déployer</h4>\n<p>Dans un premier temps il faut définir des machines sur lesquelles\ndéployer votre application.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/09dee4224d527f5831843599f577d8b3/7970d/machine.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABX0lEQVQoz1WQy07DMBBF8/9fwY4NUCgrPoBFhZAobdVFhZo2rd3Ej7EdO0nTPBg7EIp0dHU9mquZcXT/trl920zm26fPeLqIH+fx5GM7XSbPq8N05XU0qL6+TB7m8c3r8m62joqy6C9V37eermnqqm/rvruESuMN0gbtmlDsAk13OUfuXPfeovS6rHcMhJSglCvK3Fq0jIs0Y0KCBCirChvbzneX5zoSOndlZYsSAZMrjwVPbpwz1uncautyV5igQyeCxYhwyUExUJmEhKbbA42P5EDpifNUAlcaYdeE5gEMg9ChA9SenPY0JSljUnAArAzhEQae8RlRASK4DNSBScIVERqhXtWRK7+XVCcwmXHKFmAMG8MnqcTvbsSH5ZEJhOI52uCPDHD8DOved+kiyXT+k/8LI5RzknkwjJqFm0WAg9bGrI/ZhvJx+L/w1W04KH9Z7WZfBM1wPCrmr9f+BgFwKpCBdun3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/09dee4224d527f5831843599f577d8b3/ba381/machine.webp 200w,\n/static/09dee4224d527f5831843599f577d8b3/7f61c/machine.webp 400w,\n/static/09dee4224d527f5831843599f577d8b3/d00b9/machine.webp 800w,\n/static/09dee4224d527f5831843599f577d8b3/92f8c/machine.webp 1200w,\n/static/09dee4224d527f5831843599f577d8b3/fad48/machine.webp 1600w,\n/static/09dee4224d527f5831843599f577d8b3/36414/machine.webp 1908w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/09dee4224d527f5831843599f577d8b3/772e8/machine.png 200w,\n/static/09dee4224d527f5831843599f577d8b3/e17e5/machine.png 400w,\n/static/09dee4224d527f5831843599f577d8b3/5a190/machine.png 800w,\n/static/09dee4224d527f5831843599f577d8b3/c1b63/machine.png 1200w,\n/static/09dee4224d527f5831843599f577d8b3/29007/machine.png 1600w,\n/static/09dee4224d527f5831843599f577d8b3/7970d/machine.png 1908w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/09dee4224d527f5831843599f577d8b3/5a190/machine.png\"\n          alt=\"Création de machines\"\n          title=\"Création de machines\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Rancher propose des connecteurs à plusieurs services cloud du web comme\nAmazon EC2, Azure, Digital Ocean, mais vous pouvez également ajouter\nn’importe quelle machine disposant de docker comme “host” Rancher\n(“Custom”).</p>\n<p>Pour l’exemple, j’ai ajouté deux machines au cluster nommées node1 et\nnode2, et j’ai ajouté l’hôte Rancher lui-même self\n(c’est possible mais non recommandé).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bcd00c6977b0abb9aa112407e39372d8/36c33/host.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQoz41Ry27UMBTNJ4DULhBCArFnz8dV5SW64SuQWMFMq0r9CdggFgwdBpo0yTTJ5GH72o6dx4TjiTozIJC4OnJyr318z7n2np68PziaPHx1dng8efAS6/TR6/Mnby4en5zj//6Ls4Pj6eGz6b3np3ePPtz5HZ607SzhpW78rLyMspTMIikWN3lG9XUhZmF6I/RVVl3GK2z9AY+EePtx8e7TDyIpSCqlBRHjJKUChCCtNba4EErrujb1XnhhnEw+X51+CUpBJRMlp4IJDppUFUcqCgdChZPCFpBXfIQ3DEO/Xg/DGmGsbdq27bq+723TuNVag5Ir9Fi6tsWZsQHgyLVtJBTVBoSR2TSNU2iM3dyFM13XNe5il45MR+7bFl4UAh/jOhvjjMG91BopE7RMszQvRmy83HYO4uSbH8798DrJllkBJ/MgnvvR9yBCJSnKrGRff4YzPwqWWZiukO7IXOpoxSpSpDTEo3vGKM4Zw8yUVk6NZVJTbeAHBhE72fCDMam6HmcFn/AMAlhInQvrBrHxZMFHZUdmXKwqvn2A8Wf/SSCSCVkJqtwqq1vNG9mC8kps839he+M+/pf8V/wCUxrApLllq8QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/bcd00c6977b0abb9aa112407e39372d8/ba381/host.webp 200w,\n/static/bcd00c6977b0abb9aa112407e39372d8/7f61c/host.webp 400w,\n/static/bcd00c6977b0abb9aa112407e39372d8/d00b9/host.webp 800w,\n/static/bcd00c6977b0abb9aa112407e39372d8/30833/host.webp 946w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/bcd00c6977b0abb9aa112407e39372d8/772e8/host.png 200w,\n/static/bcd00c6977b0abb9aa112407e39372d8/e17e5/host.png 400w,\n/static/bcd00c6977b0abb9aa112407e39372d8/5a190/host.png 800w,\n/static/bcd00c6977b0abb9aa112407e39372d8/36c33/host.png 946w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/bcd00c6977b0abb9aa112407e39372d8/5a190/host.png\"\n          alt=\"Hosts\"\n          title=\"Hosts\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h4 id=\"créer-son-service\" style=\"position:relative;\"><a href=\"#cr%C3%A9er-son-service\" aria-label=\"créer son service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Créer son service</h4>\n<p>Il faut maintenant créer une stack pour accueillir notre service whoami.\nDans la logique Rancher, une stack est un ensemble de services.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c862fa4069b40c90035b4b3a02c9addd/9e0ed/stack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQoz43O3U6DMBQH8L6zz+DHtnfxVo0TLzXxxmSQLJlG2JjJxqAtBUpPT8GOZUuRxfjP76I5pz2nZPTwfv04mzwHYy+YeMHI82+e/Kupf/mX2cXt6/jujYAsUddti33maFjpiqi0kqQGrdFoYwB7lMZSgagkIGocdNFI0ETWylKgm2OMsbPbFS2n8zUvKtvViI2TtmlewmS+YcTutWzafozZX7PB08lJ9zVN8qLiouwWgEsq8L9pXtm98KtlKYCqrsmOcSuhLKHctcnYfRBG2zQ91+0wsqWHx/wwxVUIkbIz9ROScsGEoPle1rfjeTYousgiij+W8cKK4q/VOoz/5bO7/wMl3yvrM8nuNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/c862fa4069b40c90035b4b3a02c9addd/ba381/stack.webp 200w,\n/static/c862fa4069b40c90035b4b3a02c9addd/7f61c/stack.webp 400w,\n/static/c862fa4069b40c90035b4b3a02c9addd/d00b9/stack.webp 800w,\n/static/c862fa4069b40c90035b4b3a02c9addd/92f8c/stack.webp 1200w,\n/static/c862fa4069b40c90035b4b3a02c9addd/fad48/stack.webp 1600w,\n/static/c862fa4069b40c90035b4b3a02c9addd/93f82/stack.webp 1923w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/c862fa4069b40c90035b4b3a02c9addd/772e8/stack.png 200w,\n/static/c862fa4069b40c90035b4b3a02c9addd/e17e5/stack.png 400w,\n/static/c862fa4069b40c90035b4b3a02c9addd/5a190/stack.png 800w,\n/static/c862fa4069b40c90035b4b3a02c9addd/c1b63/stack.png 1200w,\n/static/c862fa4069b40c90035b4b3a02c9addd/29007/stack.png 1600w,\n/static/c862fa4069b40c90035b4b3a02c9addd/9e0ed/stack.png 1923w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/c862fa4069b40c90035b4b3a02c9addd/5a190/stack.png\"\n          alt=\"Stack\"\n          title=\"Stack\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>On peut remarquer que pour l’ajout d’une stack, on peut importer un\nfichier <code class=\"language-text\">docker-compose.yml</code> et un fichier <code class=\"language-text\">rancher-compose.yml</code>.</p>\n<p>Le fichier docker-compose.yml définit la structure de la stack,\nl’ensemble de ses services ainsi que leurs configurations.\nCe fichier est natif de l’api Docker Compose.`</p>\n<p>Le fichier rancher-compose est un “add-on” au docker compose,\nil permet de configurer des paramètres Rancher comme la configuration\ndes loadbalancer (HA-Proxy) et la scalabilité horizontale des services.\nCes deux fichiers sont exportables à tout moment, cela peut-être très\npratique pour une réinstallation (par exemple, voici la\n<a href=\"https://drive.google.com/file/d/0B0NhGeba-vjZVnJldGRYUTBZaGs/view\">configuration de la stack</a>\nqui est installée dans cette partie).</p>\n<p>Une fois la stack créée en lui donnant uniquement un nom, il faut\najouter notre service whoami. Pour cela il suffit de cliquer sur\n“Add service” et de le définir comme cela.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/48d761834dc232cc35b22955f7da9c22/26c3a/whoami.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVQoz3WRy07DMBBF/f/fwD+gthSJLXuEgIYNLCpSKChpGr/Hr5jblEppUkZHdjLXdzITs9uH99nzevm6WRagvFmVi6Kcr8pZz3zCothcP62v7l/uHt9YIJNTyLk7kU6MXofEnEPwxKQ2XGlNTltyIQqK3BA5V+7ER82NJWUspBHmsDqGzaNKTwjR93Qxbbn+bCQR+YMQh/h+hZHhMzGhk9ydxzEDY+pSNwmoznu0rblUKD6SU8+06MAcGMYDKJPOAyeQRXsXzWgWv4lBz/8EzDHFi5Jy/qtVTGlVNc22qr6r+shPDXZC672UXCk8TMGwQmlmyXIhQctF07Zgz0UrBAa5yN+9xKCs/QVZZj614idMjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/48d761834dc232cc35b22955f7da9c22/ba381/whoami.webp 200w,\n/static/48d761834dc232cc35b22955f7da9c22/7f61c/whoami.webp 400w,\n/static/48d761834dc232cc35b22955f7da9c22/d00b9/whoami.webp 800w,\n/static/48d761834dc232cc35b22955f7da9c22/92f8c/whoami.webp 1200w,\n/static/48d761834dc232cc35b22955f7da9c22/fad48/whoami.webp 1600w,\n/static/48d761834dc232cc35b22955f7da9c22/854a9/whoami.webp 1907w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/48d761834dc232cc35b22955f7da9c22/772e8/whoami.png 200w,\n/static/48d761834dc232cc35b22955f7da9c22/e17e5/whoami.png 400w,\n/static/48d761834dc232cc35b22955f7da9c22/5a190/whoami.png 800w,\n/static/48d761834dc232cc35b22955f7da9c22/c1b63/whoami.png 1200w,\n/static/48d761834dc232cc35b22955f7da9c22/29007/whoami.png 1600w,\n/static/48d761834dc232cc35b22955f7da9c22/26c3a/whoami.png 1907w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/48d761834dc232cc35b22955f7da9c22/5a190/whoami.png\"\n          alt=\"Whoami example\"\n          title=\"Whoami example\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>On remarque que seul le nom du service, l’image docker et le “port map”\nont été définis (ie: c’est un exemple simple, vous pouvez voir par les\nonglets du bas que la configuration peut être beaucoup plus poussée,\ngestion des volumes, du network du service, des HealthCheck).</p>\n<p>Après cette simple configuration, il suffira de cliquer sur “Create” et\ninformagiquement votre service sera déployé sur un host choisi par Cattle.</p>\n<p>Vous allez me dire, “qu’est ce que Cattle ?”, et vous aurez raison.\nCattle est l’orchestrateur par défaut utilisé par Rancher. Il est\nmaintenu par l’équipe de Rancher et le projet est open-source et\ndisponible sur Github.</p>\n<p>Sachez que Rancher fonctionne également avec Kubernetes, Swarm et\nMesos mais pour cet article, je me suis limité à l’utilisation de Cattle.</p>\n<h4 id=\"scaler-et-loadbalancer\" style=\"position:relative;\"><a href=\"#scaler-et-loadbalancer\" aria-label=\"scaler et loadbalancer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scaler et Loadbalancer</h4>\n<p>Après quelques temps de démarrage, votre service whoami devrait être\ndisponible.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/b79a5/start.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVQoz62PzU7DQAyE9/3Fe/ASFTcOTQE1K7Y5VYnUiDZNlvXaXpsjDj+iSC1CCOmTD+OZke12Y0pUWBSLnEJFTaQimUVUq3a4vm/7mIm5ezrsx6ntWrePAMSmZS5fECckw1aJWFUXTX91E7aHqCrDs2k8HAdn9cDFEH0pn5g9Io6ACZlE3kU7J89HzWZrL6rumGA8T54gn11NCSyFxM4cf8AqkP8nnD/UmPEXnISjxRLMEy79//3nN/8cruqwrMPKh6UPlQ/rx6YOP+FDc+c3tw++2/WvQ5fyIHUcLhMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/ba381/start.webp 200w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/7f61c/start.webp 400w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/d00b9/start.webp 800w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/92f8c/start.webp 1200w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/1177a/start.webp 1372w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/772e8/start.png 200w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/e17e5/start.png 400w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/5a190/start.png 800w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/c1b63/start.png 1200w,\n/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/b79a5/start.png 1372w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/e8e9c7193ddbbf5ec9e4e6d47167aa26/5a190/start.png\"\n          alt=\"Start\"\n          title=\"Start\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Si vous cliquez sur le “80”, vous devez accéder au service whoami.\nIl vous donnera plusieurs informations sur lui-même, notamment son nom.</p>\n<p>Le but maintenant est de scaler notre service, afin de le distribuer\nsur plusieurs machines.</p>\n<p>Dans le détail du service, on peut voir que la scale est actuellement\ndéfinie à 1. Il suffirait donc de l’augmenter ? Et bien non, le service\nque nous venons de définir occupe le port 80 de la machine. Il ne\npourrait donc pas être disponible plus d’une fois par machine. Et c’est\nlà l’une des problématiques des microservices : l’allocation dynamique\nde port et la “connaissance” des services par le loadbalancer. Rancher\noffre une solution simple à ce problème, il ne faut plus réserver de\nport pour son application, le loadbalancer va connaître les services\npar l’orchestrateur.</p>\n<p>Il faut donc supprimer la configuration du port statique du service.</p>\n<p>Une fois le port libéré , il faut donc créer un loadbalancer qui\ndistribue la charge entre les instances de whoami. Dans la stack,\ncliquez sur “Add Load Balancer”</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36278add82f22f1e306be60a799b6681/f33fc/loadb.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTklEQVQoz32Qy26DMBBF+f8v6rqrSl10FYUoiUpAYPyc8RgwJuljwI36WFQ6QtfjuePLFC+V2LWm7KGUWEo4yCxW9hL2P46Zg8JdZx/Ly/OxLsDaOISPW2Lelvm2zPx9/5dbimPwiFic6rYSsu5Vq22j3akzrC8ZIfPV5TdcaaTutC2QAg0jhoEJ4zRMU5giM8TIV84TjWOuMGNcWW+nyK5CWQAKGn0rNbc6NmwoB72x0rjvoqfegnDIwm4UGtCgVw65lafw+35LYQC1A+7LoTaoVvYoDBDxY+xazTxVg3/tpARSGHrnGdb5mJEYrB8qDSfBvXez8xxY1V1/bvpjI86NaLXrjOOEHEet/i80UmuxteDoHjulGXgM/wl6FkiUluV6vRoaBPgxTjHNMzdtpIVZsp7mVJhtHxAGJi+GY4UQns7dw66isO7S3jf0h0/V6y8EjEHpdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/36278add82f22f1e306be60a799b6681/ba381/loadb.webp 200w,\n/static/36278add82f22f1e306be60a799b6681/7f61c/loadb.webp 400w,\n/static/36278add82f22f1e306be60a799b6681/d00b9/loadb.webp 800w,\n/static/36278add82f22f1e306be60a799b6681/92f8c/loadb.webp 1200w,\n/static/36278add82f22f1e306be60a799b6681/fad48/loadb.webp 1600w,\n/static/36278add82f22f1e306be60a799b6681/2100e/loadb.webp 1905w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/36278add82f22f1e306be60a799b6681/772e8/loadb.png 200w,\n/static/36278add82f22f1e306be60a799b6681/e17e5/loadb.png 400w,\n/static/36278add82f22f1e306be60a799b6681/5a190/loadb.png 800w,\n/static/36278add82f22f1e306be60a799b6681/c1b63/loadb.png 1200w,\n/static/36278add82f22f1e306be60a799b6681/29007/loadb.png 1600w,\n/static/36278add82f22f1e306be60a799b6681/f33fc/loadb.png 1905w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/36278add82f22f1e306be60a799b6681/5a190/loadb.png\"\n          alt=\"Load balancer\"\n          title=\"Load balancer\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Une fois le loadbalancer créé, on peut donc augmenter la scale de son\napplication sans avoir de problème d’allocation de port. Si vous cliquez\nle “80” du loadbalancer, vous devez atteindre votre service, et s’il\nest scalé, l’hostname devrait changer au refresh.</p>\n<p>A ce stade du déploiement, on peut se demander, ce qu’il en est de\nl’infrastructure des machines créées plus tôt.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ac8774826df26dbe266ef830d1b3ff8/27b8e/host2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACX0lEQVQ4y01TWY7UQAyti3MBjsMfXAHEB2jE0NNMJ71Mlq5Uat+T5jmRBiSn5Hqx4+dnh4VcH4/HZTLLsihtupGnXKzz/chnpWutQqrhznMpyliAcOqy7MYGIQcxf3lqvzU94sZp1tYh7S5mZBvnp1nCByg2UDtvfdiNHZrLj2Pz4dPXj5+/c6WFNvdZTkrvdpcKJ3C+OZuvAOKKMCasT6Ws67rUAkoatWKy3sOPKadSnfMuRBcjcFDGk3JGX8o6pnxAz2gASfSJdUUaToAhZuQ/VnoLEAh0Qea6vUUBplzIKeOrOWc0hk5KrSmlECJOHyN0yqXikjPVpLI+4AaKjCv4ARFcSOMoeacNB4JBOeojZ0zh0F7P3dC+9WdYN0A/1nTjrz9tQ/execM7Qg/N9fn1DKTthtOt77nAIE6Xt/4+odVRSC611IZN2mrSKNWlak9kQ4zGexABQ58SQFIugye0I4EAohH0yIRxQLW2UMUiL2UckBczRpMxF0e9Q5Sojd37t/Q1EohNSLYO6J4ctrgtWSdKzm4LdSEAkcrgYkAQjPZkoNOsiIkPCCXazg9ceFxjktaVUq79+PPw+nRsnk9naAbDwrAZssaA4jRqGkgB9ZgTMcRsatl2o0B/Ls2I6JT3GghgTX//fTpjSV+a66Ub9hkc29vhdDmczs2tA9LxCWxRZKtRIQQqaefYMKuOz20/jUJh/TEJ5z38yyBuI/4DMxtrt1JYMpygELaFofXUPm6bmABht+CDOy1prYH4Z/i1Lnz7GSYyvfswNs5aGvtuKCWUwfkPMXR9T/jf/gJkVMYwq076tQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/5ac8774826df26dbe266ef830d1b3ff8/ba381/host2.webp 200w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/7f61c/host2.webp 400w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/d00b9/host2.webp 800w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/05152/host2.webp 836w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/5ac8774826df26dbe266ef830d1b3ff8/772e8/host2.png 200w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/e17e5/host2.png 400w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/5a190/host2.png 800w,\n/static/5ac8774826df26dbe266ef830d1b3ff8/27b8e/host2.png 836w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/5ac8774826df26dbe266ef830d1b3ff8/5a190/host2.png\"\n          alt=\"Hosts\"\n          title=\"Hosts\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Rancher a déployé les conteneurs docker de façon équilibrée entre les\ndifférentes machines. On peut définir nos propres règles de déploiement\npar l’utilisation de label sur les machines.</p>\n<p>Par exemple, on peut ajouter le label “name = frontend”, et pour chaque\nservice que l’on crée, définir si il peut démarrer ou non sur la machine\ndont le name est frontend.</p>\n<p>Sur chacun des conteneurs, rancher nous permet d’accéder à un shell et\nune vue des logs, ce qui est très pratique pour le débug.</p>\n<p>Certes cet exemple était simple, mais on peut facilement déployer des\narchitectures plus complexes grâce à Rancher, et c’est là tout son\nintérêt. Voici l’architecture des services de l’un des projets que j’ai\ndéployé grâce à lui.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39e646d632a82cd4ad26d901963a1c11/a58fe/microservices.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+UlEQVQoz4VSyXLaQBTk/z8khxzi2DmknBQYI0jYtFCyQAzakTSMZpXGBhvnkEeoJLZj4qp3maVfv+5+LabqV4sq5cTIDvyx71mBb4fLUjCumqd/WqfAlZR91xqY5mV/YEymhmNmjIi6oW+Cuao3UkabHBckQEmWFAUha07fZj72xkKIe+2J5J3/dVC4+nGXc8rUf5n5oRqhdCFYSMsVLewy8EkWUZyxSioNr/wUGKSWgoM3qFoTJYGnabaHeyUjhhO22UgB9RJMpZKNDnHRmY4+G8aHq05nOJogT2h9k4bt0fCi2/103W2PRnAUjYb/radSwcw1q9zl0rZuLGvueQgVGWQWk3LuI8v0HNub+0G0KXjdvBwb9GDosL+7TCfv0VV2W9GtwpwTLeVen0ffzgKD3ddwBNpXwDHDYJW7ie1yBQrjXyKBPBfUwSFUxgn48kwzPPO6XkuaiQpaNPWdbray1gTS5pjVh75wA+ZBEH+jOvo0Rt61M7nod7+Mv/dmZoDzSqmeZxkz89zodMyx4VopJUdfn+UM6v11skShOXVns0UEG1VhAHtJEIaJNXWXfrRKE/BS1P9sGGQvdk2p2Udk9BJ792NfSIYFrx9uVyI/83vjfLF9fChOrSeWHLG8nTrDYpEJAlJhPGjhkriTOiZGuaTkt09/6ieWYCq8UbSA5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/39e646d632a82cd4ad26d901963a1c11/ba381/microservices.webp 200w,\n/static/39e646d632a82cd4ad26d901963a1c11/7f61c/microservices.webp 400w,\n/static/39e646d632a82cd4ad26d901963a1c11/01940/microservices.webp 548w\"\n          sizes=\"(max-width: 548px) 100vw, 548px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/39e646d632a82cd4ad26d901963a1c11/772e8/microservices.png 200w,\n/static/39e646d632a82cd4ad26d901963a1c11/e17e5/microservices.png 400w,\n/static/39e646d632a82cd4ad26d901963a1c11/a58fe/microservices.png 548w\"\n          sizes=\"(max-width: 548px) 100vw, 548px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/39e646d632a82cd4ad26d901963a1c11/a58fe/microservices.png\"\n          alt=\"Hosts\"\n          title=\"Hosts\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h3 id=\"un-«-bluegreen-deployement-»-et-une-rolling-upgrade-en-5-minutes\" style=\"position:relative;\"><a href=\"#un-%C2%AB-bluegreen-deployement-%C2%BB-et-une-rolling-upgrade-en-5-minutes\" aria-label=\"un « bluegreen deployement » et une rolling upgrade en 5 minutes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un « blue/green deployement » et une “rolling upgrade” en 5 minutes</h3>\n<p>Dans la plupart des cas, une mise en production est souvent un\npassage difficile pour le développeur. Les outils DevOps ont bien\névidemment permis de simplifier cette étape cruciale de la vie d’un\nprojet.</p>\n<p>Rancher permet d’utiliser plusieurs méthodes pour mettre à jour un\nservice déjà en production tout en garantissant la continuité des\nservices :</p>\n<h4 id=\"la-rolling-upgrade-remplacement-dun-service-par-un-autre\" style=\"position:relative;\"><a href=\"#la-rolling-upgrade-remplacement-dun-service-par-un-autre\" aria-label=\"la rolling upgrade remplacement dun service par un autre permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>La rolling upgrade (remplacement d’un service par un autre)</h4>\n<p><img src=\"/b30a1750f67a83ef7c8cab4ccdd1b326/indiana.gif\" alt=\"Hosts\"></p>\n<h4 id=\"le-bluegreen-deployement\" style=\"position:relative;\"><a href=\"#le-bluegreen-deployement\" aria-label=\"le bluegreen deployement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le blue/green deployement</h4>\n<p>Ces deux méthodes ont été présentées par Christophe Furmaniak et\nYoucef Yekhlef (deux consultants architectes de Zenika) lors de leur\nintervention à de pendant la Devoxx 2016. Je ne peux que vous\nconseiller de la regarder :</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div style=\"position:relative;height:0;padding-bottom:56.25%\"> <iframe src=\"https://www.youtube.com/embed/QFqt8xMTChY?ecver=2\" frameborder=\"0\" style=\"position:absolute;width:100%;height:100%;left:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" allowfullscreen></iframe> </div> </div>\n<h3 id=\"un-service-dns-et-network-overlay\" style=\"position:relative;\"><a href=\"#un-service-dns-et-network-overlay\" aria-label=\"un service dns et network overlay permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un service DNS et Network overlay</h3>\n<p>Pour ceux qui ont déjà bien pratiqué Docker, faire communiquer deux\ncontaineurs entre eux sans avoir d’outil d’orchestration n’est pas très\naisé. Bien sûr, il y a la publication de port sur le Host, mais on\narrive vite aux limites. Rancher apporte nativement une fonctionnalité\nd’overlay network via un tunnel ipsec permettant à deux containers sur\ndeux machines différentes d’être sur le même réseau virtuel. Rancher va\nplus loin puisqu’il possède son service DNS dans lequel il enregistre\nchaque nouveau container qu’il crée. Cela a plusieurs avantages:</p>\n<ul>\n<li>Deux services d’une même Stack se connaissent par leur nom ;</li>\n<li>Un service peut connaître un service d’une autre stack par <code class=\"language-text\">nomService.nomStack</code>.</li>\n</ul>\n<h3 id=\"un-catalogue-qui-senrichit\" style=\"position:relative;\"><a href=\"#un-catalogue-qui-senrichit\" aria-label=\"un catalogue qui senrichit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un catalogue qui s’enrichit</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ccd638ac43343c2b2dfbacfbdd0cd99f/cb9f4/catalogue.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVQozyVRy67TMBDN//8FKyTggtTbIhb0blggEKJFNGlaKG1J0jzsOH7Ej7GThgnXi/Gx58zMOXb07vvpYXNZxfn7JP+QlqskXybZMrk9xvkizh8P9SLOFrtsPu5msNoXy6R48Xn/9ss+UpIzVo+Dne6DlXwcYJrGAGocPe5TVUyDx9R9nON8ExCMk3fBmagSzaHcKSvAj3+v114bP9zL4tyb3hnrtlsAb50zgjkfDOJOee8rxmvGo5ypY82JNMq4fckaaYS2P3NKJNL013OVUyGN3VzKmqveurTsiDKdkISLaJOR9aH43XRU9k+H23+gn47FPjs3XHxM5xSR/fpY/iGiEWp9RA7nUpJORGAcdP3ofclVmjVCqor3v4qGt6kDoxlK9uC9swol+zDwjgFAKyTFycgmlGljDUDDONrEbpRLCIMFILTDlAVP29Za40NwgGFouZiLP53KN9tLfGtR26vtNb4xBK83l+TWVly+/HbaFbQRPXLQLYKHH9ek6oRSpOOR6DVhXGmjndNdjbu2UGIrjSOhYlQZfEubNloa1xurLKA6+jzZYE5KO0sLntfezsZoS/CHvA+ENg5RGK4cXBjQPq4hhOfif/rbKLbu17QXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/ccd638ac43343c2b2dfbacfbdd0cd99f/ba381/catalogue.webp 200w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/7f61c/catalogue.webp 400w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/d00b9/catalogue.webp 800w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/92f8c/catalogue.webp 1200w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/fad48/catalogue.webp 1600w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/367e1/catalogue.webp 1903w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ccd638ac43343c2b2dfbacfbdd0cd99f/772e8/catalogue.png 200w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/e17e5/catalogue.png 400w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/5a190/catalogue.png 800w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/c1b63/catalogue.png 1200w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/29007/catalogue.png 1600w,\n/static/ccd638ac43343c2b2dfbacfbdd0cd99f/cb9f4/catalogue.png 1903w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/ccd638ac43343c2b2dfbacfbdd0cd99f/5a190/catalogue.png\"\n          alt=\"Rancher catalogue\"\n          title=\"Rancher catalogue\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Rancher possède son propre catalogue d’applications, ces applications\nsont sous la forme de groupes de stacks pré-configurées qui s’appuient\nsur les images du Docker Hub :</p>\n<ul>\n<li>La stack Elastic ;</li>\n<li>Janitor, un service basé sur docker-cleanup, pour nettoyer les images et conteneurs non-utilisés. ;</li>\n<li>Traefik, un load balancer développé en Go par Emile Vauge de la Zstartup Containous ;</li>\n<li>Gluster, un gestionnaire de volume partagé ;</li>\n<li>Odoo, le célèbre ERP open source ;</li>\n<li>etc.</li>\n</ul>\n<p>Il est aussi possible d’ajouter son propre\n<a href=\"http://docs.rancher.com/rancher/v1.5/en/catalog/\">catalogue de stacks d’entreprise</a></p>\n<p>Je vous ai présenté ici les principales features de Rancher,\nje ne peux que vous conseiller de le tester pour faire joujou avec vos\nconteneurs Docker. Cependant, la question qu’on peut encore se poser\naujourd’hui reste la suivante : Rancher ne restera-t-il qu’un joujou\npour orchestrer des services ? On sait déjà que des entreprises comme\nOrange et Sony commencent à l’utiliser pour des besoins interne\n(cf : Sony et le playstation Network <a href=\"https://www.youtube.com/watch?v=hwhxXwT6zlw\">https://www.youtube.com/watch?v=hwhxXwT6zlw</a>)</p>\n<p>N’hésitez surtout pas à partager vos expériences avec Rancher.</p>\n<p>Merci encore à Youcef Yekhlef, Christophe Furmaniak et à mon tuteur de\nstage Christophe Tardella pour l’aide apportée à la rédaction de cet article.</p>","headings":[{"value":"Qu’en est-t-il de Rancher ?"},{"value":"Késako"},{"value":"Une installation assez simple"},{"value":"Déployer une application simple avec Rancher"},{"value":"Ajouter des hosts sur lesquels déployer"},{"value":"Créer son service"},{"value":"Scaler et Loadbalancer"},{"value":"Un « blue/green deployement » et une “rolling upgrade” en 5 minutes"},{"value":"La rolling upgrade (remplacement d’un service par un autre)"},{"value":"Le blue/green deployement"},{"value":"Un service DNS et Network overlay"},{"value":"Un catalogue qui s’enrichit"}],"wordCount":{"words":1540},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/fr/rancher/#quen-est-t-il-de-rancher-\">Qu’en est-t-il de Rancher ?</a></p>\n<ul>\n<li><a href=\"/fr/rancher/#k%C3%A9sako\">Késako</a></li>\n<li><a href=\"/fr/rancher/#une-installation-assez-simple\">Une installation assez simple</a></li>\n<li>\n<p><a href=\"/fr/rancher/#d%C3%A9ployer-une-application-simple-avec-rancher\">Déployer une application simple avec Rancher</a></p>\n<ul>\n<li><a href=\"/fr/rancher/#ajouter-des-hosts-sur-lesquels-d%C3%A9ployer\">Ajouter des hosts sur lesquels déployer</a></li>\n<li><a href=\"/fr/rancher/#cr%C3%A9er-son-service\">Créer son service</a></li>\n<li><a href=\"/fr/rancher/#scaler-et-loadbalancer\">Scaler et Loadbalancer</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/fr/rancher/#un-%C2%AB-bluegreen-deployement-%C2%BB-et-une-rolling-upgrade-en-5-minutes\">Un « blue/green deployement » et une “rolling upgrade” en 5 minutes</a></p>\n<ul>\n<li><a href=\"/fr/rancher/#la-rolling-upgrade-remplacement-dun-service-par-un-autre\">La rolling upgrade (remplacement d’un service par un autre)</a></li>\n<li><a href=\"/fr/rancher/#le-bluegreen-deployement\">Le blue/green deployement</a></li>\n</ul>\n</li>\n<li><a href=\"/fr/rancher/#un-service-dns-et-network-overlay\">Un service DNS et Network overlay</a></li>\n<li><a href=\"/fr/rancher/#un-catalogue-qui-senrichit\">Un catalogue qui s’enrichit</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Rancher - How to","date":"June 13, 2016","dateJson":"2016-06-13","translations":null,"description":"I use the Rancher service for one of my projects. In order to share this cool discovery, I've made an article about \"How to deploy applications with Rancher\"","language":"fr","tags":["rancher","cloud","débutant"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.4970059880239521,"src":"/static/f125bc69da4bc57602d7923fe1368c77/a7715/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg","srcSet":"/static/f125bc69da4bc57602d7923fe1368c77/8f7df/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg 250w,\n/static/f125bc69da4bc57602d7923fe1368c77/0f3a1/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg 500w,\n/static/f125bc69da4bc57602d7923fe1368c77/a7715/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg 1000w,\n/static/f125bc69da4bc57602d7923fe1368c77/37d86/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg 1500w,\n/static/f125bc69da4bc57602d7923fe1368c77/d8255/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg 1920w","srcWebp":"/static/f125bc69da4bc57602d7923fe1368c77/e30b5/mahir-uysal-ywVLrYtNXMQ-unsplash.webp","srcSetWebp":"/static/f125bc69da4bc57602d7923fe1368c77/7ca0e/mahir-uysal-ywVLrYtNXMQ-unsplash.webp 250w,\n/static/f125bc69da4bc57602d7923fe1368c77/e9589/mahir-uysal-ywVLrYtNXMQ-unsplash.webp 500w,\n/static/f125bc69da4bc57602d7923fe1368c77/e30b5/mahir-uysal-ywVLrYtNXMQ-unsplash.webp 1000w,\n/static/f125bc69da4bc57602d7923fe1368c77/90fb1/mahir-uysal-ywVLrYtNXMQ-unsplash.webp 1500w,\n/static/f125bc69da4bc57602d7923fe1368c77/25f09/mahir-uysal-ywVLrYtNXMQ-unsplash.webp 1920w","sizes":"(max-width: 1000px) 100vw, 1000px"},"image":{"src":"/static/f125bc69da4bc57602d7923fe1368c77/10d63/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg"},"image16x9":{"src":"/static/f125bc69da4bc57602d7923fe1368c77/6edcc/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg"},"image4x3":{"src":"/static/f125bc69da4bc57602d7923fe1368c77/e14ae/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg"},"image1x1":{"src":"/static/f125bc69da4bc57602d7923fe1368c77/db124/mahir-uysal-ywVLrYtNXMQ-unsplash.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Si vous avez besoin d’utiliser webpack pour votre projet. Vous êtes très souvent contraint par  qui a fait le travail pour vous. Vous ne…","fields":{"slug":"/fr/formation-webpack-gratuite/"},"timeToRead":1,"frontmatter":{"title":"Formation webpack gratuite et open-source","date":"July 23, 2019","dateJson":"2019-07-23","description":"webpack semble compliqué pour beaucou de monde. C’est pourquoi j'ai créé des ateliers pour apprendre ses concepts en partant de la base.","tags":["formation","webpack","débutant"]}}},{"node":{"excerpt":"Ce sont mes diapositives pour le cours que j’ai donné sur Angular aux étudiants de Polytech Lyon en septembre 2017.","fields":{"slug":"/fr/cours-angular/"},"timeToRead":1,"frontmatter":{"title":"Les bases d'angular","date":"September 15, 2017","dateJson":"2017-09-15","description":"En tant qu'enseignant à Polytech Lyon, j'ai eu l'occasion de donner un cours sur Angular en tant qu'initiation. Voici les diapositives réalisées avec RevealJS.","tags":["formation","angular","débutant"]}}},{"node":{"excerpt":"Ce sont mes diapositives pour le cours que j’ai donné sur les dockers aux étudiants de Polytech Lyon en septembre 2016.","fields":{"slug":"/fr/cours-docker/"},"timeToRead":1,"frontmatter":{"title":"Les bases de Docker","date":"September 10, 2016","dateJson":"2016-09-10","description":"En tant qu'enseignant à Polytech Lyon, j'ai eu l'occasion de donner un cours sur Docker en guise d'initiation. Voici les diapositives réalisées avec RevealJS.","tags":["formation","docker","débutant"]}}},{"node":{"excerpt":"Vous pouvez ajouter une entrée de catalogue privé dans vos instances de Rancher, mais la création\ndes fichiers de configuration pourraient…","fields":{"slug":"/fr/un-generateur-pour-le-catalogue-de-rancher/"},"timeToRead":1,"frontmatter":{"title":"Un générateur pour les entrées de catalogue Rancher","date":"June 20, 2016","dateJson":"2016-06-20","description":"Si vous souhaitez générer votre entrée de catalogue Rancher simplement, ce générateur de yeoman est là pour vous, alors essayez-le.","tags":["rancher","cloud"]}}},{"node":{"excerpt":"JetBrains, pour les développeurs Java enfermés dans une grotte et ne\nconnaissant qu’Eclipse, outre le fait de fournir une suite d’outils…","fields":{"slug":"/fr/kotlin/"},"timeToRead":7,"frontmatter":{"title":"Kotlin in action","date":"April 26, 2016","dateJson":"2016-04-26","description":"In the Mix-IT, I followed a conference by Hadi Hariri on the new langague Kotlin. Here are my impressions of this programming language .","tags":["kotlin","débutant"]}}}]}},"pageContext":{"slug":"/fr/rancher/","tags":["rancher","cloud","débutant"],"language":"fr","previous":{"fields":{"slug":"/fr/kotlin/"},"frontmatter":{"title":"Kotlin in action","tags":["kotlin","débutant"]}},"next":{"fields":{"slug":"/fr/un-generateur-pour-le-catalogue-de-rancher/"},"frontmatter":{"title":"Un générateur pour les entrées de catalogue Rancher","tags":["rancher","cloud"]}}}},"staticQueryHashes":["1264045386","1666466174","4061151221"]}