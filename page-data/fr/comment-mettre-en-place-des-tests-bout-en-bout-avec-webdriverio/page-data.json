{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/fr/comment-mettre-en-place-des-tests-bout-en-bout-avec-webdriverio/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.slashgear.dev"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille √† Lyon et d√©veloppe des choses utiles √† <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nN‚Äôh√©sites pas √† aller voir <a href=\"/conferences\">ses conf√©rences sur la page d√©di√©e</a>.\nSi vous voulez voir mon parcours pro, <a href=\"/resume\">mon CV est disponible ici en üá¨üáß</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"19359cf1-3299-545c-ac20-31eef944a4e3","excerpt":"J‚Äôai r√©cemment mis en place une pile de tests de bout en bout pour m‚Äôassurer que je n‚Äôallais pas introduire de r√©gressions fonctionnelles‚Ä¶","html":"<p>J‚Äôai r√©cemment mis en place une pile de tests de bout en bout pour m‚Äôassurer que je n‚Äôallais pas introduire de r√©gressions fonctionnelles sur mon blog.\nAvec plusieurs ann√©es d‚Äôexp√©rience dans l‚Äôutilisation des technologies de test E2E (End to End), j‚Äôai tout de m√™me rencontr√© quelques difficult√©s dans sa mise en place.</p>\n<p>Afin de vous faire gagner du temps, je vous propose un tutoriel pas √† pas de l‚Äôinstallation des outils n√©cessaires pour avoir une pile de test efficace en quelques minutes.</p>\n<h2 id=\"on-le-fait-tourner-dabord-localement\" style=\"position:relative;\"><a href=\"#on-le-fait-tourner-dabord-localement\" aria-label=\"on le fait tourner dabord localement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>On le fait tourner d‚Äôabord localement</h2>\n<p>Vous devez d‚Äôabord installer quelques d√©pendances √† votre projet.\nPour moi le projet √©tait un site Gatsby assez simple, mais vous pouvez l‚Äôinstaller sur n‚Äôimporte quel site web que vous d√©veloppez qui a un fichier <code class=\"language-text\">package.json</code>.\nDans ce cas, je vais commencer par un paquet <code class=\"language-text\">npm</code> qui vient d‚Äô√™tre initialis√©.\n<strong>Assurez-vous que vous avez un navigateur Chromium ou Chrome install√© localement.</strong>\nNous avons beaucoup de chance car les √©quipes de <a href=\"https://webdriver.io/\">WebdriverIo</a> ont d√©velopp√© un sujet CLI qui fait ce travail pour vous.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @wdio/cli</code></pre></div>\n<p>Il ne vous reste plus qu‚Äô√† d√©clencher l‚Äôinitialisation d‚Äôune nouvelle configuration.\nLe CLI vous proposera un genre de formulaire que vous devrez suivre.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> wdio config</code></pre></div>\n<p><img src=\"/98f39f6c4c1dabf691434adfc56a6ff9/setup.gif\" alt=\"exemple screen captured of the CLI output\"></p>\n<p>Voici ce que vous devez faire pour chaque question :</p>\n<ol>\n<li>S√©lectionnez d‚Äôabord ‚ÄúSur ma machine locale‚Äù.</li>\n<li>Vous devez absolument utiliser <code class=\"language-text\">cucumber</code>, le langage Gherkin est tellement g√©nial pour [d√©clarer des comportements d‚Äôutilisateurs humainement lisibles] (<a href=\"https://en.wikipedia.org/wiki/Behavior-driven_development\">https://en.wikipedia.org/wiki/Behavior-driven_development</a>).</li>\n<li>Choisissez le compilateur dont vous avez besoin, j‚Äôutilise personnellement <code class=\"language-text\">No</code>. Vous pouvez d√©cider si vous voulez utiliser Babel ou Typescript en fonction de vos habitudes.</li>\n<li>Pour la question ‚ÄúO√π sont situ√©s vos fichiers de fonctionnalit√©s ?‚Äù, j‚Äôaime utiliser la valeur par d√©faut.</li>\n<li>M√™me chose pour les d√©finitions d‚Äô√©tapes, utilisez la valeur par d√©faut.</li>\n<li>Voyons quels tests WebdriverIo va g√©n√©rer automatiquement.</li>\n<li><code class=\"language-text\">Voulez-vous utiliser les objets de la page ?</code> Je ne l‚Äôutiliserais pas si c‚Äôest la premi√®re fois que vous configurez ce genre de pile de tests, dites <code class=\"language-text\">n</code>.</li>\n<li>Vous devriez s√©lectionner le rapporteur <code class=\"language-text\">spec</code> ici.</li>\n<li>Veuillez s√©lectionner le service <code class=\"language-text\">chromedriver</code> uniquement.</li>\n<li>Remplacez l‚Äôurl de base par votre contexte local (par exemple, ajoutez le port sur lequel vous exposez votre application localement).</li>\n</ol>\n<p>Normalement, le CLI g√©n√®re quelques fichiers pour vous et ajoute les d√©pendances manquantes dont vous avez besoin.</p>\n<p>Voici mon `package.json‚Äô.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"example-wdio\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@wdio/cli\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/cucumber-framework\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/local-runner\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/spec-reporter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"chromedriver\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^92.0.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"wdio-chromedriver-service\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.2.0\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Vous devriez voir un fichier <code class=\"language-text\">login.feature</code> dans le dossier <code class=\"language-text\">./features/</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> The Internet Guinea Pig Website</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario Outline:</span><span class=\"token important\"> As a user, I can log into the secure area</span></span>\n\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> am on the login page\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> login with <span class=\"token outline variable\">&lt;username></span> and <span class=\"token outline variable\">&lt;password></span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a flash message saying <span class=\"token outline variable\">&lt;message></span>\n\n    <span class=\"token scenario\"><span class=\"token keyword\">Examples:</span><span class=\"token important\"></span></span><span class=\"token table-head\">\n      <span class=\"token punctuation\">|</span><span class=\"token th variable\"> username </span><span class=\"token punctuation\">|</span><span class=\"token th variable\"> password             </span><span class=\"token punctuation\">|</span><span class=\"token th variable\"> message                        </span><span class=\"token punctuation\">|</span></span><span class=\"token table-body\">\n      <span class=\"token punctuation\">|</span><span class=\"token td string\"> tomsmith </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> SuperSecretPassword! </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> You logged into a secure area! </span><span class=\"token punctuation\">|</span>\n      <span class=\"token punctuation\">|</span><span class=\"token td string\"> foobar   </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> barfoo               </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> Your username is invalid!      </span><span class=\"token punctuation\">|</span></span></code></pre></div>\n<p>Avec les d√©finitions des <em>steps</em> dans <code class=\"language-text\">./step-definitions/steps.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Given<span class=\"token punctuation\">,</span> When<span class=\"token punctuation\">,</span> Then <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@cucumber/cucumber'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">Given</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I am on the (\\w+) page$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://the-internet.herokuapp.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">When</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I login with (\\w+) and (.+)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">username<span class=\"token punctuation\">,</span> password</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#username'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button[type=\"submit\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">Then</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I should see a flash message saying (.*)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#flash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeExisting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#flash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveTextContaining</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Voyons ce que font ces exemples de tests par d√©faut !\nPour cela, il vous suffit de lancer ceci dans votre terminal et tada üéâ</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> wdio run wdio.conf.js</code></pre></div>\n<p><img src=\"/91922b6797f633320658a98c56f955cf/test-run.gif\" alt=\"Voici un gif de ce qui s&#x27;est pass√© dans mon navigateur Chrome\"></p>\n<p>Voici le log qu‚Äôil va g√©n√©rer gr√¢ce au rapporteur <code class=\"language-text\">spec</code> !</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">------------------------------------------------------------------\n[chrome 92.0.4515.131 mac os x #0-0] Running: chrome (v92.0.4515.131) on mac os x\n[chrome 92.0.4515.131 mac os x #0-0] Session ID: edd73da800a210e7c677c69cd064004f\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] ¬ª /features/login.feature\n[chrome 92.0.4515.131 mac os x #0-0] The Internet Guinea Pig Website\n[chrome 92.0.4515.131 mac os x #0-0] As a user, I can log into the secure area\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì Given I am on the login page\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì When I login with tomsmith and SuperSecretPassword!\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì Then I should see a flash message saying You logged into a secure area!\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] As a user, I can log into the secure area\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì Given I am on the login page\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì When I login with foobar and barfoo\n[chrome 92.0.4515.131 mac os x #0-0]    ‚úì Then I should see a flash message saying Your username is invalid!\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] 6 passing (3s)</code></pre></div>\n<p>Pour l‚Äôinstant, les tests ne testent pas du tout votre application.\nVous trouverez de nombreuses ressources sur la fa√ßon d‚Äôutiliser [Cucumber JS] (<a href=\"https://cucumber.io/docs/installation/javascript/\">https://cucumber.io/docs/installation/javascript/</a>) pour √©crire de bons tests pour d√©crire et tester les fonctionnalit√©s de votre application.</p>\n<h2 id=\"configurer-le-workflow-daction-github\" style=\"position:relative;\"><a href=\"#configurer-le-workflow-daction-github\" aria-label=\"configurer le workflow daction github permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configurer le workflow d‚Äôaction Github</h2>\n<p>Maintenant que nous avons r√©ussi √† faire tourner les tests E2E sur notre machine, il nous reste √† mettre en place un workflow d‚Äôint√©gration continue qui v√©rifiera automatiquement sur votre Pull Request et sur votre branche <code class=\"language-text\">main</code> que tous les tests sont ok.</p>\n<p>J‚Äôutilise pour la plupart de mes projets Github Action et j‚Äôen suis satisfait, donc l‚Äôexemple suivant utilisera cet outil.\nCependant, le principe fonctionne aussi avec un pipeline Gitlab, Jenkins ou autre.</p>\n<p>Avec Github Action vous devez configurer un fichier Yaml pour d√©crire votre workflow.\nCr√©ons le fichier <code class=\"language-text\">./.github/workflows/continuous-integration.yml</code> dans votre projet !</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Continuous Integration\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**'</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># D'abord on install un chromium dans le runner</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Chromium\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> sudo apt<span class=\"token punctuation\">-</span>get install chromium<span class=\"token punctuation\">-</span>browser\n\n      <span class=\"token comment\"># fetch du repo</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n      <span class=\"token comment\"># Usage de NodeJS > 14.x</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n      <span class=\"token comment\"># Installer ses d√©pendances</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> yarn install\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n\n      <span class=\"token comment\"># C'est ici que vous devez _build_ votre application</span>\n      <span class=\"token comment\"># Vous pouvez vous inspir√© de ce que j'ai fait sur mon blog https://github.com/Slashgear/slashgear.github.io/blob/source/.github/workflows/continuous-integration.yml</span>\n\n      <span class=\"token comment\"># On lance les tests avec la m√™me commande que locallement</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> yarn wdio run wdio.conf.js\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running E2E tests</code></pre></div>\n<p>Essayons cela ! üöÄ</p>\n<p>üò≠ Malheureusement, vous devriez √™tre confront√© √† une erreur tr√®s courante lors des tests E2E avec chrome.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0-0] 2021-08-12T20:34:12.293Z ERROR webdriver: Request failed with status 500 due to unknown error: unknown error: Chrome failed to start: exited abnormally.\n[0-0]   (unknown error: DevToolsActivePort file doesn't exist)\n[0-0]   (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\n[0-0] 2021-08-12T20:34:12.293Z ERROR webdriver: #0 0x5631c488ba63 &lt;unknown></code></pre></div>\n<p><code class=\"language-text\">DevToolsActivePort file doesn't exist</code> signifie essentiellement que votre navigateur n‚Äôa pas r√©ussi √† d√©marrer.\nLa raison principale de ce probl√®me est le fait que vous demandez √† WebdriverIo de d√©marrer le navigateur Chrome avec une interface utilisateur graphique sur un runner ubuntu qui n‚Äôa pas d‚Äô√©cran du tout üòÖ.</p>\n<p>Nous devons cr√©er une nouvelle configuration de Webdriver sp√©cifique √† l‚Äôaction github qui √©tend notre configuration de base.\nCr√©ons <code class=\"language-text\">wdio-github.conf.js</code> √† c√¥t√© de <code class=\"language-text\">wdio.conf.js</code> !</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> basicConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./wdio.conf'</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>basicConfig<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// We only need to override the Chrome configuration of capabilities</span>\n  capabilities<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      maxInstances<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      browserName<span class=\"token operator\">:</span> <span class=\"token string\">'chrome'</span><span class=\"token punctuation\">,</span>\n      acceptInsecureCerts<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// We need to extends some Chrome flags in order to tell Chrome to run headless</span>\n      <span class=\"token string\">'goog:chromeOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        args<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'--headless'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-gpu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-dev-shm-usage'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Il ne nous reste plus qu‚Äô√† modifier la commande <code class=\"language-text\">yarn wdio run</code> dans notre fichier YAML de Workflow Github.\nVous n‚Äôavez plus qu‚Äô√† le pousser et Github le lancera pour vous !</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b407649e807a878c10363ae2818db27/29007/action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVQ4y52Sy27CMBBFs2shie34bceB8AhQJEQR//9tt/KgUAqool1cjbzI0Z0zKdrdFrv9GbvDGcvtAZv9CeuPI4b9J1K/QZitEboV4nxA6rc0hW5RCYu6cQ8pZEywoYdPS5jQw8bvSNdB2gSuAoSOUK6jmT+shCHofYp2viHYlGmU3Nzk8p4yhX61hfYJk0qgZAoVVyiZpPd9Cmm7p9XHZLB2Ccq24Mqh0R5COYK+l/wROBxP8GkN5WfQoYcO82uUnxOwEhq+7SFNRC003qbsaTsCNi6Rl+yJq3GG67tkGqyxiN0SjQlQrqV2GZob3qfInp7JHZOdscYQUGhPLrMCaQImdfOwdvGbP3JIDQ18WlDDnGndUMsMeBk4/mdjw9AtIG28HEe6H5Bb6AvAS8M4WxHMxhnN7HA8zujvj8AlXTn7uziMEMr/b+W8YuoHGN9RamHApaX5dyDXdAQmLf2PFdfXdZ+t/AXUlTvvvwbd7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5b407649e807a878c10363ae2818db27/ba381/action.webp 200w,\n/static/5b407649e807a878c10363ae2818db27/7f61c/action.webp 400w,\n/static/5b407649e807a878c10363ae2818db27/d00b9/action.webp 800w,\n/static/5b407649e807a878c10363ae2818db27/92f8c/action.webp 1200w,\n/static/5b407649e807a878c10363ae2818db27/fad48/action.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5b407649e807a878c10363ae2818db27/772e8/action.png 200w,\n/static/5b407649e807a878c10363ae2818db27/e17e5/action.png 400w,\n/static/5b407649e807a878c10363ae2818db27/5a190/action.png 800w,\n/static/5b407649e807a878c10363ae2818db27/c1b63/action.png 1200w,\n/static/5b407649e807a878c10363ae2818db27/29007/action.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5b407649e807a878c10363ae2818db27/5a190/action.png\"\n            alt=\"Champagne !\"\n            title=\"Champagne !\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"configurer-le-multi-navigateur-\" style=\"position:relative;\"><a href=\"#configurer-le-multi-navigateur-\" aria-label=\"configurer le multi navigateur  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configurer le multi navigateur !</h2>\n<p>Chrome n‚Äôest pas le seul navigateur, et j‚Äôesp√®re qu‚Äôil ne le sera jamais !</p>\n<p><strong>WebdriverIo est une excellente solution pour ex√©cuter des tests sur plusieurs navigateurs</strong>.\nEt je ne vous montrerai pas ici les excellentes fonctionnalit√©s que vous pourriez utiliser avec des solutions d‚Äôex√©cution √† distance comme <a href=\"https://www.browserstack.com/\">BrowserStack</a> ou <a href=\"https://saucelabs.com/\">Saucelabs</a> directement avec WebdriverIo.</p>\n<p>Configurons un Firefox en local !</p>\n<ol>\n<li>Assurez-vous d‚Äôinstaller un Java JDK 8 sur votre machine.\nPetite astuce pour les utilisateurs de Macos comme moi : lancez <code class=\"language-text\">brew install adoptopenjdk/openjdk/adoptopenjdk8</code> fait le travail !</li>\n<li>Lancez <code class=\"language-text\">yarn add -D @wdio/selenium-standalone-service</code> pour installer les services selenium fonctionnant avec WebdriverIo.</li>\n<li>Assurez-vous que vous avez Firefox install√© localement.</li>\n<li>Maintenant, la derni√®re chose que nous devons faire est de mettre √† jour notre configuration pour ajouter les capacit√©s de Firefox.</li>\n</ol>\n<p>Dans <code class=\"language-text\">wdio.conf.js</code>, remplacez simplement les tableaux <em>capabilities</em> et <em>services</em> par ceci.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">{</span>\n  capabilites: <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        maxInstances: <span class=\"token number\">5</span>,\n        browserName: <span class=\"token string\">'chrome'</span>,\n        acceptInsecureCerts: true,\n    <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>\n        maxInstances: <span class=\"token number\">5</span>,\n        browserName: <span class=\"token string\">'firefox'</span>,\n        acceptInsecureCerts: true,\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>,\n  services: <span class=\"token punctuation\">[</span><span class=\"token string\">'chromedriver'</span>, <span class=\"token string\">'selenium-standalone'</span><span class=\"token punctuation\">]</span>,\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Si vous ex√©cutez la commande <code class=\"language-text\">yarn wdio run wdio.conf.js</code> maintenant, cela va d√©clencher les deux tests sur Firefox et Chrome et c‚Äôest compl√®tement g√©nial !</p>\n<p>La derni√®re chose que nous devons faire est de mettre √† jour notre configuration sp√©cifique √† Github afin qu‚Äôelle fonctionne √©galement dans votre int√©gration continue.\nVous devez aussi mettre √† jour les <em>capabilites</em>, afin d‚Äôajouter Firefox et de le faire d√©marrer <em>Headless</em>.</p>\n<p>Dans <code class=\"language-text\">wdio-github.conf.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> basicConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./wdio.conf'</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>basicConfig<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">,</span>\n  capabilities<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      maxInstances<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      browserName<span class=\"token operator\">:</span> <span class=\"token string\">'chrome'</span><span class=\"token punctuation\">,</span>\n      acceptInsecureCerts<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'goog:chromeOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        args<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'--headless'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-gpu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-dev-shm-usage'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      maxInstances<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      browserName<span class=\"token operator\">:</span> <span class=\"token string\">'firefox'</span><span class=\"token punctuation\">,</span>\n      acceptInsecureCerts<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'moz:firefoxOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        args<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'-headless'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Et c‚Äôest tout !</p>\n</blockquote>\n<p>Amusez-vous bien √† couvrir votre application avec des tests E2E !\nN‚Äôh√©sitez pas √† me @ sur twitter si ce <em>How to</em> vous a aid√©.</p>\n<p>Si vous voulez voir l‚Äôexemple d‚Äôapplication que j‚Äôai utilis√© dans ce tutoriel, jetez un coup d‚Äôoeil √† <a href=\"https://github.com/Slashgear/example-wdio\">cet exemple de d√©p√¥t Github</a>.</p>","headings":[{"value":"On le fait tourner d‚Äôabord localement"},{"value":"Configurer le workflow d‚Äôaction Github"},{"value":"Configurer le multi navigateur !"}],"wordCount":{"words":912},"tableOfContents":"<ul>\n<li><a href=\"#on-le-fait-tourner-dabord-localement\">On le fait tourner d‚Äôabord localement</a></li>\n<li><a href=\"#configurer-le-workflow-daction-github\">Configurer le workflow d‚Äôaction Github</a></li>\n<li><a href=\"#configurer-le-multi-navigateur-\">Configurer le multi navigateur !</a></li>\n</ul>","frontmatter":{"title":"Comment mettre en place des tests bout en bout avec WebdriverIo ?","date":"August 16, 2021","dateJson":"2021-08-16","translations":["en","how-to-setup-e2e-tests-with-webdriverio"],"description":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j'applique dans mon outil CI actuel. Je voulais parall√©liser les t√¢ches sur chaque √©tiquette d'une pull request.","language":"fr","tags":["github","action","e2e","WebdriverIo"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7857142857142858,"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/4fe8c/webdriverio.jpg","srcSet":"/static/9df6af6bd0accbdc6b0371ce91a5078f/aabdf/webdriverio.jpg 150w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/9dc27/webdriverio.jpg 300w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/4fe8c/webdriverio.jpg 600w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/9842e/webdriverio.jpg 900w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/47498/webdriverio.jpg 1200w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/d8255/webdriverio.jpg 1920w","srcWebp":"/static/9df6af6bd0accbdc6b0371ce91a5078f/ad85c/webdriverio.webp","srcSetWebp":"/static/9df6af6bd0accbdc6b0371ce91a5078f/e7487/webdriverio.webp 150w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/403a4/webdriverio.webp 300w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/ad85c/webdriverio.webp 600w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/210c1/webdriverio.webp 900w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/99238/webdriverio.webp 1200w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/25f09/webdriverio.webp 1920w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/10d63/webdriverio.jpg"},"image16x9":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/6edcc/webdriverio.jpg"},"image4x3":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/e14ae/webdriverio.jpg"},"image1x1":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/db124/webdriverio.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Encore une fois, je me suis donn√© un challenge pour apprendre √† utiliser Github Action.\nJ‚Äôai essay√© de voir s‚Äôil √©tait possible de lancer‚Ä¶","fields":{"slug":"/fr/comment-lancer-des-actions-github-en-simultane-sur-des-sous-dossiers/"},"timeToRead":1,"frontmatter":{"title":"Github Action : Comment parall√©liser ses tests dynamiquement par dossier ?","date":"December 01, 2020","dateJson":"2020-12-01","description":"Encore une fois, je joue avec les Github Action pour voir si elles peuvent r√©pondre aux probl√©matiques de CI que je peux rencontrer dans mon travail.","tags":["github","action","CI","tutoriel"]}}},{"node":{"excerpt":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j‚Äôapplique dans mon‚Ä¶","fields":{"slug":"/fr/comment-parralelliser-un-job-github-action-par-label/"},"timeToRead":2,"frontmatter":{"title":"Github Action : Comment g√©rer dynamiquement des steps pour chaque label de Pull Request ?","date":"November 29, 2020","dateJson":"2020-11-29","description":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j'applique dans mon outil de CI actuel. Je voulais mettre en parall√®le les t√¢ches sur chaque label de Pull Request.","tags":["github","action","CI","tutoriel"]}}},{"node":{"excerpt":"Github Pages est une solution pour h√©berger des sites web statiques directement dans ton d√©p√¥t Github en poussant les fichiers du site vers‚Ä¶","fields":{"slug":"/fr/comment-deployer-sur-github-pages-avec-travis-ci/"},"timeToRead":2,"frontmatter":{"title":"Comment se d√©ployer sur les pages Github avec Travis CI ?","date":"May 26, 2020","dateJson":"2020-05-26","description":"Comment automatiser en quelques minutes le d√©ploiement de votre site sur les pages Github avec l'outil Travis CI. Ce tutoriel d√©crit √©tape par √©tape toutes les actions √† effectuer pour publier un site statique sur des pages Github et l'h√©berger gratuitement.","tags":["tutoriel","github","gatsby"]}}},{"node":{"excerpt":"Lorsque j‚Äôai commenc√© √† enseigner en septembre dernier, je recherchais une solution\npour pouvoir suivre facilement l‚Äôavanc√©e des √©tudiants‚Ä¶","fields":{"slug":"/fr/github-classroom/"},"timeToRead":6,"frontmatter":{"title":"Github classroom - un outil √† tester","date":"March 25, 2017","dateJson":"2017-03-25","description":"J'ai r√©cemment essay√© Github Classroom avec mes √©tudiants de 4√®me ann√©e de l'√©cole Polytech Lyon. Je vous propose ici mes retours sur cet outil √† destination des enseignants pour le suivi de TP.","tags":["formation","git","github"]}}}]}},"pageContext":{"slug":"/fr/comment-mettre-en-place-des-tests-bout-en-bout-avec-webdriverio/","tags":["github","action","e2e","WebdriverIo"],"language":"fr","previous":{"fields":{"slug":"/fr/que-vaut-snowpack/"},"frontmatter":{"title":"üóª Snowpack üóª le rempla√ßant de webpack ?Ô∏è","tags":["webpack","snowpack","vitejs","bundler"]}},"next":{"fields":{"slug":"/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/"},"frontmatter":{"title":"Bonnes pratiques pour la maintenance d'une application web","tags":["web","javascript","bedrock"]}}}},
    "staticQueryHashes": ["1264045386","1666466174","2564629789","4061151221","62118570"]}