{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/fr/react-redux-pieges-bonnes-pratiques/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.slashgear.dev"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille √† Lyon et d√©veloppe des choses utiles √† <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nN‚Äôh√©sites pas √† aller voir <a href=\"/conferences\">ses conf√©rences sur la page d√©di√©e</a>.\nSi vous voulez voir mon parcours pro, <a href=\"/resume\">mon CV est disponible ici en üá¨üáß</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"93e22b2c-0d88-5450-9f97-3b48904dac26","excerpt":"Apr√®s 2 ans d‚Äôutilisation de React avec Redux pour la plateforme vid√©o 6play, j‚Äôai pu identifier les bonnes pratiques et les pi√®ges √† √©viter‚Ä¶","html":"<p>Apr√®s 2 ans d‚Äôutilisation de React avec Redux pour la plateforme vid√©o <a href=\"https://6play.fr\">6play</a>, j‚Äôai pu identifier les bonnes pratiques et les pi√®ges √† √©viter √† tout prix.\nL‚Äô√©quipe de <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a> (√† laquelle j‚Äôappartiens actuellement) a maintenu la pile technique du projet √† jour pour profiter des nouvelles fonctionnalit√©s de <code class=\"language-text\">react</code>, <code class=\"language-text\">react-redux</code> et <code class=\"language-text\">redux</code>.</p>\n<p>Voici donc mes conseils pour maintenir et utiliser React et Redux dans votre application sans devenir fou.</p>\n<p>Cet article n‚Äôest pas une introduction √† React ou Redux. Je vous recommande <a href=\"https://redux.js.org/basics/usage-with-react\">cette documentation</a> si vous voulez voir comment les mettre en ≈ìuvre dans vos applications.</p>\n<p>Vous pouvez √©galement jeter un coup d‚Äô≈ìil au <a href=\"https://redux.js.org/style-guide/style-guide\">guide de style officiel de Redux</a> dans lequel vous pourriez trouver certains de ces conseils et d‚Äôautres.\nNotez que si vous utilisez le <a href=\"https://redux-toolkit.js.org/\">Redux Toolkit</a>, certaines des astuces/pratiques pr√©sent√©es dans cet article sont d√©j√† int√©gr√©es directement dans l‚ÄôAPI.</p>\n<h2 id=\"√©vitez-davoir-un-seul-reducer\" style=\"position:relative;\"><a href=\"#%C3%A9vitez-davoir-un-seul-reducer\" aria-label=\"√©vitez davoir un seul reducer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>√âvitez d‚Äôavoir un seul reducer</h2>\n<p>Le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est la fonction qui est en charge de construire un nouvel √©tat √† chaque <code class=\"language-text\">action</code>.\nOn pourrait √™tre tent√© de ne manipuler qu‚Äôun seul reducer.\nDans le cas d‚Äôune petite application, ce n‚Äôest pas un probl√®me.\nPour les applications exprimant une activit√© complexe et √©volutive, il est pr√©f√©rable d‚Äôopter pour la solution [combineReducers].</p>\n<p>Cette fonctionnalit√© de <code class=\"language-text\">redux</code> permet de manipuler non pas un mais plusieurs <a href=\"https://redux.js.org/basics/reducers\">reducer</a>s qui agissent respectivement sur l‚Äô√©tat.</p>\n<blockquote>\n<p>Quand et comment scinder son application ?</p>\n</blockquote>\n<p>Ce que nous recommandons √† Bedrock, c‚Äôest un d√©coupage fonctionnel de l‚Äôapplication.\nDans mon approche, nous aurions tendance √† repr√©senter le m√©tier de l‚Äôapplication plus que les trucs techniques sous-entendus.\nDe tr√®s bons articles l‚Äôexpliquent notamment par l‚Äôutilisation des <a href=\"https://en.wikipedia.org/wiki/Domain-driven_design\">principes DDD</a>.</p>\n<p>√Ä Bedrock, nous utilisons un dossier nomm√© <em>modules</em> qui regroupe les diff√©rents dossiers associ√©s √† la fonctionnalit√© de votre application.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.reducer.js\n    product/\n      __tests__/\n        product.reducer.spec.js\n      components/\n      product.reducer.js\n    account/\n      __tests__/\n      account.reducer.spec.js\n      components/\n      account.reducer.js\n  store.js\n  index.js</code></pre></div>\n<p>Ainsi, dans <code class=\"language-text\">store.js</code>, tout ce que vous avez √† faire est de combiner vos diff√©rents reducers.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/user.reducer.js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> product <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/product.reducer.js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> account <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/account.reducer.js'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> product<span class=\"token punctuation\">,</span> account <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>En suivant ce principe, vous allez :</p>\n<ul>\n<li>garder les reducers lisibles car ils ont une port√©e limit√©e.</li>\n<li>structurer et d√©finir les fonctionnalit√©s de votre application</li>\n<li>faciliter les tests</li>\n</ul>\n<p>Historiquement, cette segmentation nous a permis de supprimer des domaines d‚Äôapplication complets sans avoir d‚Äôimpact sur l‚Äôensemble du codebase, simplement en supprimant le dossier <code class=\"language-text\">module</code> associ√© √† la fonctionnalit√©.</p>\n<h3 id=\"acc√®s-par-proxy-√†-l√©tat\" style=\"position:relative;\"><a href=\"#acc%C3%A8s-par-proxy-%C3%A0-l%C3%A9tat\" aria-label=\"acc√®s par proxy √† l√©tat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Acc√®s par proxy √† l‚Äô√©tat</h3>\n<p>Maintenant que vos reducers ont √©t√© plac√©s dans le <code class=\"language-text\">module</code> fonctionnel, vous devez permettre √† vos composants d‚Äôacc√©der √† l‚Äô√©tat via un <code class=\"language-text\">selector</code>.\nUn <code class=\"language-text\">selector</code> est une fonction qui a l‚Äô<code class=\"language-text\">state</code> comme param√®tre, et r√©cup√®re ses informations.\nCela peut aussi vous permettre de ne s√©lectionner que les props n√©cessaires au composant en vous d√©couplant de la structure de l‚Äô√©tat.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> lastName <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> lastName</code></pre></div>\n<p>Vous pouvez √©galement passer des param√®tres √† un ‚Äús√©lecteur‚Äù en l‚Äôentourant d‚Äôune fonction.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getProduct</span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">productId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">product</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> list <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    list<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> product<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> productId<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Cela vous permettra de les utiliser dans vos composants en utilisant le crochet <a href=\"https://redux.js.org/recipes/usage-with-typescript#typing-the-useselector-hook\">useSelector</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> product <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token function\">getProduct</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Il est sp√©cifi√© dans la doc <code class=\"language-text\">react-redux</code> que le <em>selector</em> est appel√© pour chaque rendu du composant.\nSi la r√©f√©rence de la fonction <code class=\"language-text\">selector</code> ne change pas, une version en cache de l‚Äôobjet peut √™tre retourn√©e directement.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.reducer.js\n      user.selectors.js &lt;--- This is where all module selectors are exported</code></pre></div>\n<h3 id=\"pr√©fixer-le-nom-de-vos-actions\" style=\"position:relative;\"><a href=\"#pr%C3%A9fixer-le-nom-de-vos-actions\" aria-label=\"pr√©fixer le nom de vos actions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pr√©fixer le nom de vos actions</h3>\n<blockquote>\n<p>Je vous conseille vraiment de d√©finir des r√®gles de nommage pour vos actions et si possible de les v√©rifier avec une r√®gle <code class=\"language-text\">eslint</code>.</p>\n</blockquote>\n<p>Les actions sont en lettres majuscules s√©par√©es par ‚Äô_‚Äò.\nVoici un exemple avec cette action : <code class=\"language-text\">SET_USERS</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.actions.js &lt;--- This is where all module action creators are exported\n      user.reducer.js\n      user.selectors.js</code></pre></div>\n<p>Les noms des actions sont pr√©fix√©s par le nom du <code class=\"language-text\">module</code> dans lequel il se trouve.\nCela donne un nom complet : <code class=\"language-text\">user/SET_USERS</code>.\nUn grand avantage de cette r√®gle de nommage est que vous pouvez facilement filtrer l‚Äôaction dans <a href=\"https://github.com/reduxjs/redux-devtools\">redux-devtools</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/10f47/redux-devtools.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8UlEQVQ4y61U2Y6bQBDkd3xhjLnvwzCAARvI2l6vIyX//xEVdRssr5JI8SoPpe6Z6Smqj0HS3QyavYPuZFDNBFZQwvQLqFYCJyyRlj3SokciOsSiw/54RTt8R9Pf0J1+YLj8hKjPiLIDgrSB5IYldGcHw8mw1gIsFBfztQPVjJGVPQdVhzPa4Yq6u6BsTyjqN4j6DXV3RdNdkRYd8mpgSG5UwfYFEy03LlYbj33NShHnByy1CLIRYWsF0KwAqulD0XzIqsdYqx7fIREEyYv38OM9lhvvATrYWgl2ZY/FxsOMguX7BbIL5e6TZV+2MRshuWGFIKmh6OEY5PIBp1wNvEdrtmubyWdPBIxRHSuklKNdC9sveIMULkaFRDh9YP506U+YYrgpYdqwStPNIW/9R8qvEH5SSJ2kOipaiJX6HwhJIdmphlRomkluyquE3khIdmsmjIfCrxDaQcHpWp6AZqeQt8HnsXmZ0BfgWUxqHpUpZVJKL+BLCqnDREzqluNLoRqmYiJ0/p2QfgBESAo3RsQzOF/fBzsVx/uMrazfh/kZ4zkTBmkLN2ng71oYfgHNyaG7gn3a0z3B0Nz8r9YMKxiegGJEkOLyGyJCMaA4XlF1N6T7E8rug23evmNXn1H1N7bTOm8vyBrCGUX3wb44vOMXXDMXpq23M4cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/ba381/redux-devtools.webp 200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/7f61c/redux-devtools.webp 400w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/d00b9/redux-devtools.webp 800w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/92f8c/redux-devtools.webp 1200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/fad48/redux-devtools.webp 1600w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/8ed74/redux-devtools.webp 2726w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/772e8/redux-devtools.png 200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/e17e5/redux-devtools.png 400w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/5a190/redux-devtools.png 800w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/c1b63/redux-devtools.png 1200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/29007/redux-devtools.png 1600w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/10f47/redux-devtools.png 2726w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/5a190/redux-devtools.png\"\n            alt=\"redux-devtools screenshot\"\n            title=\"redux-devtools screenshot\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"toujours-tester-vos-reducers\" style=\"position:relative;\"><a href=\"#toujours-tester-vos-reducers\" aria-label=\"toujours tester vos reducers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Toujours tester vos reducers</h3>\n<p>Les <code class=\"language-text\">reducers</code> sont les d√©tenteurs de l‚Äôactivit√© de votre application.\nIls manipulent l‚Äô√©tat de votre application.</p>\n<p><strong>Ce code est donc <em>sensible</em>.</strong></p>\n<p>‚û°Ô∏è Une modification peut avoir beaucoup d‚Äôimpact sur votre application.</p>\n<p><strong>Ce code est riche en r√®gles de gestion</strong>.</p>\n<p>‚û°Ô∏è Vous devez √™tre s√ªr que celles-ci sont correctement mises en ≈ìuvre.</p>\n<p>La bonne nouvelle est que ce code est relativement facile √† tester.\nUn <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est une fonction unique qui prend 2 param√®tres.\nCette fonction retournera un nouvel <code class=\"language-text\">state</code> en fonction du type d‚Äôaction et de ses param√®tres.</p>\n<p>Voici la structure standard pour tester les <a href=\"https://redux.js.org/basics/reducers\">reducer</a> avec <a href=\"https://jestjs.io/\">Jest</a> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ReducerName'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Init a new state</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ACTION'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Group tests by action type</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with some params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with other params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SECOND_ACTION'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with some params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Je vous recommande √©galement d‚Äôutiliser le package <a href=\"https://www.npmjs.com/package/deep-freeze\">deep-freeze</a> sur votre <code class=\"language-text\">state</code> pour vous assurer que toutes les actions retournent de nouvelles r√©f√©rences.</p>\n<p>En fin de compte, le fait de tester vos <a href=\"https://redux.js.org/basics/reducers\">reducer</a>s vous permettra de remanier facilement la structure interne de leur √©tat sans risquer d‚Äôintroduire des r√©gressions.</p>\n<h2 id=\"conserver-limmuabilit√©-et-la-lisibilit√©-de-vos-reducers\" style=\"position:relative;\"><a href=\"#conserver-limmuabilit%C3%A9-et-la-lisibilit%C3%A9-de-vos-reducers\" aria-label=\"conserver limmuabilit√© et la lisibilit√© de vos reducers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conserver l‚Äôimmuabilit√© et la lisibilit√© de vos reducers</h2>\n<p>Un <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est une fonction qui doit retourner une nouvelle version de l‚Äô√©tat contenant ses nouvelles valeurs tout en gardant les m√™mes r√©f√©rences des objets qui n‚Äôont pas chang√©.\nCela vous permet de profiter pleinement du <em>partage structurel</em> et d‚Äô√©viter de faire exploser votre utilisation de la m√©moire.\nL‚Äôutilisation de l‚Äôop√©rateur <em>spread</em> est donc plus que recommand√©e.</p>\n<p>Cependant, dans le cas o√π l‚Äô√©tat a une structure compliqu√©e et profonde, il peut √™tre verbeux de changer l‚Äô√©tat sans d√©truire les r√©f√©rences qui ne doivent pas changer.</p>\n<p>Par exemple, ici nous voulons surcharger la valeur <code class=\"language-text\">Rhone.Villeurbanne.postal</code> de l‚Äô√©tat tout en gardant les objets qui ne changent pas.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Rhone</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">Lyon</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">postal</span><span class=\"token operator\">:</span> <span class=\"token string\">'69000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">Villeurbanne</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">postal</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">Is√®re</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">Grenoble</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">postal</span><span class=\"token operator\">:</span> <span class=\"token string\">'39000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// When you want to change nested state value and use immutability</span>\n<span class=\"token keyword\">const</span> newState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">Rhone</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>Lyon<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">Villeurbanne</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">postal</span><span class=\"token operator\">:</span> <span class=\"token string\">'69100'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pour √©viter cela, <a href=\"https://github.com/flepretre\">un membre de l‚Äô√©quipe Bedrock</a> a publi√© un paquet qui permet de <code class=\"language-text\">set</code> des attributs imbriqu√©s tout en assurant l‚Äôimmutabilit√© : <a href=\"https://www.npmjs.com/package/immutable-set\">immutable-set</a>\nCe paquet est beaucoup plus facile √† utiliser que des outils comme <a href=\"https://immutable-js.github.io/immutable-js/\">immutable.js</a> car il n‚Äôutilise pas de prototype d‚Äôobjet.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'immutable-set'</span>\n\n<span class=\"token keyword\">const</span> newState <span class=\"token operator\">=</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Rhone.Villeurbanne.postal</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'69100'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"ne-pas-utiliser-le-cas-par-d√©faut\" style=\"position:relative;\"><a href=\"#ne-pas-utiliser-le-cas-par-d%C3%A9faut\" aria-label=\"ne pas utiliser le cas par d√©faut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne pas utiliser le cas par d√©faut</h2>\n<p>L‚Äôimpl√©mentation d‚Äôun <code class=\"language-text\">redux</code> <a href=\"https://redux.js.org/basics/reducers\">reducer</a> consiste tr√®s souvent en un <code class=\"language-text\">switch</code> o√π chaque <code class=\"language-text\">case</code> correspond √† une <code class=\"language-text\">action</code>.\nUn <code class=\"language-text\">switch</code> doit toujours d√©finir le cas <code class=\"language-text\">default</code> si vous suivez les r√®gles <code class=\"language-text\">eslint</code> de base.</p>\n<p>Imaginons le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FOO'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nous pouvons dire na√Øvement que ce <a href=\"https://redux.js.org/basics/reducers\">reducer</a> g√®re deux actions diff√©rentes. Ce n‚Äôest pas le cas.\nSi nous isolons ce <a href=\"https://redux.js.org/basics/reducers\">reducer</a>, il n‚Äôy a que deux types d‚Äò‚Äúactions‚Äù qui peuvent changer cet √©tat : l‚Äôaction ‚ÄúOFO‚Äù et toute autre action.</p>\n<p>Cependant, si vous avez suivi le conseil de d√©couper vos reducers, vous n‚Äôavez pas qu‚Äôun seul reducer agissant sur votre store.</p>\n<p>C‚Äôest l√† que le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> pr√©c√©dent pose probl√®me.\nEn effet, toute autre action changera cet √©tat en un √©tat <code class=\"language-text\">default</code>.\nUne action <code class=\"language-text\">dispatch</code> passera par chacun des reducers associ√©s √† celui-ci.\nUne action √† l‚Äôautre bout de votre application pourrait affecter cet √©tat sans √™tre exprim√©e dans le code.\nCeci doit √™tre √©vit√©.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADBUlEQVQoz31TS28TZxS9cZJuumgpi/YHdN1KIAES6RTW3aFu+iP4CV1UEVKlKohFi6ApAhKqRIJQIC4JdsKMkzTO+D3jedljeybjGT9jiHFsz8w3H7eyDZuq4kpH93XO0d1cgA/E3NwcIGIIEWf/A3hwbR5wf+/TTox9dMLH/d7B/rATY3+D3Zw9HeaEmbUXiRnxsD999tzFT74+e/6zCxcvnQaY+njxjztXnj/fuM5xsZ/Ww+H5jc3Nawu/LMwBQMiORn42oy8wsnjbZe/eodWtCMIWX4KVZ7uwtLYNGzvq6CJo+wgDRLC6OO4BYLYWTOp3/cwoD1d//9JLxA/NyCba21F0UwkZ9uXmDTZlrGwnKktc2nqwxZdX1Rpdkm1vWXHIsmAOlv/JN/7U6vSebHv3tRq9tyfWV/KHw2WpRu+rsnMVM/z3b7PpH2pPHp+GhNZGLlUZI5ap4G7OQL0VoFbzUW8GqNh9TOtt1Ft0MmsFmCw0Uau7WGwEKDnkYc9sAIopqD9ZAyg0AlI5QlI6IiRZyRI2x5IDnSd6i5CcWSU7Ekc4kSVpo0iKzYAcFNOEEzkSk2KuVO2g6tDVAkFoa8ZHr7YiU6DWfCzUg0CrD2mqrFM2m6Q7+QwVzS7lNZO+zPA0mtyncaVIBaNLd0RhzIlrki/bb1BxgodmB6HUoiHBJgCq478dnV6oB1hqIaq2j7Llomj2UK4OUTRO8EBqoGJ7k5nlolx1x9xig2Lecu8WGwT0ZhDKGgOAVOnkTLrcv5wunzBJvcvkzAEjVj0mbweM1kDmKd+8MH8rfKnUwW8Ey/tWsDxGsFwmqR8zqXLvMl/sfT4yylT68FLoAOQtFxTHB8X2xtBbCKU2QukYQVF1eM3f/EoML3y3l1CgNkTQ25P9e0260p9oHR9YcWIYUhwvJNteSHmHsnE4jTcAjvOLp46kSL8tRbGnPT1PhV+hWlFn3/NGmqwxmBqbOz7EC93/f7ljYQm6iR9hsH0m9Fr+e/2VFJYHhcdf9Avr0FP/mvrQu/4Lfs2JXdzxoq0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/847fbba6812318a026c231349b6a15c2/ba381/combineReducer.webp 200w,\n/static/847fbba6812318a026c231349b6a15c2/7f61c/combineReducer.webp 400w,\n/static/847fbba6812318a026c231349b6a15c2/c71bf/combineReducer.webp 721w\"\n              sizes=\"(max-width: 721px) 100vw, 721px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/847fbba6812318a026c231349b6a15c2/772e8/combineReducer.png 200w,\n/static/847fbba6812318a026c231349b6a15c2/e17e5/combineReducer.png 400w,\n/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png 721w\"\n            sizes=\"(max-width: 721px) 100vw, 721px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png\"\n            alt=\"sch√©ma du reducer combin√©\"\n            title=\"sch√©ma du reducer combin√©\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Si vous voulez modifier l‚Äô√©tat avec une action d‚Äôun autre module, vous pouvez le faire en ajoutant un <code class=\"language-text\">case</code> sur cette action.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FOO'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'otherModule/BAR'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"utiliser-des-middlewares-personnalis√©s\" style=\"position:relative;\"><a href=\"#utiliser-des-middlewares-personnalis%C3%A9s\" aria-label=\"utiliser des middlewares personnalis√©s permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Utiliser des middlewares personnalis√©s</h2>\n<p>J‚Äôai souvent vu des comportements <code class=\"language-text\">action</code> √™tre copi√©s et coll√©s, d‚Äôune action √† l‚Äôautre.\nQuand on est d√©veloppeur, le ‚Äúcopier-coller‚Äù n‚Äôest jamais la bonne m√©thode.</p>\n<p>L‚Äôexemple le plus courant est la gestion des appels HTTP pendant une action qui utilise <code class=\"language-text\">redux-thunk</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/api/foo'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FOO'</span><span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/api/bar'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'BAR'</span><span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ces deux actions sont fondamentalement la m√™me chose, nous pourrions tr√®s bien faire une usine qui ferait le code en commun.</p>\n<p>En gros, l‚Äôaction <em>meta</em> que nous voulons repr√©senter ici quand elle est <code class=\"language-text\">dispatch√©e</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">R√©cup√©rer quelque chose\n-- retourner l'action avec le r√©sultat\n-- en cas d'erreur, faire quelque chose</code></pre></div>\n<p>On pourrait tr√®s bien d√©finir un middleware qui s‚Äôoccuperait de ce comportement.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">http</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      action<span class=\"token punctuation\">.</span>result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// in redux store init</span>\n<span class=\"token keyword\">const</span> exampleApp <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span>reducers<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>exampleApp<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ainsi, les deux actions pr√©c√©dentes pourraient √™tre √©crites de mani√®re beaucoup plus simple :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FOO'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">http</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://example.com/api/foo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'BAR'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">http</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://example.com/api/bar'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Les grands avantages de l‚Äôutilisation d‚Äôun intergiciel dans une application complexe :</p>\n<ul>\n<li>√©vite la duplication du code</li>\n<li>vous permet de d√©finir des comportements communs entre vos actions</li>\n<li>standardisation des types d‚Äôactions redux <em>meta</em>.</li>\n</ul>\n<h2 id=\"√©viter-le-rerender-li√©-√†-redux\" style=\"position:relative;\"><a href=\"#%C3%A9viter-le-rerender-li%C3%A9-%C3%A0-redux\" aria-label=\"√©viter le rerender li√© √† redux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>√âviter le rerender li√© √† redux</h2>\n<p>L‚Äôastuce quand on utilise redux est de d√©clencher le re-render des composants quand on les connecte √† l‚Äô√©tat.\nM√™me si [les re-render ne sont pas toujours un probl√®me], le re-render caus√© par l‚Äôutilisation de redux doit vraiment √™tre √©vit√©.\nIl suffit de se m√©fier des pi√®ges suivants.</p>\n<h3 id=\"ne-pas-cr√©er-de-r√©f√©rence-dans-le-selector\" style=\"position:relative;\"><a href=\"#ne-pas-cr%C3%A9er-de-r%C3%A9f%C3%A9rence-dans-le-selector\" aria-label=\"ne pas cr√©er de r√©f√©rence dans le selector permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne pas cr√©er de r√©f√©rence dans le <em>selector</em>.</h3>\n<p>Imaginons le prochain <em>s√©lecteur</em> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">userId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ici, le d√©veloppeur voulait s‚Äôassurer que son <em>s√©lecteur</em> est prot√©g√© contre les nullit√©s et renvoie toujours un <em>objet</em>.\nC‚Äôest quelque chose que nous voyons assez souvent.</p>\n<p>Chaque fois que ce s√©lecteur sera appel√© pour un <code class=\"language-text\">utilisateur</code> non pr√©sent dans l‚Äô√©tat, il retournera un nouvel objet, une nouvelle r√©f√©rence.</p>\n<blockquote>\n<p>Avec <a href=\"\">useSelector</a>, retourner un nouvel objet √† chaque fois forcera toujours un re-rendu par d√©faut.\n<a href=\"https://react-redux.js.org/api/hooks#equality-comparisons-and-updates\">Doc de react-redux</a></p>\n</blockquote>\n<p>Cependant, dans le cas d‚Äôun objet, comme dans l‚Äôexemple ci-dessus (ou d‚Äôun tableau), la r√©f√©rence de cette valeur par d√©faut est nouvelle √† chaque fois que le s√©lecteur est ex√©cut√©.\nDe m√™me pour les valeurs par d√©faut dans la d√©structuration, vous ne devriez jamais faire ceci :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUsers</span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    users</code></pre></div>\n<p>Que faire alors ?\nDans la mesure du possible, les valeurs par d√©faut doivent √™tre stock√©es dans le reducer.\nSinon, la valeur par d√©faut doit √™tre extraite dans une constante afin que la r√©f√©rence reste la m√™me.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> defaultUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">userId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> defaultUser</code></pre></div>\n<p>Il en va de m√™me pour l‚Äôutilisation du s√©lecteur qui renvoie une nouvelle r√©f√©rence √† chaque appel.\nL‚Äôutilisation de la fonction <code class=\"language-text\">filter</code> renvoie un nouveau tableau √† chaque fois une nouvelle r√©f√©rence m√™me si les conditions du filtre n‚Äôont pas chang√©.</p>\n<p>Pour continuer, il est important que <a href=\"https://redux.js.org/recipes/usage-with-typescript#typing-the-useselector-hook\">useSelector</a> ne renvoie pas une fonction.\nEn fait, vous ne devez jamais faire cela :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">userId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> uider <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>getUserById<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Un s√©lecteur ne doit pas retourner une <em>vue</em> (une copie) de l‚Äô√©tat mais directement ce qu‚Äôil contient.\nEn respectant ce principe, vos composants ne se rendront que si une action modifie l‚Äô√©tat.\nDes utilitaires tels que <a href=\"https://www.npmjs.com/package/reselect\">reselect</a> peuvent √™tre utilis√©s pour impl√©menter des s√©lecteurs avec un syst√®me de m√©moire.</p>\n<h3 id=\"ne-transformez-pas-vos-donn√©es-dans-les-composants\" style=\"position:relative;\"><a href=\"#ne-transformez-pas-vos-donn%C3%A9es-dans-les-composants\" aria-label=\"ne transformez pas vos donn√©es dans les composants permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne transformez pas vos donn√©es dans les composants</h3>\n<p>Parfois, les donn√©es contenues dans le <code class=\"language-text\">state</code> ne sont pas dans le bon format d‚Äôaffichage.\nNous aurions rapidement tendance √† la g√©n√©rer directement dans le composant.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>getUser<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://profil-pic.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ici, l‚Äôurl de l‚Äôimage est calcul√©e dynamiquement dans le composant, et donc √† chaque rendu.\nNous pr√©f√©rons modifier nos reducers afin d‚Äôinclure un attribut <code class=\"language-text\">profileUrl</code> pour que cette information soit directement accessible.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">case</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">user/SET_USER</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>action<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">profilUrl</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://profil-pic.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ces informations sont ensuite calcul√©es une fois par action et non √† chaque fois qu‚Äôelles sont rendues.</p>\n<h2 id=\"nutilisez-pas-usereducer-pour-vos-donn√©es-professionnelles\" style=\"position:relative;\"><a href=\"#nutilisez-pas-usereducer-pour-vos-donn%C3%A9es-professionnelles\" aria-label=\"nutilisez pas usereducer pour vos donn√©es professionnelles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>N‚Äôutilisez pas <em>useReducer</em> pour vos donn√©es professionnelles</h2>\n<p>Depuis l‚Äôarriv√©e des hooks, nous avons beaucoup plus d‚Äôoutils fournis directement par React pour g√©rer l‚Äô√©tat de nos composants.\nLe hook <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a> permet de d√©finir un √©tat qui pourra √™tre modifi√© par des actions.\nOn est vraiment tr√®s tr√®s proche d‚Äôun √©tat redux que l‚Äôon peut associer √† un composant, c‚Äôest g√©nial.</p>\n<p>Cependant, si vous utilisez redux dans votre application, il semble assez √©trange de devoir utiliser <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a>.\nVous avez d√©j√† tout ce dont vous avez besoin pour manipuler un √©tat complexe.</p>\n<p>De plus, en utilisant redux au lieu du hook <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a>, vous pouvez profiter d‚Äôoutils de d√©veloppement et de middlewares vraiment efficaces.</p>\n<hr>\n<h2 id=\"ressources-utiles\" style=\"position:relative;\"><a href=\"#ressources-utiles\" aria-label=\"ressources utiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ressources utiles</h2>\n<ul>\n<li><a href=\"https://redux.js.org/basics/usage-with-react\">Utiliser react avec redux</a></li>\n<li><a href=\"https://github.com/reduxjs/redux/issues/653#issuecomment-216844781\">flux redux anim√© par Dan Abramov</a>\n<img src=\"/404460ceece985d433e1ed1f36cd4215/redux-flow.gif\" alt=\"flux redux anim√© par Dan Abramov\"></li>\n<li><a href=\"https://redux.js.org/api/applymiddleware\">documentation redux sur les middlewares</a></li>\n<li><a href=\"https://www.npmjs.com/package/immutable-set\">immutable-set</a></li>\n</ul>\n<p>Merci aux relecteurs :\n<a href=\"https://github.com/flepretre\">@flepretre</a>,\n<a href=\"https://github.com/mfrachet\">@mfrachet</a>,\n<a href=\"https://github.com/fdubost\">@fdubost</a>,\n<a href=\"https://github.com/ncuillery\">@ncuillery</a>,\n<a href=\"https://github.com/renaudAmsellem\">@renaudAmsellem</a>_</p>","headings":[{"value":"√âvitez d‚Äôavoir un seul reducer"},{"value":"Acc√®s par proxy √† l‚Äô√©tat"},{"value":"Pr√©fixer le nom de vos actions"},{"value":"Toujours tester vos reducers"},{"value":"Conserver l‚Äôimmuabilit√© et la lisibilit√© de vos reducers"},{"value":"Ne pas utiliser le cas par d√©faut"},{"value":"Utiliser des middlewares personnalis√©s"},{"value":"√âviter le rerender li√© √† redux"},{"value":"Ne pas cr√©er de r√©f√©rence dans le selector."},{"value":"Ne transformez pas vos donn√©es dans les composants"},{"value":"N‚Äôutilisez pas useReducer pour vos donn√©es professionnelles"},{"value":"Ressources utiles"}],"wordCount":{"words":1711},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%C3%A9vitez-davoir-un-seul-reducer\">√âvitez d‚Äôavoir un seul reducer</a></p>\n<ul>\n<li><a href=\"#acc%C3%A8s-par-proxy-%C3%A0-l%C3%A9tat\">Acc√®s par proxy √† l‚Äô√©tat</a></li>\n<li><a href=\"#pr%C3%A9fixer-le-nom-de-vos-actions\">Pr√©fixer le nom de vos actions</a></li>\n<li><a href=\"#toujours-tester-vos-reducers\">Toujours tester vos reducers</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#conserver-limmuabilit%C3%A9-et-la-lisibilit%C3%A9-de-vos-reducers\">Conserver l‚Äôimmuabilit√© et la lisibilit√© de vos reducers</a></p>\n</li>\n<li>\n<p><a href=\"#ne-pas-utiliser-le-cas-par-d%C3%A9faut\">Ne pas utiliser le cas par d√©faut</a></p>\n</li>\n<li>\n<p><a href=\"#utiliser-des-middlewares-personnalis%C3%A9s\">Utiliser des middlewares personnalis√©s</a></p>\n</li>\n<li>\n<p><a href=\"#%C3%A9viter-le-rerender-li%C3%A9-%C3%A0-redux\">√âviter le rerender li√© √† redux</a></p>\n<ul>\n<li><a href=\"#ne-pas-cr%C3%A9er-de-r%C3%A9f%C3%A9rence-dans-le-selector\">Ne pas cr√©er de r√©f√©rence dans le <em>selector</em>.</a></li>\n<li><a href=\"#ne-transformez-pas-vos-donn%C3%A9es-dans-les-composants\">Ne transformez pas vos donn√©es dans les composants</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#nutilisez-pas-usereducer-pour-vos-donn%C3%A9es-professionnelles\">N‚Äôutilisez pas <em>useReducer</em> pour vos donn√©es professionnelles</a></p>\n</li>\n<li>\n<p><a href=\"#ressources-utiles\">Ressources utiles</a></p>\n</li>\n</ul>","frontmatter":{"title":"React/Redux : pi√®ges et meilleures pratiques","date":"March 23, 2021","dateJson":"2021-03-23","translations":["en","react-redux-pitfalls-and-best-pratices"],"description":"Nous utilisons React et Redux depuis presque 4 ans chez Bedrock sur notre plateforme vid√©o nomm√©e 6play. Les bonnes pratiques et les erreurs √† √©viter ont √©t√© rassembl√©es dans cet article.","language":"fr","tags":["react","redux","web"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.948051948051948,"src":"/static/ee72c19029938b25ca14c9387d5095ab/4fe8c/redux.jpg","srcSet":"/static/ee72c19029938b25ca14c9387d5095ab/aabdf/redux.jpg 150w,\n/static/ee72c19029938b25ca14c9387d5095ab/9dc27/redux.jpg 300w,\n/static/ee72c19029938b25ca14c9387d5095ab/4fe8c/redux.jpg 600w,\n/static/ee72c19029938b25ca14c9387d5095ab/9842e/redux.jpg 900w,\n/static/ee72c19029938b25ca14c9387d5095ab/47498/redux.jpg 1200w,\n/static/ee72c19029938b25ca14c9387d5095ab/3b765/redux.jpg 3557w","srcWebp":"/static/ee72c19029938b25ca14c9387d5095ab/ad85c/redux.webp","srcSetWebp":"/static/ee72c19029938b25ca14c9387d5095ab/e7487/redux.webp 150w,\n/static/ee72c19029938b25ca14c9387d5095ab/403a4/redux.webp 300w,\n/static/ee72c19029938b25ca14c9387d5095ab/ad85c/redux.webp 600w,\n/static/ee72c19029938b25ca14c9387d5095ab/210c1/redux.webp 900w,\n/static/ee72c19029938b25ca14c9387d5095ab/99238/redux.webp 1200w,\n/static/ee72c19029938b25ca14c9387d5095ab/82a90/redux.webp 3557w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/10d63/redux.jpg"},"image16x9":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/6edcc/redux.jpg"},"image4x3":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/e14ae/redux.jpg"},"image1x1":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/db124/redux.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Comment ne pas jeter son application tous les deux ans ? Retour d‚Äôexp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web‚Ä¶","fields":{"slug":"/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/"},"timeToRead":22,"frontmatter":{"title":"Bonnes pratiques pour la maintenance d'une application web","date":"August 25, 2021","dateJson":"2021-08-25","description":"Comment ne pas jeter son projet au bout de 2 ans ? Retour d'exp√©rience bas√© sur les bonnes pratiques appliqu√©es √† la plateforme web d√©velopp√©e chez Bedrock Streaming.","tags":["web","javascript","bedrock"]}}},{"node":{"excerpt":"Tout part toujours d‚Äôune id√©e La semaine derni√®re, alors que je mettais en place le mode sombre sur mon site perso, je me suis motiv√© √†‚Ä¶","fields":{"slug":"/fr/use-reduced-motion/"},"timeToRead":3,"frontmatter":{"title":"Et voici use-reduced-motion!","date":"May 01, 2020","dateJson":"2020-05-01","description":"Annonce de la publication d'un package open source pour la gestion de la r√©duction des mouvements pour l'accessibilit√© du web. Inspir√© de mes lectures et voulant en apprendre plus sur les Hook de React.","tags":["react","a11y"]}}}]}},"pageContext":{"slug":"/fr/react-redux-pieges-bonnes-pratiques/","tags":["react","redux","web"],"language":"fr","previous":{"fields":{"slug":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/"},"frontmatter":{"title":"Esbuild, le bundler incroyablement rapide üí® et prometteur üìà !","tags":["webpack","javascript","bundler"]}},"next":{"fields":{"slug":"/fr/vitejs-concurrent-performant-webpack-pour-react/"},"frontmatter":{"title":"Vite, le rempla√ßant √† webpack ?!üòÆ","tags":["webpack","esbuild","vitejs","bundler"]}}}},
    "staticQueryHashes": ["1264045386","1666466174","2564629789","4061151221","62118570"]}