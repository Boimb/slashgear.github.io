{"componentChunkName":"component---src-templates-blog-post-js","path":"/fr/react-redux-pieges-bonnes-pratiques/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://slashgear.github.io"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille à Lyon et développe des choses utiles à <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nN’hésites pas à aller voir <a href=\"/conferences\">ses conférences sur la page dédiée</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"93e22b2c-0d88-5450-9f97-3b48904dac26","excerpt":"Après 2 ans d’utilisation de React avec Redux pour la plateforme vidéo 6play, j’ai pu identifier les bonnes pratiques et les pièges à éviter…","html":"<p>Après 2 ans d’utilisation de React avec Redux pour la plateforme vidéo <a href=\"https://6play.fr\">6play</a>, j’ai pu identifier les bonnes pratiques et les pièges à éviter à tout prix.\nL’équipe de <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a> (à laquelle j’appartiens actuellement) a maintenu la pile technique du projet à jour pour profiter des nouvelles fonctionnalités de <code class=\"language-text\">react</code>, <code class=\"language-text\">react-redux</code> et <code class=\"language-text\">redux</code>.</p>\n<p>Voici donc mes conseils pour maintenir et utiliser React et Redux dans votre application sans devenir fou.</p>\n<p>Cet article n’est pas une introduction à React ou Redux. Je vous recommande <a href=\"https://redux.js.org/basics/usage-with-react\">cette documentation</a> si vous voulez voir comment les mettre en œuvre dans vos applications.</p>\n<p>Vous pouvez également jeter un coup d’œil au <a href=\"https://redux.js.org/style-guide/style-guide\">guide de style officiel de Redux</a> dans lequel vous pourriez trouver certains de ces conseils et d’autres.\nNotez que si vous utilisez le <a href=\"https://redux-toolkit.js.org/\">Redux Toolkit</a>, certaines des astuces/pratiques présentées dans cet article sont déjà intégrées directement dans l’API.</p>\n<h2 id=\"évitez-davoir-un-seul-reducer\" style=\"position:relative;\"><a href=\"#%C3%A9vitez-davoir-un-seul-reducer\" aria-label=\"évitez davoir un seul reducer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Évitez d’avoir un seul reducer</h2>\n<p>Le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est la fonction qui est en charge de construire un nouvel état à chaque <code class=\"language-text\">action</code>.\nOn pourrait être tenté de ne manipuler qu’un seul reducer.\nDans le cas d’une petite application, ce n’est pas un problème.\nPour les applications exprimant une activité complexe et évolutive, il est préférable d’opter pour la solution [combineReducers].</p>\n<p>Cette fonctionnalité de <code class=\"language-text\">redux</code> permet de manipuler non pas un mais plusieurs <a href=\"https://redux.js.org/basics/reducers\">reducer</a>s qui agissent respectivement sur l’état.</p>\n<blockquote>\n<p>Quand et comment scinder son application ?</p>\n</blockquote>\n<p>Ce que nous recommandons à Bedrock, c’est un découpage fonctionnel de l’application.\nDans mon approche, nous aurions tendance à représenter le métier de l’application plus que les trucs techniques sous-entendus.\nDe très bons articles l’expliquent notamment par l’utilisation des <a href=\"https://en.wikipedia.org/wiki/Domain-driven_design\">principes DDD</a>.</p>\n<p>À Bedrock, nous utilisons un dossier nommé <em>modules</em> qui regroupe les différents dossiers associés à la fonctionnalité de votre application.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.reducer.js\n    product/\n      __tests__/\n        product.reducer.spec.js\n      components/\n      product.reducer.js\n    account/\n      __tests__/\n      account.reducer.spec.js\n      components/\n      account.reducer.js\n  store.js\n  index.js</code></pre></div>\n<p>Ainsi, dans <code class=\"language-text\">store.js</code>, tout ce que vous avez à faire est de combiner vos différents reducers.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/user.reducer.js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> product <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/product.reducer.js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> account <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/user/account.reducer.js'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> product<span class=\"token punctuation\">,</span> account <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>En suivant ce principe, vous allez :</p>\n<ul>\n<li>garder les reducers lisibles car ils ont une portée limitée.</li>\n<li>structurer et définir les fonctionnalités de votre application</li>\n<li>faciliter les tests</li>\n</ul>\n<p>Historiquement, cette segmentation nous a permis de supprimer des domaines d’application complets sans avoir d’impact sur l’ensemble du codebase, simplement en supprimant le dossier <code class=\"language-text\">module</code> associé à la fonctionnalité.</p>\n<h3 id=\"accès-par-proxy-à-létat\" style=\"position:relative;\"><a href=\"#acc%C3%A8s-par-proxy-%C3%A0-l%C3%A9tat\" aria-label=\"accès par proxy à létat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accès par proxy à l’état</h3>\n<p>Maintenant que vos reducers ont été placés dans le <code class=\"language-text\">module</code> fonctionnel, vous devez permettre à vos composants d’accéder à l’état via un <code class=\"language-text\">selector</code>.\nUn <code class=\"language-text\">selector</code> est une fonction qui a l’<code class=\"language-text\">state</code> comme paramètre, et récupère ses informations.\nCela peut aussi vous permettre de ne sélectionner que les props nécessaires au composant en vous découplant de la structure de l’état.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> lastName <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> lastName</code></pre></div>\n<p>Vous pouvez également passer des paramètres à un “sélecteur” en l’entourant d’une fonction.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getProduct</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">productId</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> product<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> list <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  list<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span> <span class=\"token operator\">=></span> product<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> productId<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Cela vous permettra de les utiliser dans vos composants en utilisant le crochet <a href=\"https://redux.js.org/recipes/usage-with-typescript#typing-the-useselector-hook\">useSelector</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> product <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token function\">getProduct</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Il est spécifié dans la doc <code class=\"language-text\">react-redux</code> que le <em>selector</em> est appelé pour chaque rendu du composant.\nSi la référence de la fonction <code class=\"language-text\">selector</code> ne change pas, une version en cache de l’objet peut être retournée directement.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.reducer.js\n      user.selectors.js &lt;--- This is where all module selectors are exported</code></pre></div>\n<h3 id=\"préfixer-le-nom-de-vos-actions\" style=\"position:relative;\"><a href=\"#pr%C3%A9fixer-le-nom-de-vos-actions\" aria-label=\"préfixer le nom de vos actions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Préfixer le nom de vos actions</h3>\n<blockquote>\n<p>Je vous conseille vraiment de définir des règles de nommage pour vos actions et si possible de les vérifier avec une règle <code class=\"language-text\">eslint</code>.</p>\n</blockquote>\n<p>Les actions sont en lettres majuscules séparées par ’_’.\nVoici un exemple avec cette action : <code class=\"language-text\">SET_USERS</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">app/\n  modules/\n    user/\n      __tests__/\n        user.reducer.spec.js\n      components/\n      user.actions.js &lt;--- This is where all module action creators are exported\n      user.reducer.js\n      user.selectors.js</code></pre></div>\n<p>Les noms des actions sont préfixés par le nom du <code class=\"language-text\">module</code> dans lequel il se trouve.\nCela donne un nom complet : <code class=\"language-text\">user/SET_USERS</code>.\nUn grand avantage de cette règle de nommage est que vous pouvez facilement filtrer l’action dans <a href=\"https://github.com/reduxjs/redux-devtools\">redux-devtools</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/10f47/redux-devtools.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB70lEQVQ4y61Ua2/aQBD03yEGY8AGv7F9fgMmhgYITaX2//+I6e5iR0RppRL1w2jvOTe7N3ea7eew3Ay2l2O+SuFENVZhhbmTwlvXUPUBqjogLTskhM3zFe3xB3aHN3SnnzhefqHcnhHne0RqB82nTbaXYUmEUyuCbvp4mnpEniAnMl7U7M9EcsW2u6BuT6i2L0TyQv0rdgRVdSiao0Dz4wZuWArReOZjMgukbTkKSbHH2IphLGMsnIjGIjoohGmFMOaBYErgPSyCoQXJBiFhTIMDeGJBKWekUKf+iBcbtw0cdfPW5ihtw8WoB6XcIEq3MO11v8iXCUmZUuAx7kucukI+uiMQ9OpEIaccZy2lXckAK9R7hUw4HPB0t+lPGNbIpayp8Kxy5RcwFuF7yo8QflDIN8l1NK01JvP/QMgKOQ415EKzJ+VSHiUMekKOCyJhvCv8CqEbVZKuE5T0YhTVMPpom4cJydTiRboUtsqQMivlF/AlhXzDTMzqxv1L4RqqciD0/p2QPwAmZIUzemK6TNyMrcrnm8cmzmcz36OfF8JItfBTsg2Ze0nmtrwCtl9Km8dsqi3DIo/+La7otS2pbZIgLam/IWZUR1T0NTXdG9TmhLr7LrFoX5HR99TQd8Vx6BftBfmOcUZFa7ld7l/xG1wzF6YKaa15AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/ba381/redux-devtools.webp 200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/7f61c/redux-devtools.webp 400w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/d00b9/redux-devtools.webp 800w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/92f8c/redux-devtools.webp 1200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/fad48/redux-devtools.webp 1600w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/8ed74/redux-devtools.webp 2726w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/772e8/redux-devtools.png 200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/e17e5/redux-devtools.png 400w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/5a190/redux-devtools.png 800w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/c1b63/redux-devtools.png 1200w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/29007/redux-devtools.png 1600w,\n/static/6ddc87a11f1bc6add7fb7ee327893e94/10f47/redux-devtools.png 2726w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6ddc87a11f1bc6add7fb7ee327893e94/5a190/redux-devtools.png\"\n            alt=\"redux-devtools screenshot\"\n            title=\"redux-devtools screenshot\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"toujours-tester-vos-reducers\" style=\"position:relative;\"><a href=\"#toujours-tester-vos-reducers\" aria-label=\"toujours tester vos reducers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Toujours tester vos reducers</h3>\n<p>Les <code class=\"language-text\">reducers</code> sont les détenteurs de l’activité de votre application.\nIls manipulent l’état de votre application.</p>\n<p><strong>Ce code est donc <em>sensible</em>.</strong></p>\n<p>➡️ Une modification peut avoir beaucoup d’impact sur votre application.</p>\n<p><strong>Ce code est riche en règles de gestion</strong>.</p>\n<p>➡️ Vous devez être sûr que celles-ci sont correctement mises en œuvre.</p>\n<p>La bonne nouvelle est que ce code est relativement facile à tester.\nUn <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est une fonction unique qui prend 2 paramètres.\nCette fonction retournera un nouvel <code class=\"language-text\">state</code> en fonction du type d’action et de ses paramètres.</p>\n<p>Voici la structure standard pour tester les <a href=\"https://redux.js.org/basics/reducers\">reducer</a> avec <a href=\"https://jestjs.io/\">Jest</a> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ReducerName'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Init a new state</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ACTION'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Group tests by action type</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with some params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with other params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SECOND_ACTION'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should test action with some params'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Je vous recommande également d’utiliser le package <a href=\"https://www.npmjs.com/package/deep-freeze\">deep-freeze</a> sur votre <code class=\"language-text\">state</code> pour vous assurer que toutes les actions retournent de nouvelles références.</p>\n<p>En fin de compte, le fait de tester vos <a href=\"https://redux.js.org/basics/reducers\">reducer</a>s vous permettra de remanier facilement la structure interne de leur état sans risquer d’introduire des régressions.</p>\n<h2 id=\"conserver-limmuabilité-et-la-lisibilité-de-vos-reducers\" style=\"position:relative;\"><a href=\"#conserver-limmuabilit%C3%A9-et-la-lisibilit%C3%A9-de-vos-reducers\" aria-label=\"conserver limmuabilité et la lisibilité de vos reducers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conserver l’immuabilité et la lisibilité de vos reducers</h2>\n<p>Un <a href=\"https://redux.js.org/basics/reducers\">reducer</a> est une fonction qui doit retourner une nouvelle version de l’état contenant ses nouvelles valeurs tout en gardant les mêmes références des objets qui n’ont pas changé.\nCela vous permet de profiter pleinement du <em>partage structurel</em> et d’éviter de faire exploser votre utilisation de la mémoire.\nL’utilisation de l’opérateur <em>spread</em> est donc plus que recommandée.</p>\n<p>Cependant, dans le cas où l’état a une structure compliquée et profonde, il peut être verbeux de changer l’état sans détruire les références qui ne doivent pas changer.</p>\n<p>Par exemple, ici nous voulons surcharger la valeur <code class=\"language-text\">Rhone.Villeurbanne.postal</code> de l’état tout en gardant les objets qui ne changent pas.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  Rhone<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    Lyon<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      postal<span class=\"token operator\">:</span> <span class=\"token string\">'69000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Villeurbanne<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      postal<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  Isère<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    Grenoble<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      postal<span class=\"token operator\">:</span> <span class=\"token string\">'39000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// When you want to change nested state value and use immutability</span>\n<span class=\"token keyword\">const</span> newState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n  Rhone<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>Lyon<span class=\"token punctuation\">,</span>\n    Villeurbanne<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      postal<span class=\"token operator\">:</span> <span class=\"token string\">'69100'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pour éviter cela, <a href=\"https://github.com/flepretre\">un membre de l’équipe Bedrock</a> a publié un paquet qui permet de <code class=\"language-text\">set</code> des attributs imbriqués tout en assurant l’immutabilité : <a href=\"https://www.npmjs.com/package/immutable-set\">immutable-set</a>\nCe paquet est beaucoup plus facile à utiliser que des outils comme <a href=\"https://immutable-js.github.io/immutable-js/\">immutable.js</a> car il n’utilise pas de prototype d’objet.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'immutable-set'</span>\n\n<span class=\"token keyword\">const</span> newState <span class=\"token operator\">=</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Rhone.Villeurbanne.postal</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'69100'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"ne-pas-utiliser-le-cas-par-défaut\" style=\"position:relative;\"><a href=\"#ne-pas-utiliser-le-cas-par-d%C3%A9faut\" aria-label=\"ne pas utiliser le cas par défaut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne pas utiliser le cas par défaut</h2>\n<p>L’implémentation d’un <code class=\"language-text\">redux</code> <a href=\"https://redux.js.org/basics/reducers\">reducer</a> consiste très souvent en un <code class=\"language-text\">switch</code> où chaque <code class=\"language-text\">case</code> correspond à une <code class=\"language-text\">action</code>.\nUn <code class=\"language-text\">switch</code> doit toujours définir le cas <code class=\"language-text\">default</code> si vous suivez les règles <code class=\"language-text\">eslint</code> de base.</p>\n<p>Imaginons le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n  index<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FOO'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nous pouvons dire naïvement que ce <a href=\"https://redux.js.org/basics/reducers\">reducer</a> gère deux actions différentes. Ce n’est pas le cas.\nSi nous isolons ce <a href=\"https://redux.js.org/basics/reducers\">reducer</a>, il n’y a que deux types d‘“actions” qui peuvent changer cet état : l’action “OFO” et toute autre action.</p>\n<p>Cependant, si vous avez suivi le conseil de découper vos reducers, vous n’avez pas qu’un seul reducer agissant sur votre store.</p>\n<p>C’est là que le <a href=\"https://redux.js.org/basics/reducers\">reducer</a> précédent pose problème.\nEn effet, toute autre action changera cet état en un état <code class=\"language-text\">default</code>.\nUne action <code class=\"language-text\">dispatch</code> passera par chacun des reducers associés à celui-ci.\nUne action à l’autre bout de votre application pourrait affecter cet état sans être exprimée dans le code.\nCeci doit être évité.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 721px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9UlEQVQoz31TSU9TURQ+FHDjwmmhP8C1JpqoiVhx7c648Uf4E1wYYmJiMC7UqGhkMpAoTlTBFmwLSHmd6Ht9U/s6PNrXmSK1dLzvcrxtcWOMN/ly75m+892bewD+s4aGhgARLQyDfwGm740Arq8dLbud7/Y4T7u6sd5g5yewGjL6bS5+YO6bd0DYqvWfv3D5yNnzF49fujx8AqDv8NjLVze+fl146HK5787bbCMLi4v3Rh+MDrF+FsNhv687vqF97HnT+foVTS/ZEZa4GMx8XoXJuWVYWFE6iqDURqizPVXBrs3WYNbsnQ/sgc7emH1xuuX1bOn2RTSWHdj0eyVYlwqPnP7kzLI3MekKpKaXuPiskqWTktGakjNkitfrUz/C+Tdqjo4z34SapeNrQm4mvNWYErN0QpEytzHI3dzfDNzKfnx/ArxqCV3+RBfuYAJXQ0nUiiaq2TZqBRNlo4YBrcR8tOdjMV+kgGquidG8iWKGvK3qeUDBD7mPcwCRvEkS20hi24T4EpvEGXKSDY0jWpGQkJ4mK6KLuAQnCSSjJFowyUY0wGwXcYvuppguo5KhsxHCnklNHtpZsveBwrpGcqap5hrUH9eoc9NHV8JBKugVyqk6/R7kqMO3Tj1ylPLJCl0R+G6ORxXbkvEL5Yz5Vi8jxIrUwhsEQMm09zvSGSnGioiK0UYp1URBr6KUbqCQ3MMNMc+u3ur5WExKN7u50TzFcKr5OponwJ7HspmsA/hje+cC8dq1QHzP6tMq1pBetwrpljVsmFY1j9ZPXOHSyDPbcKyMV/hU6yqDlU81We6u1R+vXuOi1ZMdomCiBt/5MgDrAHKmDUxBF1qRyS8x7CLIigY/uadnBNvo9TWvDNkGglbqxf/UBBhRt5bZTqFHaJEzLQv7Ehb5APHkVj8+AtgNjx3bFu21kujAqvrpIuUfQzqhDP7J69QwdX1dcgZPpPLvkdvlJ6HivQP15XOWn9KX+R3RJtUj70/VIvNQVT70/W9cfwN+zYldxX96YAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/847fbba6812318a026c231349b6a15c2/ba381/combineReducer.webp 200w,\n/static/847fbba6812318a026c231349b6a15c2/7f61c/combineReducer.webp 400w,\n/static/847fbba6812318a026c231349b6a15c2/c71bf/combineReducer.webp 721w\"\n              sizes=\"(max-width: 721px) 100vw, 721px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/847fbba6812318a026c231349b6a15c2/772e8/combineReducer.png 200w,\n/static/847fbba6812318a026c231349b6a15c2/e17e5/combineReducer.png 400w,\n/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png 721w\"\n            sizes=\"(max-width: 721px) 100vw, 721px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/847fbba6812318a026c231349b6a15c2/01dae/combineReducer.png\"\n            alt=\"schéma du reducer combiné\"\n            title=\"schéma du reducer combiné\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Si vous voulez modifier l’état avec une action d’un autre module, vous pouvez le faire en ajoutant un <code class=\"language-text\">case</code> sur cette action.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FOO'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'otherModule/BAR'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"utiliser-des-middlewares-personnalisés\" style=\"position:relative;\"><a href=\"#utiliser-des-middlewares-personnalis%C3%A9s\" aria-label=\"utiliser des middlewares personnalisés permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Utiliser des middlewares personnalisés</h2>\n<p>J’ai souvent vu des comportements <code class=\"language-text\">action</code> être copiés et collés, d’une action à l’autre.\nQuand on est développeur, le “copier-coller” n’est jamais la bonne méthode.</p>\n<p>L’exemple le plus courant est la gestion des appels HTTP pendant une action qui utilise <code class=\"language-text\">redux-thunk</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/api/foo'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'FOO'</span><span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/api/bar'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'BAR'</span><span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ces deux actions sont fondamentalement la même chose, nous pourrions très bien faire une usine qui ferait le code en commun.</p>\n<p>En gros, l’action <em>meta</em> que nous voulons représenter ici quand elle est <code class=\"language-text\">dispatchée</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Récupérer quelque chose\n-- retourner l&#39;action avec le résultat\n-- en cas d&#39;erreur, faire quelque chose</code></pre></div>\n<p>On pourrait très bien définir un middleware qui s’occuperait de ce comportement.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">http</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      action<span class=\"token punctuation\">.</span>result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// in redux store init</span>\n<span class=\"token keyword\">const</span> exampleApp <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span>reducers<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>exampleApp<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ainsi, les deux actions précédentes pourraient être écrites de manière beaucoup plus simple :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'FOO'</span><span class=\"token punctuation\">,</span> http<span class=\"token operator\">:</span> <span class=\"token string\">'https://example.com/api/foo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'BAR'</span><span class=\"token punctuation\">,</span> http<span class=\"token operator\">:</span> <span class=\"token string\">'https://example.com/api/bar'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Les grands avantages de l’utilisation d’un intergiciel dans une application complexe :</p>\n<ul>\n<li>évite la duplication du code</li>\n<li>vous permet de définir des comportements communs entre vos actions</li>\n<li>standardisation des types d’actions redux <em>meta</em>.</li>\n</ul>\n<h2 id=\"éviter-le-rerender-lié-à-redux\" style=\"position:relative;\"><a href=\"#%C3%A9viter-le-rerender-li%C3%A9-%C3%A0-redux\" aria-label=\"éviter le rerender lié à redux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Éviter le rerender lié à redux</h2>\n<p>L’astuce quand on utilise redux est de déclencher le re-render des composants quand on les connecte à l’état.\nMême si [les re-render ne sont pas toujours un problème], le re-render causé par l’utilisation de redux doit vraiment être évité.\nIl suffit de se méfier des pièges suivants.</p>\n<h3 id=\"ne-pas-créer-de-référence-dans-le-selector\" style=\"position:relative;\"><a href=\"#ne-pas-cr%C3%A9er-de-r%C3%A9f%C3%A9rence-dans-le-selector\" aria-label=\"ne pas créer de référence dans le selector permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne pas créer de référence dans le <em>selector</em>.</h3>\n<p>Imaginons le prochain <em>sélecteur</em> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">userId</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ici, le développeur voulait s’assurer que son <em>sélecteur</em> est protégé contre les nullités et renvoie toujours un <em>objet</em>.\nC’est quelque chose que nous voyons assez souvent.</p>\n<p>Chaque fois que ce sélecteur sera appelé pour un <code class=\"language-text\">utilisateur</code> non présent dans l’état, il retournera un nouvel objet, une nouvelle référence.</p>\n<blockquote>\n<p>Avec <a href=\"\">useSelector</a>, retourner un nouvel objet à chaque fois forcera toujours un re-rendu par défaut.\n<a href=\"https://react-redux.js.org/api/hooks#equality-comparisons-and-updates\">Doc de react-redux</a></p>\n</blockquote>\n<p>Cependant, dans le cas d’un objet, comme dans l’exemple ci-dessus (ou d’un tableau), la référence de cette valeur par défaut est nouvelle à chaque fois que le sélecteur est exécuté.\nDe même pour les valeurs par défaut dans la déstructuration, vous ne devriez jamais faire ceci :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUsers</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> users<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users</code></pre></div>\n<p>Que faire alors ?\nDans la mesure du possible, les valeurs par défaut doivent être stockées dans le reducer.\nSinon, la valeur par défaut doit être extraite dans une constante afin que la référence reste la même.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> defaultUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">userId</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> defaultUser</code></pre></div>\n<p>Il en va de même pour l’utilisation du sélecteur qui renvoie une nouvelle référence à chaque appel.\nL’utilisation de la fonction <code class=\"language-text\">filter</code> renvoie un nouveau tableau à chaque fois une nouvelle référence même si les conditions du filtre n’ont pas changé.</p>\n<p>Pour continuer, il est important que <a href=\"https://redux.js.org/recipes/usage-with-typescript#typing-the-useselector-hook\">useSelector</a> ne renvoie pas une fonction.\nEn fait, vous ne devez jamais faire cela :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUserById</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">userId</span> <span class=\"token operator\">=></span>\n  state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> uider <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>getUserById<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Un sélecteur ne doit pas retourner une <em>vue</em> (une copie) de l’état mais directement ce qu’il contient.\nEn respectant ce principe, vos composants ne se rendront que si une action modifie l’état.\nDes utilitaires tels que <a href=\"https://www.npmjs.com/package/reselect\">reselect</a> peuvent être utilisés pour implémenter des sélecteurs avec un système de mémoire.</p>\n<h3 id=\"ne-transformez-pas-vos-données-dans-les-composants\" style=\"position:relative;\"><a href=\"#ne-transformez-pas-vos-donn%C3%A9es-dans-les-composants\" aria-label=\"ne transformez pas vos données dans les composants permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ne transformez pas vos données dans les composants</h3>\n<p>Parfois, les données contenues dans le <code class=\"language-text\">state</code> ne sont pas dans le bon format d’affichage.\nNous aurions rapidement tendance à la générer directement dans le composant.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>getUser<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://profil-pic.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ici, l’url de l’image est calculée dynamiquement dans le composant, et donc à chaque rendu.\nNous préférons modifier nos reducers afin d’inclure un attribut <code class=\"language-text\">profileUrl</code> pour que cette information soit directement accessible.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">case</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">user/SET_USER</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>action<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span>\n        profilUrl<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://profil-pic.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ces informations sont ensuite calculées une fois par action et non à chaque fois qu’elles sont rendues.</p>\n<h2 id=\"nutilisez-pas-usereducer-pour-vos-données-professionnelles\" style=\"position:relative;\"><a href=\"#nutilisez-pas-usereducer-pour-vos-donn%C3%A9es-professionnelles\" aria-label=\"nutilisez pas usereducer pour vos données professionnelles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>N’utilisez pas <em>useReducer</em> pour vos données professionnelles</h2>\n<p>Depuis l’arrivée des hooks, nous avons beaucoup plus d’outils fournis directement par React pour gérer l’état de nos composants.\nLe hook <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a> permet de définir un état qui pourra être modifié par des actions.\nOn est vraiment très très proche d’un état redux que l’on peut associer à un composant, c’est génial.</p>\n<p>Cependant, si vous utilisez redux dans votre application, il semble assez étrange de devoir utiliser <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a>.\nVous avez déjà tout ce dont vous avez besoin pour manipuler un état complexe.</p>\n<p>De plus, en utilisant redux au lieu du hook <a href=\"https://fr.reactjs.org/docs/hooks-reference.html#usereducer\">useReducer</a>, vous pouvez profiter d’outils de développement et de middlewares vraiment efficaces.</p>\n<hr>\n<h2 id=\"ressources-utiles\" style=\"position:relative;\"><a href=\"#ressources-utiles\" aria-label=\"ressources utiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ressources utiles</h2>\n<ul>\n<li><a href=\"https://redux.js.org/basics/usage-with-react\">Utiliser react avec redux</a></li>\n<li><a href=\"https://github.com/reduxjs/redux/issues/653#issuecomment-216844781\">flux redux animé par Dan Abramov</a>\n<img src=\"/404460ceece985d433e1ed1f36cd4215/redux-flow.gif\" alt=\"flux redux animé par Dan Abramov\"></li>\n<li><a href=\"https://redux.js.org/api/applymiddleware\">documentation redux sur les middlewares</a></li>\n<li><a href=\"https://www.npmjs.com/package/immutable-set\">immutable-set</a></li>\n</ul>\n<p>Merci aux relecteurs :\n<a href=\"https://github.com/flepretre\">@flepretre</a>,\n<a href=\"https://github.com/mfrachet\">@mfrachet</a>,\n<a href=\"https://github.com/fdubost\">@fdubost</a>,\n<a href=\"https://github.com/ncuillery\">@ncuillery</a>,\n<a href=\"https://github.com/renaudAmsellem\">@renaudAmsellem</a>_</p>","headings":[{"value":"Évitez d’avoir un seul reducer"},{"value":"Accès par proxy à l’état"},{"value":"Préfixer le nom de vos actions"},{"value":"Toujours tester vos reducers"},{"value":"Conserver l’immuabilité et la lisibilité de vos reducers"},{"value":"Ne pas utiliser le cas par défaut"},{"value":"Utiliser des middlewares personnalisés"},{"value":"Éviter le rerender lié à redux"},{"value":"Ne pas créer de référence dans le selector."},{"value":"Ne transformez pas vos données dans les composants"},{"value":"N’utilisez pas useReducer pour vos données professionnelles"},{"value":"Ressources utiles"}],"wordCount":{"words":1711},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#%C3%A9vitez-davoir-un-seul-reducer\">Évitez d’avoir un seul reducer</a></p>\n<ul>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#acc%C3%A8s-par-proxy-%C3%A0-l%C3%A9tat\">Accès par proxy à l’état</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#pr%C3%A9fixer-le-nom-de-vos-actions\">Préfixer le nom de vos actions</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#toujours-tester-vos-reducers\">Toujours tester vos reducers</a></li>\n</ul>\n</li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#conserver-limmuabilit%C3%A9-et-la-lisibilit%C3%A9-de-vos-reducers\">Conserver l’immuabilité et la lisibilité de vos reducers</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#ne-pas-utiliser-le-cas-par-d%C3%A9faut\">Ne pas utiliser le cas par défaut</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#utiliser-des-middlewares-personnalis%C3%A9s\">Utiliser des middlewares personnalisés</a></li>\n<li>\n<p><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#%C3%A9viter-le-rerender-li%C3%A9-%C3%A0-redux\">Éviter le rerender lié à redux</a></p>\n<ul>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#ne-pas-cr%C3%A9er-de-r%C3%A9f%C3%A9rence-dans-le-selector\">Ne pas créer de référence dans le <em>selector</em>.</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#ne-transformez-pas-vos-donn%C3%A9es-dans-les-composants\">Ne transformez pas vos données dans les composants</a></li>\n</ul>\n</li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#nutilisez-pas-usereducer-pour-vos-donn%C3%A9es-professionnelles\">N’utilisez pas <em>useReducer</em> pour vos données professionnelles</a></li>\n<li><a href=\"/fr/react-redux-pieges-bonnes-pratiques/#ressources-utiles\">Ressources utiles</a></li>\n</ul>","frontmatter":{"title":"React/Redux : pièges et meilleures pratiques","date":"March 23, 2021","dateJson":"2021-03-23","translations":["en","react-redux-pitfalls-and-best-pratices"],"description":"Nous utilisons React et Redux depuis presque 4 ans chez Bedrock sur notre plateforme vidéo nommée 6play. Les bonnes pratiques et les erreurs à éviter ont été rassemblées dans cet article.","language":"fr","tags":["react","redux","web"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.953125,"src":"/static/ee72c19029938b25ca14c9387d5095ab/a7715/redux.jpg","srcSet":"/static/ee72c19029938b25ca14c9387d5095ab/8f7df/redux.jpg 250w,\n/static/ee72c19029938b25ca14c9387d5095ab/0f3a1/redux.jpg 500w,\n/static/ee72c19029938b25ca14c9387d5095ab/a7715/redux.jpg 1000w,\n/static/ee72c19029938b25ca14c9387d5095ab/37d86/redux.jpg 1500w,\n/static/ee72c19029938b25ca14c9387d5095ab/a41d1/redux.jpg 2000w,\n/static/ee72c19029938b25ca14c9387d5095ab/3b765/redux.jpg 3557w","srcWebp":"/static/ee72c19029938b25ca14c9387d5095ab/e30b5/redux.webp","srcSetWebp":"/static/ee72c19029938b25ca14c9387d5095ab/7ca0e/redux.webp 250w,\n/static/ee72c19029938b25ca14c9387d5095ab/e9589/redux.webp 500w,\n/static/ee72c19029938b25ca14c9387d5095ab/e30b5/redux.webp 1000w,\n/static/ee72c19029938b25ca14c9387d5095ab/90fb1/redux.webp 1500w,\n/static/ee72c19029938b25ca14c9387d5095ab/37117/redux.webp 2000w,\n/static/ee72c19029938b25ca14c9387d5095ab/82a90/redux.webp 3557w","sizes":"(max-width: 1000px) 100vw, 1000px"},"image":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/10d63/redux.jpg"},"image16x9":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/6edcc/redux.jpg"},"image4x3":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/e14ae/redux.jpg"},"image1x1":{"src":"/static/ee72c19029938b25ca14c9387d5095ab/db124/redux.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Tout part toujours d’une idée La semaine dernière, alors que je mettais en place le mode sombre sur mon site perso, je me suis motivé à…","fields":{"slug":"/fr/use-reduced-motion/"},"timeToRead":3,"frontmatter":{"title":"Et voici use-reduced-motion!","date":"May 01, 2020","dateJson":"2020-05-01","description":"Annonce de la publication d'un package open source pour la gestion de la réduction des mouvements pour l'accessibilité du web. Inspiré de mes lectures et voulant en apprendre plus sur les Hook de React.","tags":["react","a11y"]}}}]}},"pageContext":{"slug":"/fr/react-redux-pieges-bonnes-pratiques/","tags":["react","redux","web"],"language":"fr","previous":{"fields":{"slug":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/"},"frontmatter":{"title":"Esbuild, le bundler incroyablement rapide 💨 et prometteur 📈 !","tags":["webpack","js","bundler"]}},"next":{"fields":{"slug":"/fr/vitejs-concurrent-performant-webpack-pour-react/"},"frontmatter":{"title":"Vite, le remplaçant à webpack ?!😮","tags":["webpack","esbuild","vitejs","bundler"]}}}},"staticQueryHashes":["1264045386","1666466174","4061151221"]}