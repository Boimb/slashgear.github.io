{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.slashgear.dev"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille Ã  Lyon et dÃ©veloppe des choses utiles Ã  <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nNâ€™hÃ©sites pas Ã  aller voir <a href=\"/conferences\">ses confÃ©rences sur la page dÃ©diÃ©e</a>.\nSi vous voulez voir mon parcours pro, <a href=\"/resume\">mon CV est disponible ici en ğŸ‡¬ğŸ‡§</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"c2d814a7-e9b0-50ba-9150-fb56e2168ed0","excerpt":"Comment ne pas jeter son application tous les deux ans ? Retour dâ€™expÃ©rience basÃ© sur les bonnes pratiques appliquÃ©es Ã  la plateforme webâ€¦","html":"<blockquote>\n<p>Comment ne pas jeter son application tous les deux ans ?</p>\n</blockquote>\n<p><em>Retour dâ€™expÃ©rience basÃ© sur les bonnes pratiques appliquÃ©es Ã  la plateforme web dÃ©veloppÃ©e chez <a href=\"https://www.bedrockstreaming.com/\">Bedrock Streaming</a></em></p>\n<h2 id=\"un-peu-de-contexte\" style=\"position:relative;\"><a href=\"#un-peu-de-contexte\" aria-label=\"un peu de contexte permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un peu de contexte</h2>\n<p>Chez Bedrock Streaming de nombreuses Ã©quipes dÃ©veloppent et maintiennent des applications <em>frontend</em> pour nos clients et utilisateurs.\nCertaines ne sont pas toute jeune.\nEn effet, lâ€™application sur laquelle je travaille principalement est un site web dont les dÃ©veloppements ont commencÃ© en 2014.\nJe lâ€™ai dâ€™ailleurs dÃ©jÃ  Ã©voquÃ©e dans diffÃ©rents articles de <a href=\"https://blog.slashgear.dev/\">ce blog</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w\"\n            sizes=\"(max-width: 294px) 100vw, 294px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n            alt=\"impression d&#39;Ã©cran du nombre de commit sur master de notre projet 15668\"\n            title=\"impression d&#39;Ã©cran du nombre de commit sur master de notre projet 15668\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Vous pourriez vous dire: <em>â€œOh les pauvres maintenir une application vieille de presque 10 ans Ã§a doit Ãªtre un enfer !â€</em></p>\n<p>Rassurez-vous, ce nâ€™est pas le cas !\nJâ€™ai travaillÃ© sur des projets bien moins vieux mais sur lesquels le dÃ©veloppement de nouvelles fonctionnalitÃ©s Ã©tait bien plus pÃ©nible.</p>\n<p>Aujourdâ€™hui le projet reste Ã  jour techniquement, on doit Ãªtre sur la derniÃ¨re version de React alors que celui-ci avait commencÃ© sur une version <em>0.x.x</em>.\nDans ce monde des technologies web souvent dÃ©criÃ© (ex: les nombreux articles sur la <em>Javascript Fatigue</em>) dont les outils et les pratiques Ã©voluent constamment, conserver un projet â€œÃ  jourâ€ reste un vrai challenge.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w\"\n            sizes=\"(max-width: 350px) 100vw, 350px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n            alt=\"nombre de versions de l&#39;application 1445\"\n            title=\"nombre de versions de l&#39;application 1445\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>De plus, dans le contexte de ce projet, en presque 10 ans, nous avons connu une centaine de contributeurs.\nCertains ne sont restÃ©s que quelques mois/annÃ©es.\nComment garder au maximum la connaissance sur â€œComment on fait les choses et comment Ã§a marche ?â€ dans un contexte humain si mouvant ?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,\n/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,\n/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,\n/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,\n/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w\"\n            sizes=\"(max-width: 690px) 100vw, 690px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n            alt=\"liste des 100 contributeurs du projet\"\n            title=\"liste des 100 contributeurs du projet\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Câ€™est ce que je vous propose de vous prÃ©senter.</p>\n<p>Avec lâ€™aide de mes collÃ¨gues, jâ€™ai rassemblÃ© la liste des bonnes pratiques qui nous permettent encore aujourdâ€™hui de maintenir ce projet en Ã©tat.\nAvec <a href=\"https://twitter.com/fooragnak\">Florent Dubost</a>, on sâ€™est souvent dit quâ€™il serait intÃ©ressant de la publier.\nNous espÃ¨rons que cela vous sera utile.</p>\n<h2 id=\"simposer-des-rÃ¨gles-et-les-automatiser\" style=\"position:relative;\"><a href=\"#simposer-des-r%C3%A8gles-et-les-automatiser\" aria-label=\"simposer des rÃ¨gles et les automatiser permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sâ€™imposer des rÃ¨gles et les automatiser</h2>\n<p>Un projet qui rÃ©siste au temps câ€™est tout dâ€™abord un ensemble de connaissances quâ€™on empile les unes sur les autres.\nCâ€™est en quelque sorte la tour de Kapla que vous assembliez petit en essayant dâ€™aller le plus haut possible.\nUne base solide sur laquelle on espÃ¨re pouvoir ajouter le plus possible avant une potentielle chute.</p>\n<p>DÃ¨s le dÃ©but dâ€™un projet on est donc amenÃ© Ã  prendre des dÃ©cisions importantes sur â€œComment on souhaite faire les choses ?â€œ.\nOn pense par exemple Ã  â€œQuel format pour nos fichiers ? Comment on nomme telle ou telle chose ?â€\nÃ‰crire une documentation prÃ©cise de â€œComment on fait les chosesâ€ pourrait paraitre une bonne idÃ©e.</p>\n<p>Cependant la documentation câ€™est cool, mais Ã§a a tendance Ã  pÃ©rimer trÃ¨s vite.\nNos dÃ©cisions Ã©voluent mais pas la documentation.</p>\n<blockquote>\n<p>â€œLes temps changent mais pas les README.â€</p>\n<p><a href=\"https://twitter.com/omansour\"><em>Olivier Mansour (deputy CTO Ã  Bedrock)</em></a></p>\n</blockquote>\n<p>Automatiser la vÃ©rification de chacune des rÃ¨gles quâ€™on sâ€™impose (sur notre codebase ou nos process) est bien plus pÃ©renne.\nPour faire simple, on Ã©vite dans la mesure du possible de dire â€œOn devrait faire les choses comme celaâ€, et on prÃ©fÃ¨re â€œon va coder un truc qui nous le vÃ©rifie Ã  notre placeâ€.\nEn plus de Ã§a, cotÃ© JS on est vraiment bien Ã©quipÃ© avec des outils comme <a href=\"https://eslint.org/\">Eslint</a> qui nous permettent dâ€™implÃ©menter nos propres rÃ¨gles.</p>\n<p>Le rÃ©flexe quâ€™on essaie donc dâ€™adopter est donc le suivant:</p>\n<ul>\n<li>â€œOn devrait essayer de faire comme cela Ã  prÃ©sent !â€</li>\n<li>â€œOk câ€™est intÃ©ressant, mais comment peut-on sâ€™assurer quâ€™on fasse comme cela automatiquement avec notre CI (IntÃ©gration continue) ?â€</li>\n</ul>\n<p>Lâ€™intÃ©gration continue dâ€™un projet est la solution parfaite pour ne rien louper sur chacune des <em>Pull Request</em> que nous proposons.\nLes reviews nâ€™en sont que plus simples car vous nâ€™avez plus Ã  vous soucier de lâ€™ensemble des rÃ¨gles qui sont dÃ©jÃ  automatisÃ©es.\nDans ce modÃ¨le, la review sert donc plus au partage de connaissance quâ€™au flicage de typo et autre non respect des conventions du projet.</p>\n<p>Dans ce principe, il faut donc essayer de bannir les rÃ¨gles orales.\nLe temps des druides est terminÃ©, sâ€™il faut transmettre oralement toutes les bonnes pratiques dâ€™un projet, lâ€™accompagnement de nouveaux dÃ©veloppeurs dans votre Ã©quipe nâ€™en sera que plus long.</p>\n<p><img src=\"/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif\" alt=\"la recette de la potion magique de panoramix est perdue car secrÃ¨te\"></p>\n<p>Un projet nâ€™est pas figÃ©. Ces rÃ¨gles Ã©voluent donc avec le temps.\nOn prÃ©fÃ¨rera alors lâ€™ajout de rÃ¨gles qui possÃ¨dent un script qui <em>autofixera</em> toute la codebase intelligemment.\nDe nombreuses rÃ¨gles Eslint le proposent, et cela est vraiment un critÃ¨re de sÃ©lection trÃ¨s important dans nos choix de nouvelles conventions.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">eslint --fix</code></pre></div>\n<p>Une rÃ¨gle trÃ¨s stricte qui vous obligera Ã  modifier votre code manuellement avant chaque push est pÃ©nible Ã  la longue et Ã©nervera vos Ã©quipes.\nAlors quâ€™une rÃ¨gle (mÃªme trÃ¨s stricte) qui peut sâ€™autofixer automatiquement au moment du commit ne sera pas perÃ§ue comme gÃªnante.</p>\n<p><strong>Comment dÃ©cider dâ€™ajouter de nouvelles rÃ¨gles ?</strong></p>\n<p>Cette question peut paraitre Ã©pineuse, prenons par exemple le cas des <code class=\"language-text\">&lt;tab></code> / <code class=\"language-text\">&lt;space></code> dans les fichiers.\nPour cela, on essaie dâ€™Ã©viter les dÃ©bats sempiternels et on se plie Ã  la tendance et aux rÃ¨gles de la communautÃ©.\nPar exemple, <a href=\"https://github.com/M6Web/eslint-tools\">notre base de configuration Eslint</a>) est basÃ©e sur celle dâ€™Airbnb qui semble avoir un certain succÃ¨s dans la communautÃ© JS.\nMais si la rÃ¨gle quâ€™on souhaite sâ€™imposer nâ€™est pas disponible dans Eslint ou dâ€™autres outils, il nous arrive de prÃ©fÃ©rer ne pas suivre la rÃ¨gle plutÃ´t que de se dire â€œOn le fait sans CI qui vÃ©rifieâ€.</p>\n<h3 id=\"la-liste-presque-exhaustive-\" style=\"position:relative;\"><a href=\"#la-liste-presque-exhaustive-\" aria-label=\"la liste presque exhaustive  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>La liste <em>presque</em> exhaustive ğŸ¤</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n            alt=\"Notre workflow d&#39;intÃ©gration continue\"\n            title=\"Notre workflow d&#39;intÃ©gration continue\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Le format des fichiers est suivi gÃ©rÃ© par <a href=\"https://editorconfig.org/\">Editorconfig</a>, <a href=\"https://prettier.io/\">prettier</a> et <a href=\"https://eslint.org/\">Eslint</a>.\nNous avons opensourcÃ© <a href=\"https://github.com/M6Web/eslint-tools\">notre propre configuration</a>, si jamais celle-ci peut vous Ãªtre utile.</li>\n<li>Nous utilisons un <a href=\"https://www.conventionalcommits.org/en/v1.0.0/\">nommage de commit bien spÃ©cifique</a> pour gÃ©nÃ©rer nos changelog.\nPour sâ€™assurer que les devs le respectent, une simple Ã©tape de notre CI le vÃ©rifie.</li>\n<li>On ne souhaite pas quâ€™un dev fasse grossir Ã©normÃ©ment nos bundles JS en production, câ€™est pourquoi nous suivons et mesurons leur taille dans la CI.\nOn utilise un outil maison mais on peut vous recommander lâ€™outil <a href=\"https://buildtracker.dev/\">BuildTracker</a>.</li>\n<li>La couverture de tests nâ€™est pas un indicateur pour lâ€™Ã©quipe, toutes les lignes nâ€™ont pas la mÃªme nÃ©cessitÃ© pour nous dâ€™Ãªtre testÃ©es.\nCertaines Ã©quipes Ã  Bedrock suivent cependant cet indicateur qui a au moins lâ€™intÃ©rÃªt de donner une tendance.</li>\n<li>Nos tests unitaires tournent bien Ã©videmment sur la CI, ceux-ci doivent passer.</li>\n<li>Nos tests fonctionnels (End to end: E2E) tournent sur Chrome Headless, ils doivent Ãªtre au vert.</li>\n<li>Les logs de nos tests E2E sont rÃ©cupÃ©rÃ©s et parsÃ©s afin dâ€™Ã©viter lâ€™introduction dâ€™erreur ou de React warning (Le script de parsing est cependant compliquÃ© Ã  maintenir)</li>\n<li>Les tests fonctionnels fonctionnent dans une <em>sandbox</em> oÃ¹ tout le rÃ©seau est proxyfiÃ©.\nNous surveillons que nos tests ne dÃ©pendent pas dâ€™une API non mockÃ©e qui pourrait ralentir leur exÃ©cution.</li>\n<li>Durant les tests E2E nous vÃ©rifions quâ€™aucune requÃªte dâ€™image nâ€™a gÃ©nÃ©rÃ© une 404.</li>\n<li>On rÃ©alise quelques <a href=\"https://www.deque.com/axe/\">vÃ©rifications dâ€™accessibilitÃ© avec Axe</a> durant nos tests E2E.</li>\n<li>On vÃ©rifie quelques rÃ¨gles sur le CSS avec <a href=\"https://stylelint.io/\">Stylelint</a> et <a href=\"https://github.com/M6Web/bemlinter\">bemlinter</a> (on nâ€™utilise plus BEM aujourdâ€™hui mais il reste encore un peu de style gÃ©rÃ© en SCSS quâ€™on migre petit Ã  petit en StyledComponent)</li>\n<li>Le projet est un monorepo sur lequel nous essayons de maintenir les mÃªmes versions de dÃ©pendances pour chaque package.\nPour cela nous avons dÃ©veloppÃ© un outil qui permet de faire cette vÃ©rification <em><a href=\"https://www.npmjs.com/package/monorepo-dependencies-check\">monorepo-dependencies-check</a></em></li>\n<li>On vÃ©rifie que notre fichier <code class=\"language-text\">yarn.lock</code> nâ€™a pas Ã©tÃ© modifiÃ© par inadvertance ou bien quâ€™il a Ã©tÃ© mis Ã  jour par rapport aux modifications du <code class=\"language-text\">package.json</code>.</li>\n<li><a href=\"https://www.terraform.io/\">Terraform</a> est utilisÃ© pour la gestion de nos ressources cloud, nous vÃ©rifions que le format des fichiers est correct.</li>\n</ul>\n<h2 id=\"tester-tester-tester\" style=\"position:relative;\"><a href=\"#tester-tester-tester\" aria-label=\"tester tester tester permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tester, tester, tester</h2>\n<p>Jâ€™espÃ¨re quâ€™en 2021 il nâ€™est plus nÃ©cessaire dâ€™expliquer pourquoi tester automatiquement son application est indispensable pour la rendre pÃ©renne.\nEn JS on est plutÃ´t bien Ã©quipÃ© en terme dâ€™outils pour tester aujourdâ€™hui.\nIl reste cependant lâ€™Ã©ternelle question:</p>\n<blockquote>\n<p>â€œQuâ€™est-ce quâ€™on veut tester ?â€</p>\n</blockquote>\n<p>Globalement si on recherche sur internet cette question, on voit que des besoins diffÃ©rents font Ã©merger des pratiques et des outils de testing bien diffÃ©rents.\nCe serait trÃ¨s prÃ©somptueux de penser quâ€™il y a une bonne maniÃ¨re de tester automatiquement son application.\nCâ€™est pourquoi il est prÃ©fÃ©rable de dÃ©finir une ou plusieurs stratÃ©gies de test qui rÃ©pondent Ã  des besoins dÃ©finis et limitÃ©s.</p>\n<p>Nos stratÃ©gies de tests reposent sur deux volontÃ©s bien distinctes:</p>\n<ul>\n<li>Automatiser la vÃ©rification des fonctionnalitÃ©s proposÃ©es aux utilisateurs en se mettant Ã  sa place.</li>\n<li>Nous fournir des solutions efficaces pour specifier la maniÃ¨re dont nous implÃ©mentons nos solutions techniques pour nous permettre de les faire Ã©voluer plus facilement.</li>\n</ul>\n<p>Pour cela, nous rÃ©alisons deux â€œtypes de testsâ€ que je propose de vous prÃ©senter ici.</p>\n<h3 id=\"nos-tests-e2e\" style=\"position:relative;\"><a href=\"#nos-tests-e2e\" aria-label=\"nos tests e2e permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos tests E2E</h3>\n<p>On les appelle â€œtests fonctionelsâ€, ce sont des tests End-to-end (E2E) sur une stack technique trÃ¨s efficace composÃ©e de <a href=\"https://cucumber.io/docs/installation/javascript/\">CucumberJS</a>, <a href=\"https://webdriver.io/\">WebdriverIO</a> avec <a href=\"https://developers.google.com/web/updates/2017/04/headless-chrome\">ChromeHeadless</a>\nIl sâ€™agit dâ€™une stack technique mise en place au dÃ©but du projet (Ã  lâ€™Ã©poque avec <a href=\"https://phantomjs.org/\">PhantomJS</a> pour les plus anciens dâ€™entre-vous)</p>\n<p>Cette stack nous permet dâ€™automatiser le pilotage de tests qui contrÃ´lent un navigateur.\nCe navigateur va rÃ©aliser des actions qui se rapprochent le plus de celles que nos vrais utilisateurs peuvent faire tout en vÃ©rifiant comment le site rÃ©agit.</p>\n<p>Il y a quelques annÃ©es, cette stack technique Ã©tait plutÃ´t compliquÃ©e Ã  mettre en place, mais aujourdâ€™hui il est plutÃ´t simple de le faire.\n<a href=\"https://github.com/Slashgear/slashgear.github.io\">Le site qui hÃ©berge cet article de blog</a> en est lui-mÃªme la preuve.\nIl ne mâ€™a fallu quâ€™une dizaine de minutes pour mettre en place cette stack avec <a href=\"https://webdriver.io/docs/gettingstarted\">le WebdriverIo CLI</a> pour vÃ©rifier que mon blog fonctionne comme prÃ©vu.</p>\n<p>Jâ€™ai dâ€™ailleurs rÃ©cemment publiÃ© <a href=\"https://blog.slashgear.dev/how-to-setup-e2e-tests-with-webdriverio/\">un article prÃ©sentant la mise en place de cette stack</a>.</p>\n<p>Voici donc un exemple de fichier de test E2E pour vous donner une idÃ©e:</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> Playground</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Background:</span><span class=\"token important\"> Playground context</span></span>\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> use <span class=\"token string\">\"playground\"</span> test context\n\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario:</span><span class=\"token important\"> Check if playground is reachable</span></span>\n    <span class=\"token atrule\">When</span> As user <span class=\"token string\">\"toto@toto.fr\"</span> I visit the <span class=\"token string\">\"playground\"</span> page\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a <span class=\"token string\">\"visible playground\"</span>\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> should see 4 <span class=\"token string\">\"playground tab\"</span> in <span class=\"token string\">\"playground\"</span>\n\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should not see a <span class=\"token string\">\"visible playground\"</span>\n\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>Et Ã§a donne Ã§a en local avec mon navigateur Chrome !</p>\n<p><img src=\"/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif\" alt=\"Exemple d&#x27;exÃ©cution de test fonctionnel\"></p>\n<p>VoilÃ  un schÃ©ma qui explique comment cette stack fonctionne:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,\n/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,\n/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,\n/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,\n/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,\n/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,\n/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png\"\n            alt=\"schÃ©ma qui explique le fonctionnement de notre stack\"\n            title=\"schÃ©ma qui explique le fonctionnement de notre stack\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Aujourdâ€™hui, lâ€™application web de Bedrock possÃ¨de plus de 800 scÃ©narios de tests E2E qui tournent sur chacune de nos <em>Pull Request</em> et sur la branche <code class=\"language-text\">master</code>.\nIls nous assurent que nous nâ€™introduisons pas de rÃ©gression fonctionnelle et câ€™est juste gÃ©nial !</p>\n<p>ğŸ‘ Les points positifs</p>\n<ul>\n<li>WebdriverIO nous permet Ã©galement de lancer de maniÃ¨re journaliÃ¨re ces mÃªmes tests sur des vrais devices en passant par le service payant SAAS <a href=\"https://www.browserstack.com/\">Browserstack</a>.\nOn a donc tous les jours un <em>job</em> qui sâ€™assure que notre site fonctionne correctement sur un Chrome derniÃ¨re version sur Windows 10 et Safari sur MacOs.</li>\n<li>Ces tests nous permettent de facilement documenter les fonctionnalitÃ©s de lâ€™application grÃ¢ce au langage Gherkin.</li>\n<li>Ils nous permettent de reproduire des cas qui sont loin dâ€™Ãªtre nominaux.\nDans une logique <em>TDD</em>, ils permettent dâ€™avancer sur le dÃ©veloppement sans avoir Ã  cliquer pendant des heures.</li>\n<li>Ces tests nous ont permis de ne pas casser lâ€™ancienne version du site qui est toujours en production pour quelques clients alors que nos efforts se concentrent sur la nouvelle.</li>\n<li>Ils nous apportent une vraie confiance.</li>\n<li>GrÃ¢ce notre librairie <a href=\"https://www.npmjs.com/package/superagent-mock\"><em>superagent-mock</em></a>, nous pouvons <em>fixturer</em> (bouchonner, mocker) toutes les API dont on dÃ©pend et ainsi mÃªme vÃ©rifier les cas dâ€™erreurs.\nDe plus, mocker la couche XHR du navigateur permet une amÃ©lioration significative du temps dâ€™exÃ©cution des tests. ğŸš€</li>\n<li>Ils nous donne accÃ¨s Ã  des usages Ã©tendus comme :\n<ul>\n<li>vÃ©rification de rÃ¨gles dâ€™accessibilitÃ©</li>\n<li>check les logs de la console navigateur (pour ne pas introduire dâ€™erreur ou de React Warning par exemple)</li>\n<li>surveiller tous les appels rÃ©seaux du site grÃ¢ce Ã  un proxy</li>\n<li>et jâ€™en passeâ€¦</li>\n</ul>\n</li>\n</ul>\n<p>ğŸ‘ Les complications</p>\n<ul>\n<li>Maintenir cette stack est compliquÃ© et coÃ»teux.\nÃ‰tant donnÃ© que peu de ressources sont publiÃ©es sur ce domaine, on se retrouve parfois Ã  devoir creuser pendant plusieurs jours pour les rÃ©parer ğŸ˜….\nIl nous arrive de nous sentir parfois bien seul Ã  avoir ces soucis.</li>\n<li>Il est trÃ¨s facile de coder un test E2E dit <em>flaky</em> (ie: un test qui peut Ã©chouer alÃ©atoirement).\nIls nous font croire que quelque chose est cassÃ©.\nIls nous prennent parfois du temps Ã  les stabiliser.\nIl reste cependant <strong>bien meilleur de supprimer un test qui ne vous donnera pas un rÃ©sultat stable.</strong></li>\n<li>Faire tourner tous les tests prend un temps important sur notre intÃ©gration continue.\nIl faut rÃ©guliÃ¨rement travailler sur leur optimisation pour que le feedback quâ€™ils vous apportent soit le plus rapide possible.\nCes temps importants coutent Ã©galement de lâ€™argent, il faut en effet bien faire tourner ces tests sur des machines.\nPour information, lâ€™infrastructure du site web (Ã  lui seul, juste lâ€™hÃ©bergement de nos servers Node + fichiers statiques + CDN) coutent bien moins cher que notre intÃ©gration continue.\nCela fait bien Ã©videmment sourire nos Ops ! ğŸ˜Š</li>\n<li>Les nouvelles recrues de nos Ã©quipes nâ€™ont souvent jamais rÃ©alisÃ© ce genre de tests, il y a donc une phase <del>de galÃ¨re</del> dâ€™apprentissage..</li>\n<li>Certaines fonctionnalitÃ©s sont parfois trop compliquÃ©es Ã  tester avec notre stack E2E (par exemple, les parcours de paiement qui dÃ©pendent de tiers).\nIl nous arrive alors de nous rabattre sur dâ€™autres techniques avec Jest notamment en ayant un scope moins unitaire.</li>\n</ul>\n<h3 id=\"nos-tests-unitaires\" style=\"position:relative;\"><a href=\"#nos-tests-unitaires\" aria-label=\"nos tests unitaires permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos tests â€œunitairesâ€</h3>\n<p>Pour complÃ©ter nos tests fonctionnels nous avons Ã©galement une stack de tests Ã©crits avec <a href=\"https://jestjs.io/fr/\">Jest</a>.\nOn qualifie ces tests dâ€™unitaires car nous avons comme principe dâ€™essayer de toujours tester nos modules JS en indÃ©pendance des autres.</p>\n<p><em>Ne dÃ©battons pas ici sur â€œEst-ce que ce sont des vrais tests unitaires ?â€, suffisamment dâ€™articles sur internet traitent de ce sujet.</em></p>\n<p>On utilise ces tests pour diffÃ©rentes raisons qui couvrent des besoins que nos tests fonctionnels ne couvrent pas:</p>\n<ul>\n<li>nous aider Ã  dÃ©velopper nos modules JS avec des pratiques TDD.</li>\n<li>documenter et dÃ©crire comment fonctionne un module JS.</li>\n<li>tester des cas limites trÃ¨s/trop compliquÃ©s Ã  tester avec nos tests E2E.</li>\n<li>faciliter le refactoring de notre application en nous montrant les impacts techniques de nos modifications.</li>\n</ul>\n<p>Avec ces tests, on se met au niveau dâ€™une fonction utilitaire, dâ€™une action Redux, dâ€™un reducer, dâ€™un composant React.\nOn se base essentiellement sur <a href=\"https://blog.slashgear.dev/discover-jest-hidden-feature-automock/\">la fonctionnalitÃ© dâ€™<code class=\"language-text\">automock</code> de Jest</a> qui nous propose dâ€™isoler nos modules JS lorsquâ€™on teste.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg\"\n            alt=\"reprÃ©sentation visuelle de l&#39;automock\"\n            title=\"reprÃ©sentation visuelle de l&#39;automock\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Lâ€™image prÃ©cÃ©dente reprÃ©sente la mÃ©taphore qui nous permet dâ€™expliquer notre stratÃ©gie de tests unitaires aux nouveaux arrivant.</p>\n<blockquote>\n<p>â€œIl faut sâ€™imaginer que lâ€™application est un mur composÃ© de briques unitaires (nos modules ecmascript), nos tests unitaires doivent tester une Ã  une les briques en indÃ©pendance totale des autres.\nNos tests fonctionnels sont lÃ  pour tester le ciment entre les briques.â€</p>\n</blockquote>\n<p><strong>Pour rÃ©sumer, on pourrait dire que nos tests E2E testent <em>ce que notre application doit faire</em>, et nos tests unitaires sâ€™assurent eux de vÃ©rifier <em>comment Ã§a marche.</em></strong></p>\n<p>Aujourdâ€™hui ce sont plus de 6000 tests unitaires qui couvrent lâ€™application et permettent de limiter les rÃ©gressions.</p>\n<p>ğŸ‘</p>\n<ul>\n<li><a href=\"https://jestjs.io/fr/\">Jest</a> est vraiment une librairie gÃ©niale, rapide, complÃ¨te, bien documentÃ©e.</li>\n<li>Les tests unitaires nous aident beaucoup Ã  comprendre <em>plusieurs annÃ©es aprÃ¨s</em> comment tout cela fonctionne.</li>\n<li>On arrive toujours Ã  tester unitairement notre code, et cela complÃ¨te bien nos tests E2E.</li>\n<li>Lâ€™<code class=\"language-text\">automock</code> est vraiment pratique pour le dÃ©coupage de tests par modules.</li>\n</ul>\n<p>ğŸ‘</p>\n<ul>\n<li>Parfois, nous nous sommes trouvÃ©s limitÃ©s par notre stack de tests E2E et nous ne pouvions pas uniquement nous baser sur les tests unitaires.\nIl nous manquait quelque chose pour pouvoir sâ€™assurer que le <em>ciment entre les briques</em> fonctionnait comme on le souhaitait.\nPour cela, il a Ã©tÃ© mis en place une deuxiÃ¨me stack de tests <a href=\"https://jestjs.io/fr/\">Jest</a> nommÃ© â€œtest dâ€™intÃ©grationâ€ ou lâ€™<code class=\"language-text\">automock</code> est dÃ©sactivÃ©.</li>\n<li>Lâ€™abus de <a href=\"https://jestjs.io/docs/snapshot-testing\"><em>Snapshot</em></a> est dangereux pour la santÃ©.\nLâ€™usage du <em>â€œSnapshot testingâ€</em> peut faire gagner du temps sur lâ€™implÃ©mentation de vos tests mais peuvent en rÃ©duire la qualitÃ©.\nAvoir Ã  review un object de 50 lignes en <em>Snapshot</em> est ni facile, ni pertinent.</li>\n<li>Avec la dÃ©prÃ©ciation dâ€™<a href=\"https://enzymejs.github.io/enzyme/\">EnzymeJS</a>, nous sommes contraints de migrer sur <a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a>.\nIl est bien Ã©videmment possible de tester unitairement des composants avec cette nouvelle librairie.\nMalheureusement, ce nâ€™est pas vraiment lâ€™esprit et la faÃ§on de faire.\n<a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a> nous pousse <a href=\"https://kentcdodds.com/blog/why-i-never-use-shallow-rendering\">Ã  ne pas jouer avec le <em>shallow rendering</em></a>.</li>\n</ul>\n<h3 id=\"nos-principes\" style=\"position:relative;\"><a href=\"#nos-principes\" aria-label=\"nos principes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nos principes</h3>\n<p>Nous essayons de toujours respecter les rÃ¨gles suivantes lorsquâ€™on se pose la question â€œDois-je ajouter des tests ?â€œ.</p>\n<ol>\n<li>Si notre <em>Pull Request</em> introduit des nouvelles fonctionnalitÃ©s utilisateurs, il faut intÃ©grer des scenarios de test E2E.\nDes tests unitaires avec Jest peuvent les complÃ©ter / remplacer en fonction.</li>\n<li>Si notre <em>Pull Request</em> a pour but de corriger un bug, cela signifie quâ€™il nous manque un cas de test.\nOn doit donc essayer de rajouter un test E2E ou Ã  dÃ©faut un test unitaire.</li>\n</ol>\n<p><em>Câ€™est en Ã©crivant ces lignes que je me dis que ces principes pourraient trÃ¨s bien faire lâ€™objet dâ€™une automatisation.</em> ğŸ¤£</p>\n<h2 id=\"le-projet-reste-les-fonctionnalitÃ©s-non\" style=\"position:relative;\"><a href=\"#le-projet-reste-les-fonctionnalit%C3%A9s-non\" aria-label=\"le projet reste les fonctionnalitÃ©s non permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le projet reste, les fonctionnalitÃ©s non</h2>\n<blockquote>\n<p>â€œLa seconde Ã©volution dâ€™une fonctionnalitÃ© est trÃ¨s souvent sa suppression.â€</p>\n</blockquote>\n<p>Par principe, nous souhaitons faire en sorte que chaque nouvelle fonctionnalitÃ© de lâ€™application ne base pas son activation sur le simple fait dâ€™Ãªtre dans la codebase.\nClassiquement, le cycle de vie dâ€™une â€œfeatureâ€ dans un projet peut Ãªtre le suivant (dans un <a href=\"https://guides.github.com/introduction/flow/\">Github Flow</a>):</p>\n<ul>\n<li>une personne implÃ©mente sur une branche</li>\n<li>la fonctionnalitÃ© est <em>mergÃ©e</em> sur master</li>\n<li>elle est dÃ©ployÃ©e en production</li>\n<li>vis sa vie de fonctionnalitÃ© (avec parfois des bugs et des correctifs)</li>\n<li>la fonctionnalitÃ© nâ€™est plus nÃ©cessaire</li>\n<li>une personne dÃ©tricote le code et lâ€™enlÃ¨ve</li>\n<li>nouveau dÃ©ploiement</li>\n</ul>\n<p>Pour simplifier certaines Ã©tapes, il a Ã©tÃ© mis en place du <em>feature flipping</em> sur le projet.</p>\n<p><strong>Comment Ã§a marche ?</strong></p>\n<p>Dans notre config il y a une <em>map</em> clÃ©/valeur qui liste toutes les fonctionnalitÃ©s de lâ€™application associÃ©es Ã  leur statut dâ€™activation.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  anotherOne<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dans notre code, nous avons donc implÃ©mentÃ© des traitements conditionnels qui disent â€œSi cette feature est activÃ©e alorsâ€¦â€œ.\nCela peut changer le rendu dâ€™un composant, changer lâ€™implÃ©mentation dâ€™une action Redux ou bien dÃ©sactiver une route de notre <em>react-router</em>.</p>\n<p><strong>Mais Ã  quoi Ã§a sert ?</strong></p>\n<ul>\n<li>On peut dÃ©velopper des nouvelles Ã©volutions progressivement en les cachant derriÃ¨re une clÃ© de configuration.\nOn livre des fonctionnalitÃ©s en production sans les activer.</li>\n<li>En environnement de test, on peut surcharger cette config pour tester des features qui ne sont pas encore activÃ©es en production.</li>\n<li>Dans le cas dâ€™un site en marque blanche, on peut proposer ces fonctionnalitÃ©s Ã  nos clients comme des options possibles.</li>\n<li>Avant de supprimer le code dâ€™une feature, on la dÃ©sactive puis on fait le mÃ©nage sans risque.</li>\n<li>GrÃ¢ce Ã  un outil maison nommÃ© lâ€™<em>Applaunch</em>, cette config de feature flipping est surchargeable dans une interface graphique Ã  chaud sans dÃ©ploiement.\nCela nous permet dâ€™activer des fonctionnalitÃ©s sans faire de mise en production du code.\nEn cas dâ€™incident, on peut dÃ©sactiver des fonctionnalitÃ©s qui sont dÃ©gradÃ©es.</li>\n</ul>\n<p>Pour vous donner un exemple plus concret, entre 2018 et 2020 nous avons complÃ¨tement refondu lâ€™interface de lâ€™application.\nCette Ã©volution graphique nâ€™Ã©tait quâ€™une clÃ© de featureFlipping.\nLa refonte graphique nâ€™a donc pas Ã©tÃ© la remise Ã  zÃ©ro du projet, on continue encore aujourdâ€™hui de vivre avec les deux versions (tant que la bascule de tous nos clients nâ€™est pas terminÃ©e).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,\n/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,\n/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,\n/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,\n/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,\n/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,\n/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,\n/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,\n/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,\n/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,\n/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg\"\n            alt=\"screenshot comparatif v4 / v5 sur 6play\"\n            title=\"screenshot comparatif v4 / v5 sur 6play\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"lab-testing\" style=\"position:relative;\"><a href=\"#lab-testing\" aria-label=\"lab testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lâ€™A/B testing</h3>\n<p>GrÃ¢ce au super travail des Ã©quipes backend et data, on a pu mÃªme Ã©tendre lâ€™usage du <em>feature flipping</em> en rendant cette configuration modifiable pour des sous groupes dâ€™utilisateurs.</p>\n<p>Cela permet de dÃ©ployer des nouvelles fonctionnalitÃ©s sur une portion plus rÃ©duite des utilisateurs afin de comparer nos <a href=\"https://www.journaldunet.fr/business/dictionnaire-du-marketing/1198189-kpi-key-performance-indicator-marketing-definition-exemples-okr/\">KPI</a>.</p>\n<p>Prise de dÃ©cision, amÃ©lioration des performances techniques ou produit, expÃ©rimentations, les possibilitÃ©s sont nombreuses et nous les exploitons de plus en plus.</p>\n<h3 id=\"le-futur-flipping\" style=\"position:relative;\"><a href=\"#le-futur-flipping\" aria-label=\"le futur flipping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le <em>futur flipping</em></h3>\n<blockquote>\n<p>Sur une idÃ©e originale de <a href=\"https://twitter.com/SuperFlaw\">Florent Lepretre</a>.</p>\n</blockquote>\n<p>Nous avions rÃ©guliÃ¨rement le besoin dâ€™activer des feature Ã  des heures <del>trÃ¨s</del> trop matinales dans le futur.\nPour cela nous devions Ãªtre connectÃ© Ã  une heure prÃ©cise sur notre poste pour modifier la configuration Ã  chaud.</p>\n<p>Afin dâ€™Ã©viter dâ€™oublier de le faire, ou de le faire en retard, nous avons fait en sorte quâ€™une clÃ© de configuration puisse Ãªtre activÃ©e Ã  partir dâ€™une certaine date.\nPour cela, nous avons fait Ã©voluer notre <em>selector redux</em> qui indiquait si une feature Ã©tait activÃ©e pour quâ€™il puisse gÃ©rer des formats de date et les comparer Ã  lâ€™heure courante.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    offDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 20:30:00'</span><span class=\"token punctuation\">,</span>\n    onDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 19:30:00'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>De nombreux cafÃ©s â˜•ï¸ Ã  9h ont Ã©tÃ© sauvÃ©s grÃ¢ce au <em>futur flipping</em></p>\n</blockquote>\n<h2 id=\"monitorer-mesurer-alerter\" style=\"position:relative;\"><a href=\"#monitorer-mesurer-alerter\" aria-label=\"monitorer mesurer alerter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitorer, Mesurer, Alerter</h2>\n<p>Pour maintenir un projet aussi longtemps que lâ€™application web de bedrock, des tests, de la documentation et de la rigueur ne suffisent pas.\nIl faut Ã©galement de la visibilitÃ© sur ce qui marche en production.</p>\n<blockquote>\n<p>â€œComment sais-tu que lâ€™application que tu as en production en ce moment mÃªme fonctionne comme prÃ©vu ?â€</p>\n</blockquote>\n<p>On part du principe quâ€™aucune fonctionnalitÃ© ne marche tant quâ€™elle nâ€™est pas monitorÃ©e.\nAujourdâ€™hui le monitoring Ã  Bedrock cotÃ© Frontend se matÃ©rialise par diffÃ©rents outils et diffÃ©rentes stacks.\nJe pourrais vous citer <a href=\"https://newrelic.com/\">NewRelic</a>, un <a href=\"https://github.com/statsd/statsd\">Statsd</a>, une stack <a href=\"https://www.elastic.co/fr/what-is/elk-stack\">ELK</a> ou bien encore <a href=\"https://youbora.nicepeopleatwork.com/\">Youbora</a> pour la vidÃ©o.</p>\n<p>Pour vous donner un exemple, Ã  chaque fois quâ€™un utilisateur commence une session de navigation on envoie un <em>Hit</em> de monitoring anonyme pour incrÃ©menter un compteur dans Statsd.\nOn a alors plus quâ€™Ã  dÃ©finir un dashboard qui affiche dans un graphique lâ€™Ã©volution de ce nombre.\nSi on observe une variation trop importante, cela peut nous permettre de dÃ©tecter un incident.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png\"\n            alt=\"exemple de dashboard de suivi\"\n            title=\"exemple de dashboard de suivi\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Le monitoring nous offre aussi des solutions pour comprendre et analyser un bug qui sâ€™est produit dans le passÃ©.\nComprendre un incident, lâ€™expliquer, en trouver sa <em>root cause</em> sont les possibilitÃ©s qui sâ€™offrent Ã  vous si vous monitorez votre application.\nLe monitoring peut Ã©galement permettre de mieux communiquer avec les clients sur les impacts dâ€™un incident et Ã©galement dâ€™estimer le nombre dâ€™utilisateurs impactÃ©s.</p>\n<p>Avec la multiplication de nos clients, bien monitorer nos plateformes nâ€™est plus suffisant.\nTrop de donnÃ©es, trop de dashboards Ã  surveiller, il devient trÃ¨s facile de louper quelque chose.\nNous avons donc commencÃ© Ã  complÃ©ter notre suivi des mesures par de lâ€™<em>alerting</em> automatique.\nUne fois que les mesures nous apportent suffisamment de confiance, on peut facilement mettre en place des alertes qui vont nous prÃ©venir en cas de valeur incohÃ©rente.</p>\n<p>Nous essayons cependant de toujours dÃ©clencher des alertes uniquement quand celle-ci est actionnable.\nDans dâ€™autres termes, si une alerte sonne, nous avons quelque chose Ã  faire.\nFaire sonner des alertes qui ne nÃ©cessitent aucune action immÃ©diate humaine gÃ©nÃ¨rent du bruit et de la perte de temps.</p>\n<p><img src=\"/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif\" alt=\"alerte gÃ©nÃ©rale\"></p>\n<h2 id=\"limiter-surveiller-et-mettre-Ã -jour-ses-dÃ©pendances\" style=\"position:relative;\"><a href=\"#limiter-surveiller-et-mettre-%C3%A0-jour-ses-d%C3%A9pendances\" aria-label=\"limiter surveiller et mettre Ã  jour ses dÃ©pendances permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limiter, surveiller et mettre Ã  jour ses dÃ©pendances</h2>\n<p>Ce qui pÃ©rime plus vite que votre ombre dans un projet web basÃ© sur des technologies javascript, ce sont vos dÃ©pendances.\nLâ€™Ã©cosystÃ¨me Ã©volue rapidement et vos dÃ©pendances peuvent vite se retrouver non maintenues, plus Ã  la mode ou bien complÃ¨tement refondues avec de gros <em>breaking changes</em>.</p>\n<p>On essaye donc dans la mesure du possible de limiter nos dÃ©pendances et dâ€™Ã©viter dâ€™en ajouter inutilement.\nUne dÃ©pendance, câ€™est souvent trÃ¨s facile Ã  ajouter mais elle peut devenir un vrai casse-tÃªte Ã  enlever.</p>\n<p>Les librairies de composants graphiques (exemple React bootstrap, Material Design) sont un bel exemple de dÃ©pendance que nous tenons Ã  ne pas introduire.\nElles peuvent faciliter lâ€™intÃ©gration dans un premier temps mais celles-ci bloquent souvent la version de votre librairie de composant par la suite.\nVous ne voulez pas figer la version de React dans votre application pour deux composants de formulaires.</p>\n<p>La surveillance fait aussi partie de nos routines de gestion de nos dÃ©pendances.\nDepuis lâ€™ajout du <a href=\"https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities\">signalement de failles de sÃ©curitÃ© dans un package NPM</a>, il est possible de savoir si un projet intÃ¨gre une dÃ©pendance qui contient une faille de sÃ©curitÃ© connue par une simple commande.\nNous avons donc des jobs journaliers sur nos projets qui lancent la commande <code class=\"language-text\">yarn audit</code> afin de nous forcer Ã  appliquer les correctifs.</p>\n<blockquote>\n<p>La maintenance de dÃ©pendances est grandement facilitÃ© par notre stack de tests E2E qui sonnent direcement si la montÃ©e de version gÃ©nÃ¨re une regression.</p>\n</blockquote>\n<p>Aujourdâ€™hui, hors failles de sÃ©curitÃ©, nous mettons Ã  jour nos dÃ©pendances â€œquand on a le tempsâ€, souvent en fin de <em>sprint</em>.\nCela ne nous satisfait pas car certaines dÃ©pendances peuvent se retrouver oubliÃ©es.\nJâ€™ai personnellement lâ€™habitude dâ€™utiliser des outils comme <a href=\"https://classic.yarnpkg.com/en/docs/cli/outdated/\"><code class=\"language-text\">yarn outdated</code></a> et <a href=\"https://dependabot.com/\">Dependabot</a> sur mes projets personels pour automatiser la mise Ã  jour de mes dÃ©pendances.</p>\n<h2 id=\"accepter-sa-dette-technique\" style=\"position:relative;\"><a href=\"#accepter-sa-dette-technique\" aria-label=\"accepter sa dette technique permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accepter sa dette technique</h2>\n<p>Un projet accumulera toujours de la dette technique.\n<strong>Câ€™est un fait.</strong>\nQue ce soit de la dette volontaire ou involontaire, un projet qui rÃ©siste aux annÃ©es va forcÃ©ment accumuler de la dette.\nDâ€™autant plus, si pendant toutes ces annÃ©es vous continuez dâ€™ajouter des fonctionnalitÃ©s.</p>\n<p>Depuis 2014, nos bonnes pratiques, nos faÃ§ons de faire ont bien Ã©voluÃ©.\nParfois nous avons dÃ©cidÃ© ces changements mais parfois nous les avons subi (un exemple, lâ€™arrivÃ©e des composants fonctionnels avec React et lâ€™api des Hooks).</p>\n<p><strong>Notre projet nâ€™est pas complÃ¨tement <em>â€œstate of artâ€</em> et on lâ€™assume.</strong></p>\n<p><img src=\"/c80d0cd308b5657d54f976a32fe2c811/leak.gif\" alt=\"Ã§a tiendra !\"></p>\n<p>Nous essayons de prioriser nos sujets de <em>refactoring</em> sur les parties de lâ€™application sur lequel on a le plus de souci, le plus de peine.\nOn considÃ¨re quâ€™une partie de lâ€™application qui ne nous plaÃ®t pas mais sur laquelle on nâ€™a pas besoin de travailler (apporter des Ã©volutions) ne mÃ©rite pas quâ€™on la refactorise.</p>\n<p>Je pourrais vous citer de nombreuses fonctionnalitÃ©s de notre application qui nâ€™ont pas Ã©voluÃ© fonctionnellement depuis plusieurs annÃ©es.\nMais comme nous avons couvert ces fonctionnalitÃ©s de tests E2E depuis le dÃ©but, nous nâ€™avons pas vraiment eu Ã  y retoucher.</p>\n<p>Comme dit plus haut, la prochaine Ã©volution dâ€™une feature de code est parfois sa dÃ©sactivation.\nAlors pourquoi passer son temps Ã  rÃ©-Ã©crire toute lâ€™application ?</p>\n<ul>\n<li>Le code devient dans tous les cas du â€œlegacyâ€.</li>\n<li>Tant que les fonctionnalitÃ©s sont testÃ©es, rien ne nous oblige Ã  tout refactorer en permanence pour que toute notre codebase soit <em>state of art</em>.</li>\n<li>On se focalise sur nos <em>pain points</em>, on re-factorise ce quâ€™on a vraiment besoin de faire Ã©voluer.</li>\n</ul>\n<h2 id=\"pour-rÃ©sumer\" style=\"position:relative;\"><a href=\"#pour-r%C3%A9sumer\" aria-label=\"pour rÃ©sumer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pour rÃ©sumer</h2>\n<p>Les bonnes pratiques prÃ©sentÃ©es ici restent bien Ã©videmment subjectives et ne sâ€™appliqueront pas parfaitement/directement dans vos contextes.\nJe suis cependant convaincu quâ€™elles peuvent probablement vous aider Ã  identifier ce qui peut faire passer votre projet de fun Ã  pÃ©rimÃ©.\nÃ€ Bedrock nous avons mis en place dâ€™autres pratiques que je nâ€™ai pas listÃ©es ici mais ce sera lâ€™occasion de faire un nouvel article un jour.</p>\n<p>Enfin, si vous souhaitez que je revienne plus en dÃ©tail sur certains chapitres prÃ©sentÃ©s ici, nâ€™hÃ©sitez pas Ã  me le dire, je pourrais essayer dâ€™y dÃ©dier un article spÃ©cifique.</p>","headings":[{"value":"Un peu de contexte"},{"value":"Sâ€™imposer des rÃ¨gles et les automatiser"},{"value":"La liste presque exhaustive ğŸ¤"},{"value":"Tester, tester, tester"},{"value":"Nos tests E2E"},{"value":"Nos tests â€œunitairesâ€"},{"value":"Nos principes"},{"value":"Le projet reste, les fonctionnalitÃ©s non"},{"value":"Lâ€™A/B testing"},{"value":"Le futur flipping"},{"value":"Monitorer, Mesurer, Alerter"},{"value":"Limiter, surveiller et mettre Ã  jour ses dÃ©pendances"},{"value":"Accepter sa dette technique"},{"value":"Pour rÃ©sumer"}],"wordCount":{"words":4276},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#un-peu-de-contexte\">Un peu de contexte</a></p>\n</li>\n<li>\n<p><a href=\"#simposer-des-r%C3%A8gles-et-les-automatiser\">Sâ€™imposer des rÃ¨gles et les automatiser</a></p>\n<ul>\n<li><a href=\"#la-liste-presque-exhaustive-\">La liste <em>presque</em> exhaustive ğŸ¤</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tester-tester-tester\">Tester, tester, tester</a></p>\n<ul>\n<li><a href=\"#nos-tests-e2e\">Nos tests E2E</a></li>\n<li><a href=\"#nos-tests-unitaires\">Nos tests â€œunitairesâ€</a></li>\n<li><a href=\"#nos-principes\">Nos principes</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#le-projet-reste-les-fonctionnalit%C3%A9s-non\">Le projet reste, les fonctionnalitÃ©s non</a></p>\n<ul>\n<li><a href=\"#lab-testing\">Lâ€™A/B testing</a></li>\n<li><a href=\"#le-futur-flipping\">Le <em>futur flipping</em></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#monitorer-mesurer-alerter\">Monitorer, Mesurer, Alerter</a></p>\n</li>\n<li>\n<p><a href=\"#limiter-surveiller-et-mettre-%C3%A0-jour-ses-d%C3%A9pendances\">Limiter, surveiller et mettre Ã  jour ses dÃ©pendances</a></p>\n</li>\n<li>\n<p><a href=\"#accepter-sa-dette-technique\">Accepter sa dette technique</a></p>\n</li>\n<li>\n<p><a href=\"#pour-r%C3%A9sumer\">Pour rÃ©sumer</a></p>\n</li>\n</ul>","frontmatter":{"title":"Bonnes pratiques pour la maintenance d'une application web","date":"August 25, 2021","dateJson":"2021-08-25","translations":["en","how-not-to-throw-away-your-web-application-after-two-years"],"description":"Comment ne pas jeter son projet au bout de 2 ans ? Retour d'expÃ©rience basÃ© sur les bonnes pratiques appliquÃ©es Ã  la plateforme web dÃ©veloppÃ©e chez Bedrock Streaming.","language":"fr","tags":["web","javascript","bedrock"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7857142857142858,"src":"/static/706dca8ff24a680a04318fad5f7a023c/4fe8c/bedrock.jpg","srcSet":"/static/706dca8ff24a680a04318fad5f7a023c/aabdf/bedrock.jpg 150w,\n/static/706dca8ff24a680a04318fad5f7a023c/9dc27/bedrock.jpg 300w,\n/static/706dca8ff24a680a04318fad5f7a023c/4fe8c/bedrock.jpg 600w,\n/static/706dca8ff24a680a04318fad5f7a023c/9842e/bedrock.jpg 900w,\n/static/706dca8ff24a680a04318fad5f7a023c/47498/bedrock.jpg 1200w,\n/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w","srcWebp":"/static/706dca8ff24a680a04318fad5f7a023c/ad85c/bedrock.webp","srcSetWebp":"/static/706dca8ff24a680a04318fad5f7a023c/e7487/bedrock.webp 150w,\n/static/706dca8ff24a680a04318fad5f7a023c/403a4/bedrock.webp 300w,\n/static/706dca8ff24a680a04318fad5f7a023c/ad85c/bedrock.webp 600w,\n/static/706dca8ff24a680a04318fad5f7a023c/210c1/bedrock.webp 900w,\n/static/706dca8ff24a680a04318fad5f7a023c/99238/bedrock.webp 1200w,\n/static/706dca8ff24a680a04318fad5f7a023c/25f09/bedrock.webp 1920w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"},"image16x9":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/6edcc/bedrock.jpg"},"image4x3":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/e14ae/bedrock.jpg"},"image1x1":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/db124/bedrock.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"AprÃ¨s 2 ans dâ€™utilisation de React avec Redux pour la plateforme vidÃ©o 6play, jâ€™ai pu identifier les bonnes pratiques et les piÃ¨ges Ã  Ã©viterâ€¦","fields":{"slug":"/fr/react-redux-pieges-bonnes-pratiques/"},"timeToRead":13,"frontmatter":{"title":"React/Redux : piÃ¨ges et meilleures pratiques","date":"March 23, 2021","dateJson":"2021-03-23","description":"Nous utilisons React et Redux depuis presque 4 ans chez Bedrock sur notre plateforme vidÃ©o nommÃ©e 6play. Les bonnes pratiques et les erreurs Ã  Ã©viter ont Ã©tÃ© rassemblÃ©es dans cet article.","tags":["react","redux","web"]}}},{"node":{"excerpt":"Cela fait plusieurs annÃ©es que je joue avec les bundlers JS.\nRestant convaincu de la nÃ©cessitÃ© de lâ€™usage de ces outils (ne me laissez pasâ€¦","fields":{"slug":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/"},"timeToRead":6,"frontmatter":{"title":"Esbuild, le bundler incroyablement rapide ğŸ’¨ et prometteur ğŸ“ˆ !","date":"March 14, 2021","dateJson":"2021-03-14","description":"Jouant avec les bundler traditionnels comme webpack depuis plusieurs annÃ©es, je vous propose ici mon avis sur le bundler esbuild.","tags":["webpack","javascript","bundler"]}}},{"node":{"excerpt":"Cette fin dâ€™annÃ©e scolaire en tant que professeur Ã  la fac nâ€™est pas trÃ¨s habituelle.\nDâ€™ici quelques jours, je mâ€™apprÃªte Ã  donner mesâ€¦","fields":{"slug":"/fr/gol-hommage/"},"timeToRead":2,"frontmatter":{"title":"Hommage personnel au \"Game of Life\" (Jeu de la vie)","date":"April 20, 2020","dateJson":"2020-04-20","description":"Essai d'implÃ©mentation du Jeu de la Vie en Javascript dans le navigateur et sans framework.","tags":["javascript","canvas"]}}}]}},"pageContext":{"slug":"/fr/comment-ne-pas-jeter-son-application-au-bout-de-deux-ans/","tags":["web","javascript","bedrock"],"language":"fr","previous":{"fields":{"slug":"/fr/comment-mettre-en-place-des-tests-bout-en-bout-avec-webdriverio/"},"frontmatter":{"title":"Comment mettre en place des tests bout en bout avec WebdriverIo ?","tags":["github","action","e2e","WebdriverIo"]}},"next":null}},
    "staticQueryHashes": ["1264045386","1666466174","2564629789","4061151221","62118570"]}