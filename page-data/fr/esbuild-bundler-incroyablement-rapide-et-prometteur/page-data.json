{"componentChunkName":"component---src-templates-blog-post-js","path":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://slashgear.github.io"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille à Lyon et développe des choses utiles à <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nN’hésites pas à aller voir <a href=\"/conferences\">ses conférences sur la page dédiée</a>.\nSi vous voulez voir mon parcours pro, <a href=\"/resume\">mon CV est disponible ici en 🇬🇧</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"71182227-e9ee-5d90-8d4a-7d47f8cf201e","excerpt":"Cela fait plusieurs années que je joue avec les bundlers JS.\nRestant convaincu de la nécessité de l’usage de ces outils (ne me laissez pas…","html":"<p>Cela fait plusieurs années que je joue avec les bundlers JS.\nRestant convaincu de la nécessité de l’usage de ces outils (ne me laissez pas croire que vous ne packagez pas vos module JS en prod 😅), j’ai beaucoup joué avec <a href=\"/fr/webpack/\">webpack</a>.\nNotamment pour des sujets de performance, d’optimisation et d’usage de plugins custom.</p>\n<p>Je pense encore qu’en 2021, webpack reste la solution la plus industrielle et aboutie pour <em>bundler</em> mes applications web.\nJ’entends que les outils comme <em>parcel</em> et <em>rollup</em> restent de bonnes alternatives.\nCependant, webpack a probablement la plus grosse communauté et est utilisé par de nombreux projets.</p>\n<p>Mais ne nous voilons pas la face, aujourd’hui on se satisfait de ces outils de <em>bundling</em> malgré des performances qui restent assez pauvres.\nJe travaille tous les jours sur un projet de plusieurs milliers de “modules” résolus par webpack et c’est parfois une souffrance 🥱.</p>\n<blockquote>\n<p>Malgrés une utilisation intensive de cache et de workers, webpack montre certaines limitations pour packager des larges applications.</p>\n</blockquote>\n<h2 id=\"en-quoi-esbuild-parait-intéressant-\" style=\"position:relative;\"><a href=\"#en-quoi-esbuild-parait-int%C3%A9ressant-\" aria-label=\"en quoi esbuild parait intéressant  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>En quoi esbuild parait intéressant ?</h2>\n<p>Je ne vois pas de façon plus simple de l’exprimer que de vous expliquer simplement:</p>\n<blockquote>\n<p>La première fois où j’ai lancé <code class=\"language-text\">esbuild</code> sur mon app web de test, j’ai cru qu’il avait planté alors qu’en fait il s’était exécuté à une vitesse absoluement dingue.</p>\n</blockquote>\n<p>Pour l’installer c’est pas compliqué :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D esbuild</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -D esbuild</code></pre></div>\n<p>Ou bien même avec <a href=\"https://www.npmjs.com/package/npx\">NPX</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx esbuild --version</code></pre></div>\n<p>Étant écrit en Go, sachez qu’une version WASM et des binaires pour les principales architectures sont disponible.\n<code class=\"language-text\">esbuild</code> fait le pari du natif de Go pour profiter un maximum de solutions de parallélisation et une meilleure gestion de la mémoire.</p>\n<h3 id=\"un-api-pauvre-by-design\" style=\"position:relative;\"><a href=\"#un-api-pauvre-by-design\" aria-label=\"un api pauvre by design permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un API pauvre by design</h3>\n<p>Globalement l’API d’<code class=\"language-text\">esbuild</code> est vraiment simple, en 30 minutes vous avez lu toute la doc des paramétrages possibles.\nOn est bien loin des 3-4 heures nécessaires pour lire l’ensemble de la doc d’un webpack par exemple.\nMalgré une configuration qui pourrait paraitre limitée, je reste agréablement surpris.\nJ’ai l’impression qu’on est vraiment pas loin d’avoir la <em>“juste grammaire”</em> dont on a besoin pour faire du bundling.</p>\n<p><code class=\"language-text\">esbuild</code> propose 3 modes de consommation :</p>\n<h4 id=\"cli\" style=\"position:relative;\"><a href=\"#cli\" aria-label=\"cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CLI</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">esbuild app.jsx --bundle --minify --sourcemap --target<span class=\"token operator\">=</span>chrome58,firefox57,safari11,edge16</code></pre></div>\n<h4 id=\"go\" style=\"position:relative;\"><a href=\"#go\" aria-label=\"go permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GO</h4>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"github.com/evanw/esbuild/pkg/api\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"os\"</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  result <span class=\"token operator\">:=</span> api<span class=\"token punctuation\">.</span><span class=\"token function\">Build</span><span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">.</span>BuildOptions<span class=\"token punctuation\">{</span>\n    EntryPoints<span class=\"token punctuation\">:</span>       <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"app.jsx\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Bundle<span class=\"token punctuation\">:</span>            <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    MinifyWhitespace<span class=\"token punctuation\">:</span>  <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    MinifyIdentifiers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    MinifySyntax<span class=\"token punctuation\">:</span>      <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    Engines<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>api<span class=\"token punctuation\">.</span>Engine<span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">{</span>api<span class=\"token punctuation\">.</span>EngineChrome<span class=\"token punctuation\">,</span> <span class=\"token string\">\"58\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>api<span class=\"token punctuation\">.</span>EngineFirefox<span class=\"token punctuation\">,</span> <span class=\"token string\">\"57\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>api<span class=\"token punctuation\">.</span>EngineSafari<span class=\"token punctuation\">,</span> <span class=\"token string\">\"11\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>api<span class=\"token punctuation\">.</span>EngineEdge<span class=\"token punctuation\">,</span> <span class=\"token string\">\"16\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Write<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>Errors<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token punctuation\">{</span>\n    os<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"js\" style=\"position:relative;\"><a href=\"#js\" aria-label=\"js permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JS</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'esbuild'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">buildSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  entryPoints<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'app.jsx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  bundle<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  minify<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  sourcemap<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  target<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'chrome58'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'firefox57'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'safari11'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'edge16'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  outfile<span class=\"token operator\">:</span> <span class=\"token string\">'out.js'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>À mes yeux le CLI reste hyper pratique pour tester des choses, mais dans un usage plus <em>“industriel”</em> on préfèrera quand même le format JS ou GO.</p>\n<h3 id=\"des-mécaniques-de-plugins\" style=\"position:relative;\"><a href=\"#des-m%C3%A9caniques-de-plugins\" aria-label=\"des mécaniques de plugins permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Des mécaniques de plugins</h3>\n<p><a href=\"https://github.com/evanw\">Evan Wallace</a> le créateur et core mainteneur d’<code class=\"language-text\">esbuild</code> ne s’en cache pas, il ne souhaite pas que son outil réponde à 100% des besoins qu’on peut avoir dans le monde du web.\nCependant, cela ne signifie pas qu’on ne peut pas se servir de cette outil dans des cas spécifiques.</p>\n<p>Comme on peut le voir avec les autres bundler, <code class=\"language-text\">esbuild</code> propose la mécanique de plugins qui vous permettent beaucoup de choses.\nPour éviter de maintenir tous ces besoins spécifiques, le créateur compte donc sur la communauté pour créer tous les plugins qu’on peut souhaiter.\nEt clairement, la communauté est la, je vous laisse voir <a href=\"https://github.com/esbuild/community-plugins\">cette page qui liste quelques plugins</a>.</p>\n<h3 id=\"les-features-les-plus-intéressantes\" style=\"position:relative;\"><a href=\"#les-features-les-plus-int%C3%A9ressantes\" aria-label=\"les features les plus intéressantes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Les features les plus intéressantes</h3>\n<p>Je ne vais pas ici citer les features qui me semblent le coeur d’un bundler Web comme le code splitting, l’injection, la minification.\nCependant, j’ai été étonné par quelques features qu’on ne retrouve pas ailleurs.</p>\n<h4 id=\"une-architecture-simple-à-comprendre\" style=\"position:relative;\"><a href=\"#une-architecture-simple-%C3%A0-comprendre\" aria-label=\"une architecture simple à comprendre permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Une architecture simple à comprendre</h4>\n<p>Clairement, ce qui fait la force d’<code class=\"language-text\">esbuild</code> par rapport à ses concurrents est son architecture qui peut se résumer simplement.\nOn comprend bien qu’en alliant parallélisation des étapes du build et reduction du nombre de lecture de l’AST.\nJe vous invite à lire <a href=\"https://esbuild.github.io/faq/#why-is-esbuild-fast\">plus d’explications dans la doc</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/111dc8e0d4f60fb0fc3210264a258423/66632/build-pipeline.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABt0lEQVQoz12TS5PBUBCF8/9/DWWqWKRqrGxYYKEYrxLvEI+QIJKYzz13zJizSLXuPt3ndjcny7L7/R4EQRiGSZI8DPI857vb7VzX/TQ4n8/y3263NE2V5oxGoyiK1uv14XCI4/h6vZ5OJ1LJwN9oNOr1+mAwwJ5MJrPZjBBpljwej2mYG+Alyfd9hFAFUZ7nTadT8vBTpdVqXS4XNCLWdoZD9vF4RJLypB/yfr+nFiFqkcNDiMK3ZClMDHBh4yEVg1rk8Qpo2+2WQpEBUUtGLR34QiYAgQBffsInhJNx0BwytfCrNBQnNSAJgt6pAP0DAznzd2QGDt1pNZ/PPYPNZoMXZ61W+zDAo0H8ZdppQyPAMtrttvpQKzZgMYyadcBnwmhGP/PD/t2zZotajUHD054Rr/HqSLIfWDKr73a7pVKpUqkUi8XVaqWxY9Cz3+93Oh1sndeLZsmEWcNwOPwy0FZpy20VCoVyuVytVqmisT3e4fAMDZNuWgOvxUAqL0KXjpEvynu93uv+n2Q9ktOhP4NRCZFZLKV1HhTFbjaboYE8TzIbXiwWjH25XKr5P4X6k2moFH3dwjfa11MddistwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/111dc8e0d4f60fb0fc3210264a258423/ba381/build-pipeline.webp 200w,\n/static/111dc8e0d4f60fb0fc3210264a258423/7f61c/build-pipeline.webp 400w,\n/static/111dc8e0d4f60fb0fc3210264a258423/d00b9/build-pipeline.webp 800w,\n/static/111dc8e0d4f60fb0fc3210264a258423/92f8c/build-pipeline.webp 1200w,\n/static/111dc8e0d4f60fb0fc3210264a258423/ca108/build-pipeline.webp 1504w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/111dc8e0d4f60fb0fc3210264a258423/772e8/build-pipeline.png 200w,\n/static/111dc8e0d4f60fb0fc3210264a258423/e17e5/build-pipeline.png 400w,\n/static/111dc8e0d4f60fb0fc3210264a258423/5a190/build-pipeline.png 800w,\n/static/111dc8e0d4f60fb0fc3210264a258423/c1b63/build-pipeline.png 1200w,\n/static/111dc8e0d4f60fb0fc3210264a258423/66632/build-pipeline.png 1504w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/111dc8e0d4f60fb0fc3210264a258423/5a190/build-pipeline.png\"\n            alt=\"schéma d&#39;architecture d&#39;esbuild\"\n            title=\"schéma d&#39;architecture d&#39;esbuild\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"browser-targets\" style=\"position:relative;\"><a href=\"#browser-targets\" aria-label=\"browser targets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser targets</h4>\n<p>Par defaut <code class=\"language-text\">esbuild</code> vous permet de définir la cible de <em>votre compilation</em>.\nQuel <em>niveau</em> de javascript vous souhaitez atteindre ?</p>\n<p>Habituellement on utilise une suite d’outils comme <code class=\"language-text\">@babel/preset-env</code> et une <code class=\"language-text\">browserlist</code> pour faire en sorte de générer le JS compatible avec notre ciblage.\nBabel c’est génial, je l’utilise tous les jours mais l’amoncellement d’outils différents pour le <em>bundling</em> n’est clairement pas une bonne solution à mes yeux.\nCela ajoute beaucoup de complexité :</p>\n<ul>\n<li>au lieu d’apprendre a utiliser un simple outil de bundler, je dois apprendre en plus un outil de transpilation ciblé</li>\n<li>j’ai à maintenir deux dépendances</li>\n<li>passer par une librairy tierse peut réduire les performances (c’est un peu le pari d’<code class=\"language-text\">esbuild</code>)</li>\n</ul>\n<h4 id=\"le-mode-server\" style=\"position:relative;\"><a href=\"#le-mode-server\" aria-label=\"le mode server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le mode server</h4>\n<p><code class=\"language-text\">esbuild</code> est tellement rapide qu’il peut se permettre de vous exposer un server HTTP sur un dossier qui contient le résultat de votre compilation à chaque requête.\nLes autres outils se basent en général sur un mode <em>watch</em> qui surveille les fichiers qui changent pour lancer un build.</p>\n<p>Le mode <em>watch</em> existe aussi avec <code class=\"language-text\">esbuild</code>, mais le mode <code class=\"language-text\">serve</code> me parait encore plus sympa car il vous suffit de refresh votre browser pour avoir la dernière version de votre application en local.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'esbuild'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">serve</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      servedir<span class=\"token operator\">:</span> <span class=\"token string\">'www'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      entryPoints<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src/app.js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      outdir<span class=\"token operator\">:</span> <span class=\"token string\">'www/js'</span><span class=\"token punctuation\">,</span>\n      bundle<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">server</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Call \"stop\" on the web server when you're done</span>\n    server<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"mais-du-coup-on-arrête-tout-et-on-part-la-dessus-\" style=\"position:relative;\"><a href=\"#mais-du-coup-on-arr%C3%AAte-tout-et-on-part-la-dessus-\" aria-label=\"mais du coup on arrête tout et on part la dessus  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mais du coup on arrête tout et on part la dessus ?</h2>\n<blockquote>\n<p>Gagnons du temps, la réponse pour moi est clairement non.</p>\n</blockquote>\n<p>Comme le dit le créateur dans la <a href=\"https://esbuild.github.io/faq/#production-readiness\">FAQ de la doc</a> en toute honnêteté, le projet n’est pas à considérer comme étant en alpha.\nCependant, l’outil en lui-même ne possède pas encore toutes les features qui ferait de lui un bon remplacant des bundler de la génération précédente.\nJe pense notamment à l’absence de HMR natif, ou bien encore un code splitting perfectible.</p>\n<p>Il faut cependant ne pas rester fermé sur cette question.\nClairement <code class=\"language-text\">esbuild</code> a de très gros points forts qui manquent à l’écosystème actuel.\nLa communauté, encore naissante, est plutôt active et les échanges dans les Issues et les PR du repo sont hyper intéressants.</p>\n<p>Ce que j’apprécie vraiment dans ce projet, ce sont les parties pris : un focus sur les performances, une api qui reste simple.\nEnfin, pour une fois qu’un bundler n’a pas 1000 dépendances et me rajoute 100Mo dans mon dossier <code class=\"language-text\">node_modules</code>, c’est assez beau pour le noter.</p>\n<p>Je finirais en vous disant qu’ <code class=\"language-text\">esbuild</code> n’est pas la seule alternative qui nous est proposé dans cette nouvelle génération de <em>bundler</em>.\nJe compte justement faire ce genre d’analyse sur les outils comme <a href=\"https://vitejs.dev/\">Vite</a> ou bien <a href=\"https://www.snowpack.dev/\">Snowpack</a>.</p>","headings":[{"value":"En quoi esbuild parait intéressant ?"},{"value":"Un API pauvre by design"},{"value":"CLI"},{"value":"GO"},{"value":"JS"},{"value":"Des mécaniques de plugins"},{"value":"Les features les plus intéressantes"},{"value":"Une architecture simple à comprendre"},{"value":"Browser targets"},{"value":"Le mode server"},{"value":"Mais du coup on arrête tout et on part la dessus ?"}],"wordCount":{"words":973},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#en-quoi-esbuild-parait-int%C3%A9ressant-\">En quoi esbuild parait intéressant ?</a></p>\n<ul>\n<li>\n<p><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#un-api-pauvre-by-design\">Un API pauvre by design</a></p>\n<ul>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#cli\">CLI</a></li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#go\">GO</a></li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#js\">JS</a></li>\n</ul>\n</li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#des-m%C3%A9caniques-de-plugins\">Des mécaniques de plugins</a></li>\n<li>\n<p><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#les-features-les-plus-int%C3%A9ressantes\">Les features les plus intéressantes</a></p>\n<ul>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#une-architecture-simple-%C3%A0-comprendre\">Une architecture simple à comprendre</a></li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#browser-targets\">Browser targets</a></li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#le-mode-server\">Le mode server</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/#mais-du-coup-on-arr%C3%AAte-tout-et-on-part-la-dessus-\">Mais du coup on arrête tout et on part la dessus ?</a></li>\n</ul>","frontmatter":{"title":"Esbuild, le bundler incroyablement rapide 💨 et prometteur 📈 !","date":"March 14, 2021","dateJson":"2021-03-14","translations":["en","esbuild-incredibly-fast-and-promising"],"description":"Jouant avec les bundler traditionnels comme webpack depuis plusieurs années, je vous propose ici mon avis sur le bundler esbuild.","language":"fr","tags":["webpack","js","bundler"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7730496453900708,"src":"/static/149abc0bb288e9a173d8fcbbc7dd994c/31987/esbuild.png","srcSet":"/static/149abc0bb288e9a173d8fcbbc7dd994c/e1953/esbuild.png 250w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/46604/esbuild.png 500w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/31987/esbuild.png 1000w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/e4d72/esbuild.png 1280w","srcWebp":"/static/149abc0bb288e9a173d8fcbbc7dd994c/e30b5/esbuild.webp","srcSetWebp":"/static/149abc0bb288e9a173d8fcbbc7dd994c/7ca0e/esbuild.webp 250w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/e9589/esbuild.webp 500w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/e30b5/esbuild.webp 1000w,\n/static/149abc0bb288e9a173d8fcbbc7dd994c/135cd/esbuild.webp 1280w","sizes":"(max-width: 1000px) 100vw, 1000px"},"image":{"src":"/static/149abc0bb288e9a173d8fcbbc7dd994c/05d05/esbuild.png"},"image16x9":{"src":"/static/149abc0bb288e9a173d8fcbbc7dd994c/c923e/esbuild.png"},"image4x3":{"src":"/static/149abc0bb288e9a173d8fcbbc7dd994c/245b0/esbuild.png"},"image1x1":{"src":"/static/149abc0bb288e9a173d8fcbbc7dd994c/9cb58/esbuild.png"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Après webpack, esbuild et vitejs, prenons le temps d’étudier le cas de snowpack.\nCe dernier semble se faire un petit nom dans l’écosystème…","fields":{"slug":"/fr/que-vaut-snowpack/"},"timeToRead":7,"frontmatter":{"title":"🗻 Snowpack 🗻 le remplaçant de webpack ?️","date":"June 02, 2021","dateJson":"2021-06-02","description":"Après des articles sur esbuild, vite, je vous propose de découvrir ensemble snowpack afin de se faire un avis.","tags":["webpack","snowpack","vitejs","bundler"]}}},{"node":{"excerpt":"Après avoir traité sur ce blog dans plusieurs articles de webpack, j’ai commencé une nouvelle série d’articles sur les bundlers nouvelles…","fields":{"slug":"/fr/vitejs-concurrent-performant-webpack-pour-react/"},"timeToRead":9,"frontmatter":{"title":"Vite, le remplaçant à webpack ?!😮","date":"March 26, 2021","dateJson":"2021-03-26","description":"Après avoir étudié des solutions comme Webpack et Esbuild, il me fallait m'intéresser aux outils comme Vite qui fait partie à mes yeux d'une nouvelle génération.","tags":["webpack","esbuild","vitejs","bundler"]}}},{"node":{"excerpt":"Cette fin d’année scolaire en tant que professeur à la fac n’est pas très habituelle.\nD’ici quelques jours, je m’apprête à donner mes…","fields":{"slug":"/fr/gol-hommage/"},"timeToRead":2,"frontmatter":{"title":"Hommage personnel au \"Game of Life\" (Jeu de la vie)","date":"April 20, 2020","dateJson":"2020-04-20","description":"Essai d'implémentation du Jeu de la Vie en Javascript dans le navigateur et sans framework.","tags":["js","canvas"]}}},{"node":{"excerpt":"Si vous avez besoin d’utiliser webpack pour votre projet. Vous êtes très souvent contraint par  qui a fait le travail pour vous. Vous ne…","fields":{"slug":"/fr/formation-webpack-gratuite/"},"timeToRead":1,"frontmatter":{"title":"Formation webpack gratuite et open-source","date":"July 23, 2019","dateJson":"2019-07-23","description":"webpack semble compliqué pour beaucou de monde. C’est pourquoi j'ai créé des ateliers pour apprendre ses concepts en partant de la base.","tags":["formation","webpack","débutant"]}}}]}},"pageContext":{"slug":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/","tags":["webpack","js","bundler"],"language":"fr","previous":{"fields":{"slug":"/fr/comment-lancer-des-actions-github-en-simultane-sur-des-sous-dossiers/"},"frontmatter":{"title":"Github Action : Comment paralléliser ses tests dynamiquement par dossier ?","tags":["github","action","CI","tutoriel"]}},"next":{"fields":{"slug":"/fr/react-redux-pieges-bonnes-pratiques/"},"frontmatter":{"title":"React/Redux : pièges et meilleures pratiques","tags":["react","redux","web"]}}}},"staticQueryHashes":["1264045386","1666466174","2564629789","4061151221","62118570"]}