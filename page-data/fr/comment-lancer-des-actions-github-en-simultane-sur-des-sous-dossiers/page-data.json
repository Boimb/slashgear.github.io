{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/fr/comment-lancer-des-actions-github-en-simultane-sur-des-sous-dossiers/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.slashgear.dev"}},"config":{"html":"<p>Ecrit par <strong>Antoine Caron</strong> qui vit et travaille √† Lyon et d√©veloppe des choses utiles √† <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nTu devrais le suivre sur <a href=\"https://twitter.com/Slashgear_\">Twitter</a>.\nN‚Äôh√©sites pas √† aller voir <a href=\"/conferences\">ses conf√©rences sur la page d√©di√©e</a>.\nSi vous voulez voir mon parcours pro, <a href=\"/resume\">mon CV est disponible ici en üá¨üáß</a>.</p>","fields":{"slug":"/fr/"},"frontmatter":{"title":"Antoine Caron","language":"fr"}},"markdownRemark":{"id":"dfece0c4-0bed-5a5a-9c30-93d775729120","excerpt":"Encore une fois, je me suis donn√© un challenge pour apprendre √† utiliser Github Action.\nJ‚Äôai essay√© de voir s‚Äôil √©tait possible de lancer‚Ä¶","html":"<p>Encore une fois, je me suis donn√© un challenge pour apprendre √† utiliser Github Action.\nJ‚Äôai essay√© de voir s‚Äôil √©tait possible de lancer dynamiquement un job pour chaque dossier dans un r√©pertoire.</p>\n<p>On est souvent amen√© √† vouloir parall√©liser l‚Äôex√©cution des tests pour r√©duire le temps de l‚Äôint√©gration continue.\nSouvent les outils comme <code class=\"language-text\">Jest</code> ou <code class=\"language-text\">CucumberJS</code> poss√®dent des fonctionnalit√©s de parrall√©lisation mais celles-ci confrontent souvent les limites de la puissance des machines sur lesquelles on souhaite les lancer.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">tests/\n  user/\n    foo.feature\n    bar.feature\n  account/\n    example.feature\n  live/\n    a.feature\n    video.feature</code></pre></div>\n<p>Je me suis demand√© si il ne serait pas plus performant de parall√©liser le lancement des tests directement gr√¢ce √† l‚Äôoutil de CI pour n‚Äôavoir besoin que de petits <em>runners</em>.\nDans l‚Äôexemple pr√©c√©dent, j‚Äôaimerais pouvoir lancer en parall√®le sur un <em>runner</em> distinct pour chaque dossier dans <code class=\"language-text\">test/</code>.</p>\n<h2 id=\"une-solution-avec-les-github-action\" style=\"position:relative;\"><a href=\"#une-solution-avec-les-github-action\" aria-label=\"une solution avec les github action permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Une Solution avec les <em>Github action</em></h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> CI\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>main<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">directories</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Job that list subdirectories</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">outputs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">dir</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.set<span class=\"token punctuation\">-</span>dirs.outputs.dir <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token comment\"># generate output name dir by using inner step output</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> set<span class=\"token punctuation\">-</span>dirs <span class=\"token comment\"># Give it an id to handle to get step outputs in the outputs key above</span>\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>set<span class=\"token punctuation\">-</span>output name=dir<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>$(ls <span class=\"token punctuation\">-</span>d <span class=\"token important\">*/</span> <span class=\"token punctuation\">|</span> jq <span class=\"token punctuation\">-</span>R <span class=\"token punctuation\">-</span>s <span class=\"token punctuation\">-</span>c 'split(\"\\n\")<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">-1</span><span class=\"token punctuation\">]</span>')\"\n        <span class=\"token comment\"># Define step output named dir base on ls command transformed to JSON thanks to jq</span>\n  <span class=\"token key atrule\">loop</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>directories<span class=\"token punctuation\">]</span> <span class=\"token comment\"># Depends on previous job</span>\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">dir</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>fromJson(needs.directories.outputs.dir)<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token comment\"># List matrix strategy from directories dynamically</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>matrix.dir<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>√Ä vous de l‚Äôadapter √† vos besoins !</p>","headings":[{"value":"Une Solution avec les Github action"}],"wordCount":{"words":136},"tableOfContents":"<ul>\n<li><a href=\"#une-solution-avec-les-github-action\">Une Solution avec les <em>Github action</em></a></li>\n</ul>","frontmatter":{"title":"Github Action : Comment parall√©liser ses tests dynamiquement par dossier ?","date":"December 01, 2020","dateJson":"2020-12-01","translations":["en","how-to-split-test-by-folder-with-github-action"],"description":"Encore une fois, je joue avec les Github Action pour voir si elles peuvent r√©pondre aux probl√©matiques de CI que je peux rencontrer dans mon travail.","language":"fr","tags":["github","action","CI","tutoriel"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.8987341772151898,"src":"/static/ff44249e8985e61cdbe670afb0139b18/4fe8c/github-actions.jpg","srcSet":"/static/ff44249e8985e61cdbe670afb0139b18/aabdf/github-actions.jpg 150w,\n/static/ff44249e8985e61cdbe670afb0139b18/9dc27/github-actions.jpg 300w,\n/static/ff44249e8985e61cdbe670afb0139b18/4fe8c/github-actions.jpg 600w,\n/static/ff44249e8985e61cdbe670afb0139b18/9842e/github-actions.jpg 900w,\n/static/ff44249e8985e61cdbe670afb0139b18/47498/github-actions.jpg 1200w","srcWebp":"/static/ff44249e8985e61cdbe670afb0139b18/ad85c/github-actions.webp","srcSetWebp":"/static/ff44249e8985e61cdbe670afb0139b18/e7487/github-actions.webp 150w,\n/static/ff44249e8985e61cdbe670afb0139b18/403a4/github-actions.webp 300w,\n/static/ff44249e8985e61cdbe670afb0139b18/ad85c/github-actions.webp 600w,\n/static/ff44249e8985e61cdbe670afb0139b18/210c1/github-actions.webp 900w,\n/static/ff44249e8985e61cdbe670afb0139b18/99238/github-actions.webp 1200w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/ff44249e8985e61cdbe670afb0139b18/10d63/github-actions.jpg"},"image16x9":{"src":"/static/ff44249e8985e61cdbe670afb0139b18/6edcc/github-actions.jpg"},"image4x3":{"src":"/static/ff44249e8985e61cdbe670afb0139b18/e14ae/github-actions.jpg"},"image1x1":{"src":"/static/ff44249e8985e61cdbe670afb0139b18/db124/github-actions.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"J‚Äôai r√©cemment mis en place une pile de tests de bout en bout pour m‚Äôassurer que je n‚Äôallais pas introduire de r√©gressions fonctionnelles‚Ä¶","fields":{"slug":"/fr/comment-mettre-en-place-des-tests-bout-en-bout-avec-webdriverio/"},"timeToRead":8,"frontmatter":{"title":"Comment mettre en place des tests bout en bout avec WebdriverIo ?","date":"August 16, 2021","dateJson":"2021-08-16","description":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j'applique dans mon outil CI actuel. Je voulais parall√©liser les t√¢ches sur chaque √©tiquette d'une pull request.","tags":["github","action","e2e","WebdriverIo"]}}},{"node":{"excerpt":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j‚Äôapplique dans mon‚Ä¶","fields":{"slug":"/fr/comment-parralelliser-un-job-github-action-par-label/"},"timeToRead":2,"frontmatter":{"title":"Github Action : Comment g√©rer dynamiquement des steps pour chaque label de Pull Request ?","date":"November 29, 2020","dateJson":"2020-11-29","description":"Depuis quelque temps, je joue avec les actions github pour voir si je peux facilement reproduire les comportements que j'applique dans mon outil de CI actuel. Je voulais mettre en parall√®le les t√¢ches sur chaque label de Pull Request.","tags":["github","action","CI","tutoriel"]}}},{"node":{"excerpt":"Github Pages est une solution pour h√©berger des sites web statiques directement dans ton d√©p√¥t Github en poussant les fichiers du site vers‚Ä¶","fields":{"slug":"/fr/comment-deployer-sur-github-pages-avec-travis-ci/"},"timeToRead":2,"frontmatter":{"title":"Comment se d√©ployer sur les pages Github avec Travis CI ?","date":"May 26, 2020","dateJson":"2020-05-26","description":"Comment automatiser en quelques minutes le d√©ploiement de votre site sur les pages Github avec l'outil Travis CI. Ce tutoriel d√©crit √©tape par √©tape toutes les actions √† effectuer pour publier un site statique sur des pages Github et l'h√©berger gratuitement.","tags":["tutoriel","github","gatsby"]}}},{"node":{"excerpt":"Lorsque j‚Äôai commenc√© √† enseigner en septembre dernier, je recherchais une solution\npour pouvoir suivre facilement l‚Äôavanc√©e des √©tudiants‚Ä¶","fields":{"slug":"/fr/github-classroom/"},"timeToRead":6,"frontmatter":{"title":"Github classroom - un outil √† tester","date":"March 25, 2017","dateJson":"2017-03-25","description":"J'ai r√©cemment essay√© Github Classroom avec mes √©tudiants de 4√®me ann√©e de l'√©cole Polytech Lyon. Je vous propose ici mes retours sur cet outil √† destination des enseignants pour le suivi de TP.","tags":["formation","git","github"]}}}]}},"pageContext":{"slug":"/fr/comment-lancer-des-actions-github-en-simultane-sur-des-sous-dossiers/","tags":["github","action","CI","tutoriel"],"language":"fr","previous":{"fields":{"slug":"/fr/comment-parralelliser-un-job-github-action-par-label/"},"frontmatter":{"title":"Github Action : Comment g√©rer dynamiquement des steps pour chaque label de Pull Request ?","tags":["github","action","CI","tutoriel"]}},"next":{"fields":{"slug":"/fr/esbuild-bundler-incroyablement-rapide-et-prometteur/"},"frontmatter":{"title":"Esbuild, le bundler incroyablement rapide üí® et prometteur üìà !","tags":["webpack","javascript","bundler"]}}}},
    "staticQueryHashes": ["1264045386","1666466174","2564629789","4061151221","62118570"]}