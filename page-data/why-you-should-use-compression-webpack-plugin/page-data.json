{"componentChunkName":"component---src-templates-blog-post-js","path":"/why-you-should-use-compression-webpack-plugin/","result":{"data":{"config":{"html":"<p>Written by <strong>Antoine Caron</strong> who lives and works in Lyon (France) building useful things at <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nYou should follow him <a href=\"https://twitter.com/Slashgear_\">on Twitter</a></p>","fields":{"slug":"/"},"frontmatter":{"title":"Antoine Caron","language":"en"}},"markdownRemark":{"id":"050ce4aa-46b6-534a-8e00-67c8d1fb76f1","excerpt":"If you are using webpack as module bundler for your application, you probably are concerned by its own performance and loading time.\nYou may…","html":"<p>If you are using webpack as module bundler for your application, you probably are concerned by its own performance and loading time.\nYou may have used code splitting, tree shaking, uglifyfication but you may have forgot a very important step.</p>\n<h2 id=\"compression-is-mandatory\" style=\"position:relative;\"><a href=\"#compression-is-mandatory\" aria-label=\"compression is mandatory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compression is mandatory</h2>\n<p>In 2019, if you are not using a compression algorithm to deliver your files in a lighter version to make your website load faster, the situation is critical.\nEvery website performance analyser will tell you to do it. Here is a size comparison of a vanilla <a href=\"https://cli.vuejs.org/\">Vue CLI</a> website with and without Gzip.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/15d620b40e592ba0943d30e7a40c5dc2/0a47e/vue-cli-vanilla-size.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQoz5VSiUrDQBDt/3+B+hf6BSoiCta2iiB4pAdVSI9ks2d2ZidOuqlN44XDMHkJ72XOnvdeCCE3lmWZUlJrtc5EroAqwqIA56ofrNd+IaZvgMcqzcGVzi9SIwT9KbbWilxIYajhUuun1AERN+IQAoBfLIVYScD4hXas38XcuTF6tcy00JHQ4X0vZhmnRUQuOxdKrlXdOdWZI2jjCHZirTUAbOqE1ySdzFVFseL2mOgL2JbNDwTEAJOXt4ur9/79evikB49ylPjRBNmHHKeBfTDGu1mQjjxQI+bMSilbuvnz9Ozw+Pzo5PSgjteX05uH4jbBT+8nOBxjbsj5eqt7e0YoKfBJAEewRSySgicsIwHAEoW4HZ7R/pFse+ImjG0OyxjrfRwKMY4rLEvfFf/XPgDNJrrq4uYUcgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/15d620b40e592ba0943d30e7a40c5dc2/cbe2e/vue-cli-vanilla-size.webp 148w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/3084c/vue-cli-vanilla-size.webp 295w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/5ca24/vue-cli-vanilla-size.webp 590w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/e88ff/vue-cli-vanilla-size.webp 600w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/15d620b40e592ba0943d30e7a40c5dc2/12f09/vue-cli-vanilla-size.png 148w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/e4a3f/vue-cli-vanilla-size.png 295w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/fcda8/vue-cli-vanilla-size.png 590w,\n/static/15d620b40e592ba0943d30e7a40c5dc2/0a47e/vue-cli-vanilla-size.png 600w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/15d620b40e592ba0943d30e7a40c5dc2/fcda8/vue-cli-vanilla-size.png\"\n          alt=\"Vue CLI vanilla size compared to gzip\"\n          title=\"Vue CLI vanilla size compared to gzip\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p><strong>Here we reduce 64% of the actual size with Gzip.</strong></p>\n<h2 id=\"compressing-static-files-on-the-fly-is-redondant\" style=\"position:relative;\"><a href=\"#compressing-static-files-on-the-fly-is-redondant\" aria-label=\"compressing static files on the fly is redondant permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compressing static files on the fly is redondant</h2>\n<p>Every modern web server has the possibility to compress files on demand.\nAlthough Gzip is fast, compressing static files on each demand is anti-pattern.\nEven if you use a cache in front of your static files requests.</p>\n<p><strong>Static files compression should be done during the build time.</strong></p>\n<p>If you are in a webpack context, adding compression is very easy.</p>\n<p>To do so, you can install the <em>compression-webpack-plugin</em> with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --dev compression-webpack-plugin</code></pre></div>\n<p>…and add it in your production configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">...</span>\nplugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">CompressionWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>In two easy steps, your output static files will have their <em>.gz</em> equivalent.\nNow if you ship those files on a webserver like <a href=\"https://caddyserver.com/\">Caddy</a>.\nIt will automatically deliver the pre-gzipped version if they exist.\nHowever you need to activate it <a href=\"http://nginx.org/en/docs/http/ngx_http_gzip_static_module.html\">in Nginx server configuration</a>.</p>\n<h2 id=\"should-we-only-generate-gz-\" style=\"position:relative;\"><a href=\"#should-we-only-generate-gz-\" aria-label=\"should we only generate gz  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“Should we only generate .gz ?”</h2>\n<p>If you followed the above steps, you enabled compression on your webserver. That is great!</p>\n<p><strong>But in 2019, Gzip is not the only solution to compress your files.</strong></p>\n<h3 id=\"zopfli\" style=\"position:relative;\"><a href=\"#zopfli\" aria-label=\"zopfli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zopfli</h3>\n<p>Zopfli is a lossless compression algorithm which has better compression results compared to Gzip with slower compression time.\nSo if you can, you must always use Zopfli compression for static files, instead of basic Gzip.\nOutput files of Zopfli respects the same format as Gzip, browser support is the same.</p>\n<p>You can use zopfli <a href=\"https://github.com/webpack-contrib/compression-webpack-plugin#using-zopfli\">with compression webpack plugin.</a></p>\n<h3 id=\"brotli\" style=\"position:relative;\"><a href=\"#brotli\" aria-label=\"brotli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Brotli</h3>\n<p>Brotli is a recent compression algorithm (<a href=\"https://tools.ietf.org/html/rfc7932\">RFC 7932</a>) with <a href=\"https://caniuse.com/#search=brotli\">a great browser support</a>.\nBased on a new context modeling and a new file format, brotli is very performant for compressing static files.\nThere is still some difficult parts with brotli (not available on Node &#x3C; v11, hard to configure on some webservers like Nginx)</p>\n<p>You can use brotli <a href=\"https://github.com/webpack-contrib/compression-webpack-plugin#using-zopfli\">with compression webpack plugin.</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d631442de390a6737ca967f30f3263d/416ee/vue-cli-complete-size.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.27027027027026%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQoz51TPU/DMBDt72Vi4g/wVxhAIJhYK2ABNUkXkECitEiFpWqjJmn9dR/mEpPiqhlorefzy51fcnd2ekRkrTXGaK0DEY//3+hti2vLRCvDVhlX5ihTVQ5ctzgszJ5ktgOQCYnBMYFD4DbE0R7hv2JjbLHMCSF4492dfEssya/Wa2yq3VustVrMZ4h4iBgAiqoKsT3EIpNFK1UuZ0RwiFiaO57meQESlDYLqO5/N99N231O35Qpgz86S44eY96KpdVyyKPXUdIfDB+G2X2a3KXJ8zwbQzbBtLENYPABL19kXSSWzwL4p8ezi/Ojm+uTy6vj/u3p4vvdWDTgjePaBji24EPhf2kLs8TyRoERtNlJTtjcnF3unOtF1bFnEtQ3E2IBbvjmnwn8B+63MwOVH0z/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/0d631442de390a6737ca967f30f3263d/cbe2e/vue-cli-complete-size.webp 148w,\n/static/0d631442de390a6737ca967f30f3263d/3084c/vue-cli-complete-size.webp 295w,\n/static/0d631442de390a6737ca967f30f3263d/5ca24/vue-cli-complete-size.webp 590w,\n/static/0d631442de390a6737ca967f30f3263d/dad35/vue-cli-complete-size.webp 885w,\n/static/0d631442de390a6737ca967f30f3263d/6eb96/vue-cli-complete-size.webp 930w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/0d631442de390a6737ca967f30f3263d/12f09/vue-cli-complete-size.png 148w,\n/static/0d631442de390a6737ca967f30f3263d/e4a3f/vue-cli-complete-size.png 295w,\n/static/0d631442de390a6737ca967f30f3263d/fcda8/vue-cli-complete-size.png 590w,\n/static/0d631442de390a6737ca967f30f3263d/efc66/vue-cli-complete-size.png 885w,\n/static/0d631442de390a6737ca967f30f3263d/416ee/vue-cli-complete-size.png 930w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/0d631442de390a6737ca967f30f3263d/fcda8/vue-cli-complete-size.png\"\n          alt=\"Vue CLI compression results\"\n          title=\"Vue CLI compression results\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h2 id=\"in-conclusion-why-doing-it-with-webpack-\" style=\"position:relative;\"><a href=\"#in-conclusion-why-doing-it-with-webpack-\" aria-label=\"in conclusion why doing it with webpack  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>In conclusion: “Why doing it with Webpack ?”</h2>\n<p>Compressing static files during the build steps is still a moot topic.\nSome people argue that it is up to the web server to compress the files.\nIn fact, today web servers do not really optimize the compression of static files.</p>\n<p>When you compress during the build :</p>\n<ul>\n<li>You can easily see the complete size of your web application (which is great when you want to track web app performances)</li>\n<li>Your app is much more portable (you will easily change your deployment or your web server with pre-compressed assets)</li>\n<li>As a frontend developper you are familiar with the great value of lossless compression.</li>\n</ul>","headings":[{"value":"Compression is mandatory"},{"value":"Compressing static files on the fly is redondant"},{"value":"“Should we only generate .gz ?”"},{"value":"Zopfli"},{"value":"Brotli"},{"value":"In conclusion: “Why doing it with Webpack ?”"}],"tableOfContents":"<ul>\n<li><a href=\"/why-you-should-use-compression-webpack-plugin/#compression-is-mandatory\">Compression is mandatory</a></li>\n<li><a href=\"/why-you-should-use-compression-webpack-plugin/#compressing-static-files-on-the-fly-is-redondant\">Compressing static files on the fly is redondant</a></li>\n<li>\n<p><a href=\"/why-you-should-use-compression-webpack-plugin/#should-we-only-generate-gz-\">“Should we only generate .gz ?”</a></p>\n<ul>\n<li><a href=\"/why-you-should-use-compression-webpack-plugin/#zopfli\">Zopfli</a></li>\n<li><a href=\"/why-you-should-use-compression-webpack-plugin/#brotli\">Brotli</a></li>\n</ul>\n</li>\n<li><a href=\"/why-you-should-use-compression-webpack-plugin/#in-conclusion-why-doing-it-with-webpack-\">In conclusion: “Why doing it with Webpack ?”</a></li>\n</ul>","frontmatter":{"title":"Why you should use Compression Webpack Plugin?","date":"April 02, 2019","translations":null,"description":"If you are using webpack as module bundler for your application, you probably are concerned by its own performance and loading time. You may have used code splitting, tree shaking, uglifyfication but you may have forgot a very important step.","hero":{"childImageSharp":{"fluid":{"aspectRatio":1.5,"src":"/static/3f17140a22c3c3708af42934c82a3af3/4fe8c/matt-artz-353260-unsplash.jpg","srcSet":"/static/3f17140a22c3c3708af42934c82a3af3/aabdf/matt-artz-353260-unsplash.jpg 150w,\n/static/3f17140a22c3c3708af42934c82a3af3/9dc27/matt-artz-353260-unsplash.jpg 300w,\n/static/3f17140a22c3c3708af42934c82a3af3/4fe8c/matt-artz-353260-unsplash.jpg 600w,\n/static/3f17140a22c3c3708af42934c82a3af3/9842e/matt-artz-353260-unsplash.jpg 900w,\n/static/3f17140a22c3c3708af42934c82a3af3/47498/matt-artz-353260-unsplash.jpg 1200w,\n/static/3f17140a22c3c3708af42934c82a3af3/2c3d8/matt-artz-353260-unsplash.jpg 3008w","srcWebp":"/static/3f17140a22c3c3708af42934c82a3af3/ad85c/matt-artz-353260-unsplash.webp","srcSetWebp":"/static/3f17140a22c3c3708af42934c82a3af3/e7487/matt-artz-353260-unsplash.webp 150w,\n/static/3f17140a22c3c3708af42934c82a3af3/403a4/matt-artz-353260-unsplash.webp 300w,\n/static/3f17140a22c3c3708af42934c82a3af3/ad85c/matt-artz-353260-unsplash.webp 600w,\n/static/3f17140a22c3c3708af42934c82a3af3/210c1/matt-artz-353260-unsplash.webp 900w,\n/static/3f17140a22c3c3708af42934c82a3af3/99238/matt-artz-353260-unsplash.webp 1200w,\n/static/3f17140a22c3c3708af42934c82a3af3/7d380/matt-artz-353260-unsplash.webp 3008w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/3f17140a22c3c3708af42934c82a3af3/8dcb8/matt-artz-353260-unsplash.jpg","height":1080,"width":1080}}}}}},"pageContext":{"slug":"/why-you-should-use-compression-webpack-plugin/","language":"en","previous":{"fields":{"slug":"/angular-training/"},"frontmatter":{"title":"Angular basics"}},"next":{"fields":{"slug":"/creating-an-image-lazy-loading-component-with-react/"},"frontmatter":{"title":"Creating an image lazy loading component with React"}}}}}