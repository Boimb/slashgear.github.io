{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-to-setup-e2e-tests-with-webdriverio/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.slashgear.dev"}},"config":{"html":"<p>Written by <strong>Antoine Caron</strong> who lives and works in Lyon (France) building useful things at <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nYou should follow him <a href=\"https://twitter.com/Slashgear_\">on Twitter</a>.\nTake a look at <a href=\"/friends-you-should-follow\">my friends websites</a>.\nYou could also <a href=\"/conferences\">take a look at the conferences I gave</a>.\nIf you want to see my professional background, <a href=\"/resume\">my resume is available here</a>.</p>","fields":{"slug":"/"},"frontmatter":{"title":"Antoine Caron","language":"en"}},"markdownRemark":{"id":"1232b92a-24f2-5a92-b53e-71744e55dbeb","excerpt":"I recently set up an end-to-end testing stack to make sure I wasn’t going to introduce any functional regressions to my blog.\nWith several…","html":"<p>I recently set up an end-to-end testing stack to make sure I wasn’t going to introduce any functional regressions to my blog.\nWith several years of experience using E2E (End to End) testing technologies, I still encountered some difficulties in setting it up.</p>\n<p>In order to save you time I give you a step by step tutorial for the installation of the tools necessary to have an efficient test stack in a few minutes.</p>\n<h2 id=\"make-it-run-locally-first\" style=\"position:relative;\"><a href=\"#make-it-run-locally-first\" aria-label=\"make it run locally first permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make it run locally first</h2>\n<p>You need to install some dependencies to your project first.\nFor me the project was a quite simple Gatsby site, but you could settle it on whatever website you develop that have a <code class=\"language-text\">package.json</code> file.\nIn this case I will start from a just initialised <code class=\"language-text\">npm</code> package.\n<strong>Make sure you have a Chromium or Chrome browser installed locally.</strong>\nWe are really lucky because <a href=\"https://webdriver.io/\">WebdriverIo</a> teams have developed a CLI topic that does this job for you.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @wdio/cli</code></pre></div>\n<p>Then all you need is to trigger the initialisation of a new configuration.\nThe CLI will show you a prompt you should follow.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> wdio config</code></pre></div>\n<p><img src=\"/98f39f6c4c1dabf691434adfc56a6ff9/setup.gif\" alt=\"Exemple de capture d&#x27;écran de la sortie CLI\"></p>\n<p>Here is what you should do for each question:</p>\n<ol>\n<li>Select first <code class=\"language-text\">On my local machine</code>.</li>\n<li>You should definitely use <code class=\"language-text\">cucumber</code>, Gherkin language is so great to <a href=\"https://en.wikipedia.org/wiki/Behavior-driven_development\">declare humanly readable user behaviors</a>.</li>\n<li>Choose the compiler you need, I personally use <code class=\"language-text\">No</code>. You could decide if you wannt to handle Babel or Typescript depending on you habits.</li>\n<li>For the <code class=\"language-text\">Where are your feature files located?</code> I like to use the default value.</li>\n<li>Same for step definitions, use default value.</li>\n<li>Let’s see what tests WebdriverIo will autogenerate.</li>\n<li><code class=\"language-text\">Do you want to use page objects ?</code> I wouldn’t use that if it is the first time you setup those kind of testing stack, say <code class=\"language-text\">n</code>.</li>\n<li>You should select <code class=\"language-text\">spec</code> reporter here.</li>\n<li>Please select <code class=\"language-text\">chromedriver</code> service only.</li>\n<li>Override the base url with you local context (for example, add the port on which you expose your app locally).</li>\n</ol>\n<p>Normally the CLI generates some files for you and add the missing dependencies you need.</p>\n<p>Here is my <code class=\"language-text\">package.json</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"example-wdio\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@wdio/cli\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/cucumber-framework\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/local-runner\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@wdio/spec-reporter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.9.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"chromedriver\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^92.0.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"wdio-chromedriver-service\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.2.0\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You should see a <code class=\"language-text\">login.feature</code> file in <code class=\"language-text\">./features/</code> folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> The Internet Guinea Pig Website</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario Outline:</span><span class=\"token important\"> As a user, I can log into the secure area</span></span>\n\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> am on the login page\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> login with <span class=\"token outline variable\">&lt;username></span> and <span class=\"token outline variable\">&lt;password></span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a flash message saying <span class=\"token outline variable\">&lt;message></span>\n\n    <span class=\"token scenario\"><span class=\"token keyword\">Examples:</span><span class=\"token important\"></span></span><span class=\"token table-head\">\n      <span class=\"token punctuation\">|</span><span class=\"token th variable\"> username </span><span class=\"token punctuation\">|</span><span class=\"token th variable\"> password             </span><span class=\"token punctuation\">|</span><span class=\"token th variable\"> message                        </span><span class=\"token punctuation\">|</span></span><span class=\"token table-body\">\n      <span class=\"token punctuation\">|</span><span class=\"token td string\"> tomsmith </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> SuperSecretPassword! </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> You logged into a secure area! </span><span class=\"token punctuation\">|</span>\n      <span class=\"token punctuation\">|</span><span class=\"token td string\"> foobar   </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> barfoo               </span><span class=\"token punctuation\">|</span><span class=\"token td string\"> Your username is invalid!      </span><span class=\"token punctuation\">|</span></span></code></pre></div>\n<p>With the steps definitions in <code class=\"language-text\">./step-definitions/steps.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Given<span class=\"token punctuation\">,</span> When<span class=\"token punctuation\">,</span> Then <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@cucumber/cucumber'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">Given</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I am on the (\\w+) page$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://the-internet.herokuapp.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">When</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I login with (\\w+) and (.+)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">username<span class=\"token punctuation\">,</span> password</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#username'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button[type=\"submit\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">Then</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^I should see a flash message saying (.*)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#flash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeExisting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#flash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveTextContaining</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let’s see what those default example tests are doing !\nFor that, you just have to type this in your console and tada 🎉</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> wdio run wdio.conf.js</code></pre></div>\n<p><img src=\"/91922b6797f633320658a98c56f955cf/test-run.gif\" alt=\"Here is a gif of what happened in my Chrome browser\"></p>\n<p>Here is the log it will generate thanks to the <code class=\"language-text\">spec</code> reporter !</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">------------------------------------------------------------------\n[chrome 92.0.4515.131 mac os x #0-0] Running: chrome (v92.0.4515.131) on mac os x\n[chrome 92.0.4515.131 mac os x #0-0] Session ID: edd73da800a210e7c677c69cd064004f\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] » /features/login.feature\n[chrome 92.0.4515.131 mac os x #0-0] The Internet Guinea Pig Website\n[chrome 92.0.4515.131 mac os x #0-0] As a user, I can log into the secure area\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ Given I am on the login page\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ When I login with tomsmith and SuperSecretPassword!\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ Then I should see a flash message saying You logged into a secure area!\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] As a user, I can log into the secure area\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ Given I am on the login page\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ When I login with foobar and barfoo\n[chrome 92.0.4515.131 mac os x #0-0]    ✓ Then I should see a flash message saying Your username is invalid!\n[chrome 92.0.4515.131 mac os x #0-0]\n[chrome 92.0.4515.131 mac os x #0-0] 6 passing (3s)</code></pre></div>\n<p>For now the tests are not testing your application at all.\nYou will find many ressources on how to use <a href=\"https://cucumber.io/docs/installation/javascript/\">Cucumber JS</a> to write great test to describe and test your application features.</p>\n<h2 id=\"configure-the-github-action-workflow\" style=\"position:relative;\"><a href=\"#configure-the-github-action-workflow\" aria-label=\"configure the github action workflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configure the Github action workflow</h2>\n<p>Now that we have managed to run E2E tests on our machine, we just need to set up a continuous integration workflow that will automatically check on your Pull Request and on your <code class=\"language-text\">main</code> branch that all the tests are ok.</p>\n<p>I use for most of my projects Github Action and I’m happy with it, so the following example will use this tool.\nHowever, the principle also works with a Gitlab, Jenkins or other pipeline.</p>\n<p>With Github Action you need to setup a Yaml file to describe you workflow.\nLet’s create <code class=\"language-text\">./.github/workflows/continuous-integration.yml</code> file in your project !</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Continuous Integration\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**'</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># First you need to install a chromium browser in your runner</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Chromium\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> sudo apt<span class=\"token punctuation\">-</span>get install chromium<span class=\"token punctuation\">-</span>browser\n\n      <span class=\"token comment\"># You fetch the current ref</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n      <span class=\"token comment\"># Use Node version above 14.x you want to use</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n      <span class=\"token comment\"># Install your dependencies (with yarn, npm no matter)</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> yarn install\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n\n      <span class=\"token comment\"># This is where you could build your app</span>\n      <span class=\"token comment\"># You could also start your server process (take a look at https://github.com/Slashgear/slashgear.github.io/blob/source/.github/workflows/continuous-integration.yml)</span>\n\n      <span class=\"token comment\"># Run your test with the same command you uses locally</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> yarn wdio run wdio.conf.js\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running E2E tests</code></pre></div>\n<p>Let’s try that ! 🚀</p>\n<p>😭 Sadly you should face a very common error with E2E testing with chrome.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0-0] 2021-08-12T20:34:12.293Z ERROR webdriver: Request failed with status 500 due to unknown error: unknown error: Chrome failed to start: exited abnormally.\n[0-0]   (unknown error: DevToolsActivePort file doesn't exist)\n[0-0]   (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\n[0-0] 2021-08-12T20:34:12.293Z ERROR webdriver: #0 0x5631c488ba63 &lt;unknown></code></pre></div>\n<p><code class=\"language-text\">DevToolsActivePort file doesn't exist</code> basically means your browser did not succeed to start.\nThe main reason of the issue is the fact that you ask WebdriverIo to start Chrome browser with a Graphic User Interface on a ubuntu runner that don’t have a screen at all 😅.</p>\n<p>We need to create a new configuration of Webdriver specific to github action that extends our basic one.\nLet’s create <code class=\"language-text\">wdio-github.conf.js</code> next to <code class=\"language-text\">wdio.conf.js</code> !</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> basicConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./wdio.conf'</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>basicConfig<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// We only need to override the Chrome configuration of capabilities</span>\n  <span class=\"token literal-property property\">capabilities</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">maxInstances</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">browserName</span><span class=\"token operator\">:</span> <span class=\"token string\">'chrome'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">acceptInsecureCerts</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// We need to extends some Chrome flags in order to tell Chrome to run headless</span>\n      <span class=\"token string-property property\">'goog:chromeOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">args</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'--headless'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-gpu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-dev-shm-usage'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We now just have to change the <code class=\"language-text\">yarn wdio run</code> command in our Github Workflow YAML file.\nYou just need to push it and github will start it for you !</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b407649e807a878c10363ae2818db27/29007/action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVQ4y52Sy27CMBBFs2shie34bceB8AhQJEQR//9tt/KgUAqool1cjbzI0Z0zKdrdFrv9GbvDGcvtAZv9CeuPI4b9J1K/QZitEboV4nxA6rc0hW5RCYu6cQ8pZEywoYdPS5jQw8bvSNdB2gSuAoSOUK6jmT+shCHofYp2viHYlGmU3Nzk8p4yhX61hfYJk0qgZAoVVyiZpPd9Cmm7p9XHZLB2Ccq24Mqh0R5COYK+l/wROBxP8GkN5WfQoYcO82uUnxOwEhq+7SFNRC003qbsaTsCNi6Rl+yJq3GG67tkGqyxiN0SjQlQrqV2GZob3qfInp7JHZOdscYQUGhPLrMCaQImdfOwdvGbP3JIDQ18WlDDnGndUMsMeBk4/mdjw9AtIG28HEe6H5Bb6AvAS8M4WxHMxhnN7HA8zujvj8AlXTn7uziMEMr/b+W8YuoHGN9RamHApaX5dyDXdAQmLf2PFdfXdZ+t/AXUlTvvvwbd7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5b407649e807a878c10363ae2818db27/ba381/action.webp 200w,\n/static/5b407649e807a878c10363ae2818db27/7f61c/action.webp 400w,\n/static/5b407649e807a878c10363ae2818db27/d00b9/action.webp 800w,\n/static/5b407649e807a878c10363ae2818db27/92f8c/action.webp 1200w,\n/static/5b407649e807a878c10363ae2818db27/fad48/action.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5b407649e807a878c10363ae2818db27/772e8/action.png 200w,\n/static/5b407649e807a878c10363ae2818db27/e17e5/action.png 400w,\n/static/5b407649e807a878c10363ae2818db27/5a190/action.png 800w,\n/static/5b407649e807a878c10363ae2818db27/c1b63/action.png 1200w,\n/static/5b407649e807a878c10363ae2818db27/29007/action.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5b407649e807a878c10363ae2818db27/5a190/action.png\"\n            alt=\"Success\"\n            title=\"Success\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"setup-multi-browser-configuration-\" style=\"position:relative;\"><a href=\"#setup-multi-browser-configuration-\" aria-label=\"setup multi browser configuration  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup multi browser configuration !</h2>\n<p>Chrome is not the only browser, and I hope it never will never be !</p>\n<p><strong>WebdriverIo is a great solution to run test on multiple Browsers.</strong>\nAnd I won’t show you here what great features you could use with remote running solution like <a href=\"https://www.browserstack.com/\">BrowserStack</a> or <a href=\"https://saucelabs.com/\">Saucelabs</a> directly with WebdriverIo.</p>\n<p>Let’s configure a Firefox locally !</p>\n<ol>\n<li>Make sur to install a Java JDK 8 on your machine.\nSmall trick for Macos users like me run <code class=\"language-text\">brew install adoptopenjdk/openjdk/adoptopenjdk8</code> does the job !</li>\n<li>Run <code class=\"language-text\">yarn add -D @wdio/selenium-standalone-service</code> to install selenium services working with WebdriverIo.</li>\n<li>Make sure you have Firefox installed locally.</li>\n<li>Now the last thing we need to do is to update our configuration to add firefox capabilities.</li>\n</ol>\n<p>In <code class=\"language-text\">wdio.conf.js</code>, just replace <em>capabilities</em> and <em>services</em> arrays with this</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">{</span>\n  capabilites: <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        maxInstances: <span class=\"token number\">5</span>,\n        browserName: <span class=\"token string\">'chrome'</span>,\n        acceptInsecureCerts: true,\n    <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>\n        maxInstances: <span class=\"token number\">5</span>,\n        browserName: <span class=\"token string\">'firefox'</span>,\n        acceptInsecureCerts: true,\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>,\n  services: <span class=\"token punctuation\">[</span><span class=\"token string\">'chromedriver'</span>, <span class=\"token string\">'selenium-standalone'</span><span class=\"token punctuation\">]</span>,\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you run the command <code class=\"language-text\">yarn wdio run wdio.conf.js</code> now, it will trigger both test on Firefox and Chrome and that is completely awesome !</p>\n<p>The last thing we need to do is to update our Github specific configuration in order to make it work also in your continuous integration.\nYou need to update <em>capabilites</em> too, in order to add Firefox and to make it boot <em>Headless</em>.</p>\n<p>In <code class=\"language-text\">wdio-github.conf.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> basicConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./wdio.conf'</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>basicConfig<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// We only need to override the Chrome configuration of capabilities</span>\n  <span class=\"token literal-property property\">capabilities</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">maxInstances</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">browserName</span><span class=\"token operator\">:</span> <span class=\"token string\">'chrome'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">acceptInsecureCerts</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// We need to extends some Chrome flags in order to tell Chrome to run headless</span>\n      <span class=\"token string-property property\">'goog:chromeOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">args</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'--headless'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-gpu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--disable-dev-shm-usage'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">maxInstances</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">browserName</span><span class=\"token operator\">:</span> <span class=\"token string\">'firefox'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">acceptInsecureCerts</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">'moz:firefoxOptions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">args</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'-headless'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>And that’s all folks !</p>\n</blockquote>\n<p>Have fun covering your application with E2E tests !\nDon’t hesitate to @ me on twitter if this <em>How to</em> helped you.</p>\n<p>If you need to see the example application I used in this tutorial, take a look at <a href=\"https://github.com/Slashgear/example-wdio\">this example Github repository</a>.</p>","headings":[{"value":"Make it run locally first"},{"value":"Configure the Github action workflow"},{"value":"Setup multi browser configuration !"}],"wordCount":{"words":845},"tableOfContents":"<ul>\n<li><a href=\"#make-it-run-locally-first\">Make it run locally first</a></li>\n<li><a href=\"#configure-the-github-action-workflow\">Configure the Github action workflow</a></li>\n<li><a href=\"#setup-multi-browser-configuration-\">Setup multi browser configuration !</a></li>\n</ul>","frontmatter":{"title":"How to setup end to end tests with WebdriverIo on Github action ?","date":"August 13, 2021","dateJson":"2021-08-13","translations":["fr","comment-mettre-en-place-des-tests-bout-en-bout-avec-webdriverio"],"description":"For some time now I've been playing with github actions to see if I can easily reproduce behaviors I apply in my current CI tool. I wanted to parallelize tasks on each label of a pull request.","language":"en","tags":["github","action","e2e","WebdriverIo"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7857142857142858,"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/4fe8c/webdriverio.jpg","srcSet":"/static/9df6af6bd0accbdc6b0371ce91a5078f/aabdf/webdriverio.jpg 150w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/9dc27/webdriverio.jpg 300w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/4fe8c/webdriverio.jpg 600w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/9842e/webdriverio.jpg 900w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/47498/webdriverio.jpg 1200w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/d8255/webdriverio.jpg 1920w","srcWebp":"/static/9df6af6bd0accbdc6b0371ce91a5078f/ad85c/webdriverio.webp","srcSetWebp":"/static/9df6af6bd0accbdc6b0371ce91a5078f/e7487/webdriverio.webp 150w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/403a4/webdriverio.webp 300w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/ad85c/webdriverio.webp 600w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/210c1/webdriverio.webp 900w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/99238/webdriverio.webp 1200w,\n/static/9df6af6bd0accbdc6b0371ce91a5078f/25f09/webdriverio.webp 1920w","sizes":"(max-width: 600px) 100vw, 600px"},"image":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/10d63/webdriverio.jpg"},"image16x9":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/6edcc/webdriverio.jpg"},"image4x3":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/e14ae/webdriverio.jpg"},"image1x1":{"src":"/static/9df6af6bd0accbdc6b0371ce91a5078f/db124/webdriverio.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"Recently, I’ve been working a lot on industrializing this blog (maybe even a little too much).\nThis blog is my playground, I experiment, I…","fields":{"slug":"/how-to-automatically-handle-dependabot-pull-requests/"},"timeToRead":3,"frontmatter":{"title":"How to automatically merge dependabot pull requests with Github Actions ?","date":"May 10, 2022","dateJson":"2022-05-10","description":"Example with this blog implementation where dependabot PR automatically merge on default branch if e2e tests pass.","tags":["tutorial","github","gatsby","action","dependabot"]}}},{"node":{"excerpt":"Like last year, I am taking part in the advent of code 2021.\nAll my solution are opensource and free to reuse.\nI am doing it in Javascript…","fields":{"slug":"/advent-of-code-2021/"},"timeToRead":1,"frontmatter":{"title":"🎄 Advent of Code 2021 🎄: my solutions with JS","date":"December 04, 2021","dateJson":"2021-12-04","description":null,"tags":["javascript","oss","github","adventOfCode"]}}},{"node":{"excerpt":"I decided this year to try the adventofcode2020 challenge in JS to see.\nI published the solutions I found in a public repository on Github…","fields":{"slug":"/advent-of-code-2020/"},"timeToRead":1,"frontmatter":{"title":"🎄 Advent of Code 2020 🎄: my solutions with JS","date":"December 04, 2020","dateJson":"2020-12-04","description":"I decided this year to try the adventofcode2020 challenge in JS to see. I published the solutions I found in a public repository on Github.","tags":["javascript","oss","github","adventOfCode"]}}},{"node":{"excerpt":"Once again, I gave myself a challenge to learn how to use Github Action.\nI tried to see if it was possible to dynamically launch a job for…","fields":{"slug":"/how-to-split-test-by-folder-with-github-action/"},"timeToRead":1,"frontmatter":{"title":"Github Action: How to parallelize tests dynamically by folder?","date":"December 01, 2020","dateJson":"2020-12-01","description":"Once again, I play with Github Action to see if it can answer the CI problems I may encounter in my work.","tags":["github","action","CI","tutorial"]}}}]}},"pageContext":{"slug":"/how-to-setup-e2e-tests-with-webdriverio/","tags":["github","action","e2e","WebdriverIo"],"language":"en","previous":{"fields":{"slug":"/should-snowpack-replace-webpack/"},"frontmatter":{"title":"Should we replace webpack by 🗻 Snowpack 🗻?️","tags":["webpack","snowpack","vitejs","bundler"]}},"next":{"fields":{"slug":"/how-not-to-throw-away-your-web-application-after-two-years/"},"frontmatter":{"title":"Best practices for Web application maintenance","tags":["web","javascript","bedrock"]}}}},"staticQueryHashes":["1264045386","1666466174","2564629789","4061151221","62118570"]}