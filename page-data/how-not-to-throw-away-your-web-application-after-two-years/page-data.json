{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/how-not-to-throw-away-your-web-application-after-two-years/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://slashgear.github.io"}},"config":{"html":"<p>Written by <strong>Antoine Caron</strong> who lives and works in Lyon (France) building useful things at <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nYou should follow him <a href=\"https://twitter.com/Slashgear_\">on Twitter</a>.\nTake a look at <a href=\"/friends-you-should-follow\">my friends websites</a>.\nYou could also <a href=\"/conferences\">take a look at the conferences I gave</a>.\nIf you want to see my professional background, <a href=\"/resume\">my resume is available here</a>.</p>","fields":{"slug":"/"},"frontmatter":{"title":"Antoine Caron","language":"en"}},"markdownRemark":{"id":"87eb4d55-da4b-5208-8e92-c23a2d28e3b1","excerpt":"How not to throw away your application every two years? Feedback based on best practices applied to the web platform developed at Bedrock…","html":"<blockquote>\n<p>How not to throw away your application every two years?</p>\n</blockquote>\n<p>Feedback based on best practices applied to the web platform developed at <em><a href=\"https://www.bedrockstreaming.com/\">Bedrock Streaming</a></em></p>\n<h2 id=\"a-bit-of-context\" style=\"position:relative;\"><a href=\"#a-bit-of-context\" aria-label=\"a bit of context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A bit of context</h2>\n<p>At Bedrock Streaming many teams develop and maintain <em>frontend</em> applications for our customers and users.\nSome of those application are not very young.\nIn fact, the application I’m mainly working on is a website whose developments started in 2014.\nI have already mentioned it in different articles of <a href=\"https://slashgear.github.io/\">this blog</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY03WRXU/CMBiF9/9/gtFE8QI1cd6AF0CiLCZzOCbLQjbAuEXiSNCpfIM6HvNuKVlIvHj6tqftaU+rTdYw+4bpBr5W2wzRVH+fz6WQ7si1dLdPk+b1fUaczDNTMZcFUuc/+UFSZbz4zVltYZnmyJxUdSFtOJ5wYzpYnYAgjCmd6dyabZqmw8FxmavrBiflS8I4oReN8AYvPHh9On5I92nI/aNPy+0xnqwzUy1OFtjegDvbIxp9UKk10St1qg2Do9ML9Gqdw9I5/nOM7fUxLDfDdLq4QYTRcqkZVrZXbquJq8RVkUV8m26y2BJPaSpS8QkUoql316TZ/5TigiL/fZboyvAPSmTAPpMq1MsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/f13a9/commit-count.avif 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/6d0e0/commit-count.avif 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/ba381/commit-count.webp 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/456a1/commit-count.webp 294w\"\n              sizes=\"(max-width: 294px) 100vw, 294px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/772e8/commit-count.png 200w,\n/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png 294w\"\n            sizes=\"(max-width: 294px) 100vw, 294px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/57c6ca4dcd6d3e2b9db0b2d28a14cd48/04a86/commit-count.png\"\n            alt=\"screenshot of the number of commits on master of our project 15668\"\n            title=\"screenshot of the number of commits on master of our project 15668\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>You might think: “Oh poor people, maintaining an almost 10 year old application must be hell!”</p>\n<p>Don’t worry, it’s not the case!\nI have worked on projects that are much less old but where the development of new features was much more painful.</p>\n<p>Today the project is technically up to date, we must be on the latest version of React while it had started on a version <em>0.x.x</em>.\nIn this world of web technologies often criticized (eg: the many articles on the <em>Javascript Fatigue</em>) whose tools and practices are constantly evolving, keeping a project “up to date” remains a real challenge.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQoz52RUUsCQRSF/fNC4JME/QARtQwNg6BX01xWZ3c2tNBCEOl5X3ScGdn9YheyTd0MD5x7hwvncOfcAkAcx2czq09Q+H5kkSc8hqxpapgUYyxKqXRgrM0Vam3QxmK3WzbapD1rtjP0ZEDxokT9ukn58opKtcbNbStltdagfddhtVYMheTp2eH+4ZFGs8Xb9P3wy0kJw5Dx5BVfBgjPZ+C4jISH50tGwkcGL6iNZvYxx3EFvYFLt++wWH7+L8PcvE7kuNswGURR9Cf3L/r7YD8bfgGItBhXwYwvkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/f13a9/releases.avif 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/7bd34/releases.avif 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/ba381/releases.webp 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/a3432/releases.webp 350w\"\n              sizes=\"(max-width: 350px) 100vw, 350px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/87ea590416839a8413c9d4905c0fa4b6/772e8/releases.png 200w,\n/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png 350w\"\n            sizes=\"(max-width: 350px) 100vw, 350px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/87ea590416839a8413c9d4905c0fa4b6/13ae7/releases.png\"\n            alt=\"number of versions of the application 1445\"\n            title=\"number of versions of the application 1445\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Moreover, in the context of this project, in almost 10 years, we have had about 100 contributors.\nSome have only stayed a few months/years.\nHow can we keep the maximum knowledge on “How we do things and how it works?” in such a moving human context?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz5WSTWsTURSG55+5K4ILwZ3iopZ20Z1LXQmCX6BuVLB0BKlELAyFImprG0IpamqlpTrJtIn5mGQyITGT1KSZz9x5ZJJCk0I1Hjjcc7nwnuec+0qMEWEYMm5I7U4HNZVG0/bZ2d1DTWv8UFPUanVy+SIFvUSkJ8KQngj74qdzuKnkeR4Vs0rZqGAYZYxykXy+wFG3i142sKzmP8mHTykIAnRdB9HDaDh8L7n9R1VVCUPBdkrj884eDTvgXe43vohIxYAW6LruKKFpmsjyPKtr68SUFW7emSO+8Yn79+6S3PrKxJXLTExdY2F5jfOTs2yraYxWm9qRTU5Nsbm0RMe2TwijInuQoVjQOey0MKtZDlttXsVi9HohicQqG5txmvUGb148x2pafToBlLI/+fJhBcfzTgQtw2Lmwg0Wnq3z5ONjpp9Okzn4xq3JS8zJMsvv3/Lw0QN83x/LCVK9anHx3HUUOcHr5Etm5qfIZHa5PXuVRUUhuRVHWZSxHbe/UyHE6C8f30dGHvbZYJiR1v/lRynak97w2Tddir880oaLZjpUWn6fKDwWOm2RMwUjw7q+wPEFbiCwvUF6gTjTvH8T/AMwFjMwDY8xawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/f13a9/contributors.avif 200w,\n/static/333e464600eaed01c177c248b9aac0eb/af71e/contributors.avif 400w,\n/static/333e464600eaed01c177c248b9aac0eb/679d2/contributors.avif 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/333e464600eaed01c177c248b9aac0eb/ba381/contributors.webp 200w,\n/static/333e464600eaed01c177c248b9aac0eb/7f61c/contributors.webp 400w,\n/static/333e464600eaed01c177c248b9aac0eb/8efd0/contributors.webp 690w\"\n              sizes=\"(max-width: 690px) 100vw, 690px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/333e464600eaed01c177c248b9aac0eb/772e8/contributors.png 200w,\n/static/333e464600eaed01c177c248b9aac0eb/e17e5/contributors.png 400w,\n/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png 690w\"\n            sizes=\"(max-width: 690px) 100vw, 690px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/333e464600eaed01c177c248b9aac0eb/1e043/contributors.png\"\n            alt=\"list of the 100 contributors of the project\"\n            title=\"list of the 100 contributors of the project\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>This is what I would like to present you.</p>\n<p>With the help of my colleagues, I have collected the list of good practices that still allow us to maintain this project today.\nWith <a href=\"https://twitter.com/fooragnak\">Florent Dubost</a>, we often thought that it would be interesting to publish it.\nWe hope you will find it useful.</p>\n<h2 id=\"set-rules-and-automate-them\" style=\"position:relative;\"><a href=\"#set-rules-and-automate-them\" aria-label=\"set rules and automate them permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set rules and automate them</h2>\n<p>A project that stands the test of time is first and foremost a set of knowledge that is stacked one on top of the other.\nIt’s like the Kapla tower you used to build as a child, trying to get as high as possible.\nA solid base on which we hope to add as much as possible before a potential fall.</p>\n<p>From the beginning of a project, we have to make important decisions about “How do we want to do things?\nWe think for example about “What format for our files? How do we name this or that thing?”\nWriting accurate documentation of “How we do things” might seem like a good idea.</p>\n<p>However, documentation is cool, but it tends to get outdated very quickly.\nOur decisions evolve, but documentation does not.</p>\n<blockquote>\n<p>“Times change but not READMEs.”</p>\n<p><a href=\"https://twitter.com/omansour\"><em>Olivier Mansour (deputy CTO at Bedrock)</em></a></p>\n</blockquote>\n<p>Automating the checking of each of the rules we impose on ourselves (on our codebase or our processes) is much more durable.\nTo make it simple, we avoid as much as possible to say “We should do things like that”, and we prefer “we’ll code something that checks it for us”.\nOn top of that, on the JS side we are really well equipped with tools like <a href=\"https://eslint.org/\">Eslint</a> that allow us to implement our own rules.</p>\n<p>So the reflex we try to adopt is the following:</p>\n<ul>\n<li>“We should try to do it like this now!”</li>\n<li>“Ok that’s interesting, but how can we make sure we do it like that automatically with our CI (Continuous Integration)?”</li>\n</ul>\n<p>Continuous Integration of a project is the perfect solution to not miss anything on every <em>Pull Request</em> we provide.\nReviews are only easier because you don’t have to worry about all the rules that are already automated.\nIn this model, the review is more for knowledge sharing than for typo copying and other non-compliance with the project conventions.</p>\n<p>In this principle, we must therefore try to banish oral rules.\nThe time of the druids is over, if all the good practices of a project have to be transmitted orally, it will only take longer to guide new developers into your team.</p>\n<p><img src=\"/c822e03ae4384a98d62f2bbf5cca0be9/panoramix.gif\" alt=\"the recipe of the magic potion of panoramix is lost because secret\"></p>\n<p>A project is not set in stone. These rules evolve with time.\nIt is therefore preferable to add rules that have a script that will <em>autofix</em> the whole codebase intelligently.\nMany Eslint rules offer this, and it is a very important selection criteria when choosing new conventions.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">eslint --fix</code></pre></div>\n<p>A very strict rule that will force you to modify your code manually before each push is annoying in the long run and will annoy your teams.\nWhereas a rule (even a very strict one) that can auto-fix itself at commit time will not be seen as annoying.</p>\n<p><strong>How to decide to add new rules ?</strong></p>\n<p>This question may seem thorny, take for example the case of <code class=\"language-text\">&lt;tab></code> / <code class=\"language-text\">&lt;space></code> in files.\nFor this, we try to avoid the endless debates and follow the trend and rules of the community.\nFor example, <a href=\"https://github.com/M6Web/eslint-tools\">our Eslint configuration base</a> is based on Airbnb’s which seems to have some success in the JS community.\nBut if the rule we want to impose on ourselves is not available in Eslint or other tools, we sometimes prefer not to follow the rule rather than say “We’ll do it without a checking CI”.</p>\n<h3 id=\"the-almost-exhaustive-list-\" style=\"position:relative;\"><a href=\"#the-almost-exhaustive-list-\" aria-label=\"the almost exhaustive list  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <em>almost</em> exhaustive list 🤞</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRUlEQVQ4y41VaW/cNhT0//85RYCiH9q4KNDEbhw7ttfHrvbSipJ4U7e0OqbgW9txEWdrAoRICZw3fDPv6WSaJvR9j+cxDfjPGLoJ0/R933cjxuHwoigKsCihWTc1vTsZhgFpkqBpWlRNiUf2BU3boG1atG2Du/AMeeno+77rMWdfoVyCru3QtXss4xuEfIFhP4JzjhPP0DmHqqzp4Fx8QlWXkEIi5SmuNn8g4REYY4h2DJerjwjCGa2V0JhtPyNg36CEgZQSJ/jJKMsSXddh6Efs93sKmmUZcleiKEoYY1DXNaqqRlM3KMvicGXP8PUcx5E++MNaK1xEH8AVgxQKSZIgSWJim6YJZGpwE53ikZ1DphrD0B8YTk9ZfwY9JDx/Ecvn2VpLLK3OkbkczlkKkCYp5U4IQWd/uPIzYJ7lpOJKf0FW+Pwo5K5A6K6hi5gYF1mFpJhDlltktvjO8C1AD+Yjz8JPSDiDVhqMxXgIL7AK5+Apxy5kuA3Ocbe8JOscZ5jnL/nEBBijSYAJPYZxIFGsdSjrnFzh1z41PwX0osRxjGC5IBE8Wy0tzlcfsIxvyTKSG1yHH3EfnZEo4zgcZ+it43Pjr+8Z0VNlKPLqKSCjIB6c8/T4lclzRY578SdcocjozmQI9Gdwt4XgkkTZ2CvE2RzOvEMUb411fA+lJZx1MNrgcX2NmO/gXIZdGGG+mSHY3COJ3yFK27aoBotu30IpdaiQIqUS9apb42BLgbwysMYeF8UDaq1xtvwFqTzYJo05Lta/YScWUNKLonET/oWH6B8S6Kgo/sq+hjEAfX+oFGsNxj0wDqC9V96qDFY7CPmOStFG45L9CqFjCCFhlMMdP8VOemMLEmKhzrDVNzDyf3zoLdM0DaRJUNUHm/i5DgNILZBlOdXxNlpjx7ZQUmGaxiOARUl5lNUGeZmRwn7GNoByKdnIaIslmyESK7r2UYb+WVUVieAKja7bwyiLb5tT7HhAYL6p+ipZsCta+1J9s8FOr34i49Pvxkf3vrTGV0pJaykF7QlcqbcBXzN86QwAdW9vk9v0d4TiESKVcDrHA/8bK3kFIzNqGkcZvm64vtlmLsM2WkEbRS7w1eEFYfHupcH+C0jx45Z0wbNIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/f13a9/ci-workflow.avif 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/af71e/ci-workflow.avif 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/0bbb0/ci-workflow.avif 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/ba381/ci-workflow.webp 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/7f61c/ci-workflow.webp 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/8b983/ci-workflow.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/70d19ce71dc58f01820a31e0fee0aae5/772e8/ci-workflow.png 200w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e17e5/ci-workflow.png 400w,\n/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/70d19ce71dc58f01820a31e0fee0aae5/e5715/ci-workflow.png\"\n            alt=\"Our continuous integration workflow\"\n            title=\"Our continuous integration workflow\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>The file format is tracked managed by <a href=\"https://editorconfig.org/\">Editorconfig</a>, <a href=\"https://prettier.io/\">prettier</a> and <a href=\"https://eslint.org/\">Eslint</a>.\nWe have opensourced <a href=\"https://github.com/M6Web/eslint-tools\">our own configuration</a>, if it is of any use to you.</li>\n<li>We use a <a href=\"https://www.conventionalcommits.org/en/v1.0.0/\">specific commit name</a> to generate our changelog.\nTo make sure devs follow it, a simple step in our CI checks it.</li>\n<li>We don’t want a dev to make our JS bundles very big in production, so we track and measure their size in the CI.\nWe use an in-house tool but we can recommend the [BuildTracker] tool (<a href=\"https://buildtracker.dev/\">https://buildtracker.dev/</a>).</li>\n<li>Test coverage is not an indicator for the team, not all lines have the same need for us to be tested.\nSome teams at Bedrock however follow this indicator which at least has the interest to give a trend.</li>\n<li>Our unit tests obviously run on the CI, these must pass.</li>\n<li>Our functional tests (End to end: E2E) run on Chrome Headless, they must be green.</li>\n<li>The logs of our E2E tests are retrieved and parsed to avoid errors or React warnings (the parsing script is however complicated to maintain)</li>\n<li>Functional tests run in a <em>sandbox</em> where the whole network is proxied.\nWe make sure that our tests do not depend on a non mocked API that could slow down their execution.</li>\n<li>During the E2E tests we check that no image request has generated a 404.</li>\n<li>We perform some <a href=\"https://www.deque.com/axe/\">accessibility checks with Axe</a> during our E2E tests.</li>\n<li>We check some rules on the CSS with <a href=\"https://stylelint.io/\">Stylelint</a> and <a href=\"https://github.com/M6Web/bemlinter\">bemlinter</a> (we don’t use BEM anymore but there is still some style managed in SCSS that we migrate little by little in StyledComponent)</li>\n<li>The project is a monorepo on which we try to maintain the same dependencies versions for each package.\nFor that we have developed a tool that allows to do this check <em><a href=\"https://www.npmjs.com/package/monorepo-dependencies-check\">monorepo-dependencies-check</a></em></li>\n<li>We check that our <code class=\"language-text\">yarn.lock</code> file has not been inadvertently modified or that it has been updated with respect to the modifications of the <code class=\"language-text\">package.json</code>.</li>\n<li><a href=\"https://www.terraform.io/\">Terraform</a> is used to manage our cloud resources, we check that the file format is correct.</li>\n</ul>\n<h2 id=\"test-test-test\" style=\"position:relative;\"><a href=\"#test-test-test\" aria-label=\"test test test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test, test, test</h2>\n<p>I hope that in 2021 it is no longer necessary to explain why automatic testing of your application is essential to make it sustainable.\nIn JS, we are rather well equipped in terms of testing tools today.\nHowever, the eternal question remains:</p>\n<blockquote>\n<p>“What do we want to test?”</p>\n</blockquote>\n<p>Globally if we search on the internet this question, we see that different needs make emerge very different practices and testing tools.\nIt would be very presumptuous to think that there is a good way to automatically test your application.\nThis is why it is preferable to define one or more test strategies that meet defined and limited needs.</p>\n<p>Our test strategies are based on two distinct goals:</p>\n<ul>\n<li>To automate the verification of the functionalities proposed to the users by putting ourselves in their place.</li>\n<li>To provide us with efficient solutions to specify the way we implement our technical solutions to allow us to make them evolve more easily.</li>\n</ul>\n<p>To do this, we perform two “types of tests” that I propose to present here.</p>\n<h3 id=\"our-e2e-tests\" style=\"position:relative;\"><a href=\"#our-e2e-tests\" aria-label=\"our e2e tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our E2E tests</h3>\n<p>We call them “functional tests”, they are End-to-end (E2E) tests on a very efficient technical stack composed of <a href=\"https://cucumber.io/docs/installation/javascript/\">CucumberJS</a>, <a href=\"https://webdriver.io/\">WebdriverIO</a> with <a href=\"https://developers.google.com/web/updates/2017/04/headless-chrome\">ChromeHeadless</a>\nThis is a technical stack set up at the beginning of the project (at the time with <a href=\"https://phantomjs.org/\">PhantomJS</a> for the oldest among you)</p>\n<p>This stack allows us to automate the piloting of tests that control a browser.\nThis browser will perform actions that are as close as possible to what our real users can do while checking how the site reacts.</p>\n<p>A few years ago, this technical stack was rather complicated to set up, but today it is rather simple to do.\n<a href=\"https://github.com/Slashgear/slashgear.github.io\">The site that hosts this blog post</a> is itself proof of this.\nIt only took me about ten minutes to set up this stack with <a href=\"https://webdriver.io/docs/gettingstarted\">the WebdriverIo CLI</a> to verify that my blog is working as expected.</p>\n<p>I recently published <a href=\"https://slashgear.github.io/how-to-setup-e2e-tests-with-webdriverio/\">an article presenting the implementation of this stack</a>.</p>\n<p>So here is an example of an E2E test file to give you an idea:</p>\n<div class=\"gatsby-highlight\" data-language=\"gherkin\"><pre class=\"language-gherkin\"><code class=\"language-gherkin\"><span class=\"token feature\"><span class=\"token keyword\">Feature:</span><span class=\"token important\"> Playground</span>\n</span>\n  <span class=\"token scenario\"><span class=\"token keyword\">Background:</span><span class=\"token important\"> Playground context</span></span>\n    <span class=\"token atrule\">Given</span> <span class=\"token atrule\">I</span> use <span class=\"token string\">\"playground\"</span> test context\n\n  <span class=\"token scenario\"><span class=\"token keyword\">Scenario:</span><span class=\"token important\"> Check if playground is reachable</span></span>\n    <span class=\"token atrule\">When</span> As user <span class=\"token string\">\"toto@toto.fr\"</span> I visit the <span class=\"token string\">\"playground\"</span> page\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should see a <span class=\"token string\">\"visible playground\"</span>\n    <span class=\"token atrule\">And</span> <span class=\"token atrule\">I</span> should see 4 <span class=\"token string\">\"playground tab\"</span> in <span class=\"token string\">\"playground\"</span>\n\n    <span class=\"token atrule\">When</span> <span class=\"token atrule\">I</span> click on <span class=\"token string\">\"playground trigger\"</span>\n    <span class=\"token atrule\">Then</span> <span class=\"token atrule\">I</span> should not see a <span class=\"token string\">\"visible playground\"</span>\n\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>And it looks like this in local with my Chrome browser!</p>\n<p><img src=\"/32bbadf844172a03f1f0a39a3cee3faa/e2e-example.gif\" alt=\"Example of functional test execution\"></p>\n<p>Here is a diagram that explains how this stack works:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVQ4y32T65KbMAyFef+nbH/ttiTEAV9lyacjgbPQ9cYzGrCxPh8fiQmD0VqzJzEhUoKLT9zDA0t0iBQRSoLIdX+P6R2wHMBHdJj9HTe/INcM5yNCFKTMEGmXnLdAfUrbpTzTChY+vu3fmRtykUveNIL09yoVqWa7+pY9Si22JiI4tqCQwIeKxZEdML0AJ1AfemWFqbqP5x/zUueJUpcBqmJRq4wVaoJLq831uQS3Fyat8CWYSuL6OpQOUB9TU/lHySpXM90nbyrUs+7hTz6rh+fCTOw9NMrnJ/I8o9xmgAiS0rAtzjEEaqIQoToHmmeD61xK2RO1olbY7x7rCJEHVz4WOEYD1W0Dh3Cc2hV+qS1FkLPAR8a8FKxbNS9j4r0ollAzmhAkJ3DwaJSPNb54ptdLWVC5Yb4XA94ftLdP7EAKaEwQfwMvv8CP35Dk0EgV+299qjANhffQHlTlO5CrARUs6Wlgydu+JvXa8AMfz2MaGd2a2HVVpeR12DI/xTTa0FVLuEHi8nWI/ssnT0dipv9PtXdtaLtyMSBvf03pa/1o9rfAq/GyA7QofgavH5CymZ+69g74D+B9PfA/sptVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/f13a9/e2e-archi.avif 200w,\n/static/8de3947494607606cd09c4b4a110bef5/af71e/e2e-archi.avif 400w,\n/static/8de3947494607606cd09c4b4a110bef5/c9875/e2e-archi.avif 800w,\n/static/8de3947494607606cd09c4b4a110bef5/07e28/e2e-archi.avif 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/2babf/e2e-archi.avif 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/5f214/e2e-archi.avif 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8de3947494607606cd09c4b4a110bef5/ba381/e2e-archi.webp 200w,\n/static/8de3947494607606cd09c4b4a110bef5/7f61c/e2e-archi.webp 400w,\n/static/8de3947494607606cd09c4b4a110bef5/d00b9/e2e-archi.webp 800w,\n/static/8de3947494607606cd09c4b4a110bef5/92f8c/e2e-archi.webp 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/fad48/e2e-archi.webp 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/b8ebc/e2e-archi.webp 2058w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8de3947494607606cd09c4b4a110bef5/772e8/e2e-archi.png 200w,\n/static/8de3947494607606cd09c4b4a110bef5/e17e5/e2e-archi.png 400w,\n/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png 800w,\n/static/8de3947494607606cd09c4b4a110bef5/c1b63/e2e-archi.png 1200w,\n/static/8de3947494607606cd09c4b4a110bef5/29007/e2e-archi.png 1600w,\n/static/8de3947494607606cd09c4b4a110bef5/ac307/e2e-archi.png 2058w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8de3947494607606cd09c4b4a110bef5/5a190/e2e-archi.png\"\n            alt=\"diagram that explains how our stack works\"\n            title=\"diagram that explains how our stack works\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Today, Bedrock’s web application has over 800 E2E test cases running on each of our <em>Pull Request</em> and the <code class=\"language-text\">master</code> branch.\nThey assure us that we are not introducing any functional regression and that’s just great!</p>\n<p>👍 The positives</p>\n<ul>\n<li>WebdriverIO also allows us to run these same tests on real devices on a daily basis through the paid SAAS service <a href=\"https://www.browserstack.com/\">Browserstack</a>.\nSo we have every day a <em>job</em> that makes sure that our site works correctly on a Chrome last version on Windows 10 and Safari on MacOs.</li>\n<li>These tests allow us to easily document the functionality of the application using the Gherkin language.</li>\n<li>They allow us to reproduce cases that are far from nominal.\nIn a <em>TDD</em> logic, they allow us to advance on the development without having to click for hours.</li>\n<li>These tests allowed us not to break the old version of the site which is still in production for some customers while our efforts are concentrated on the new one.</li>\n<li>They give us real confidence.</li>\n<li>Thanks to our library <a href=\"https://www.npmjs.com/package/superagent-mock\"><em>superagent-mock</em></a>, we can <em>fixturer</em> (plug, mock) all the APIs we depend on and thus even check the error cases.\nAlso, mocking the browser’s XHR layer allows for a significant improvement in test execution time. 🚀</li>\n<li>They give us access to extended uses like:\n<ul>\n<li>checking accessibility rules</li>\n<li>check the browser console logs (to avoid introducing errors or React Warning for example)</li>\n<li>monitoring all network calls of the site through a proxy</li>\n<li>and so on…</li>\n</ul>\n</li>\n</ul>\n<p>👎 The complications</p>\n<ul>\n<li>Maintaining this stack is complicated and expensive.\nSince few resources are published on this domain, we sometimes find ourselves digging for days to fix them 😅.\nSometimes we feel quite alone in having these worries.</li>\n<li>It is very easy to code a so-called <em>flaky</em> E2E test (ie: a test that can fail randomly).\nThey make us think that something is broken.\nThey sometimes take us a long time to stabilize.\nIt is still <strong>much better to remove a test that will not give you a stable result.</strong></li>\n<li>Running all the tests takes a lot of time on our continuous integration.\nWe must regularly work on their optimization so that the feedback they provide you is as fast as possible.\nThese important times also cost money, because we have to run these tests on machines.\nFor your information, the infrastructure of the website (just the hosting of our Node servers + static files + CDN) cost much less than our continuous integration.\nThis obviously makes our Ops team smile! 😊</li>\n<li>The new recruits in our teams have often never done this kind of testing, so there is a <del>struggle</del> phase of learning…</li>\n<li>Some features are sometimes too complicated to test with our E2E stack (for example, payment paths that depend on third parties).\nSo we sometimes fall back on other techniques with Jest, especially with a less unitary scope.</li>\n</ul>\n<h3 id=\"our-unit-tests\" style=\"position:relative;\"><a href=\"#our-unit-tests\" aria-label=\"our unit tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our “unit” tests</h3>\n<p>To complete our functional tests we also have a stack of tests written with <a href=\"https://jestjs.io/en/\">Jest</a>.\nWe call these tests unit tests because we have as a principle to try to always test our JS modules independently from the others.</p>\n<p>Let’s not debate here about “Are these real unit tests?”, there are enough articles on the internet about this topic.</p>\n<p>We use these tests for different reasons that cover needs that our functional tests do not cover:</p>\n<ul>\n<li>to help us develop our JS modules with TDD practices.</li>\n<li>to document and describe how a JS module works.</li>\n<li>test very/too complicated edge cases with our E2E tests.</li>\n<li>facilitate the refactoring of our application by showing us the technical impacts of our modifications.</li>\n</ul>\n<p>With these tests, we put ourselves at the level of a utility function, a Redux action, a reducer, a React component.\nWe rely mainly on <a href=\"https://slashgear.github.io/discover-jest-hidden-feature-automock/\">the <code class=\"language-text\">automock</code> functionality of Jest</a> which allows us to isolate our JS modules when we test.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3IA2RJ//xAAYEAADAQEAAAAAAAAAAAAAAAAAARIQE//aAAgBAQABBQI6ZTKZTP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAiAzkf/aAAgBAQAGPwIrbI//xAAZEAADAQEBAAAAAAAAAAAAAAAAASFhoRH/2gAIAQEAAT8hPQlUozTgoXhof//aAAwDAQACAAMAAAAQKw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEGlx//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxA1f//EABwQAAEFAQEBAAAAAAAAAAAAAAEAESExUUFhwf/aAAgBAQABPxACa54mDawxKYUQOHZhCGKsLhKwox8Bf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/f13a9/mocked-modules.avif 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/af71e/mocked-modules.avif 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/c9875/mocked-modules.avif 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/07e28/mocked-modules.avif 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/2babf/mocked-modules.avif 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/f696c/mocked-modules.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/ba381/mocked-modules.webp 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/7f61c/mocked-modules.webp 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/d00b9/mocked-modules.webp 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/92f8c/mocked-modules.webp 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/fad48/mocked-modules.webp 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/882b9/mocked-modules.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/e07e9/mocked-modules.jpg 200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/066f9/mocked-modules.jpg 400w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg 800w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/e5166/mocked-modules.jpg 1200w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/b17f8/mocked-modules.jpg 1600w,\n/static/8c790d7bb84694543ba87dcb7a7e76ae/0f98f/mocked-modules.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8c790d7bb84694543ba87dcb7a7e76ae/4b190/mocked-modules.jpg\"\n            alt=\"visual representation of the automock\"\n            title=\"visual representation of the automock\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>The previous image represents the metaphor that allows us to explain our unit testing strategy to newcomers.</p>\n<blockquote>\n<p>You have to imagine that the application is a wall made of unit bricks (our ecmascript modules), our unit tests must test one by one the bricks in total independence from the others.\nOur functional tests are there to test the cement between the bricks.</p>\n</blockquote>\n<p><strong>To summarize, we could say that our E2E tests test <em>what our application should do</em>, and our unit tests make sure to check <em>how it works.</em></strong></p>\n<p>Today there are more than 6000 unit tests that cover the application and allow to limit regressions.</p>\n<p>👍</p>\n<ul>\n<li><a href=\"https://jestjs.io/en/\">Jest</a> is really a great library, fast, complete, well documented.</li>\n<li>Unit tests help us a lot to understand <em>several years later</em> how it all works.</li>\n<li>We always manage to unit test our code, and it complements our E2E tests well.</li>\n<li>The <code class=\"language-text\">automock</code> is really handy for breaking down tests by modules.</li>\n</ul>\n<p>👎</p>\n<ul>\n<li>Sometimes we found ourselves limited by our E2E test stack and couldn’t rely solely on unit tests.\nWe were missing something to be able to make sure that the <em>cement between the bricks</em> worked as we wanted it to.\nFor this, a second test stack <a href=\"https://jestjs.io/en/\">Jest</a> was set up called “integration test” where the <code class=\"language-text\">automock</code> is disabled.</li>\n<li>The abuse of <a href=\"https://jestjs.io/docs/snapshot-testing\"><em>Snapshot</em></a> is dangerous for your health.\nThe use of <em>“Snapshot testing”</em> can save time on the implementation of your tests but can reduce the quality.\nHaving to review a 50 line object in <em>Snapshot</em> is neither easy nor relevant.</li>\n<li>With the depreciation of <a href=\"https://enzymejs.github.io/enzyme/\">EnzymeJS</a>, we are forced to migrate to <a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a>.\nIt is of course possible to unit test components with this new library.\nUnfortunately, this is not really the spirit and the way to do it.\n<a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React Testing Library</a> pushes us <a href=\"https://kentcdodds.com/blog/why-i-never-use-shallow-rendering\">not to play with <em>shallow rendering</em></a>.</li>\n</ul>\n<h3 id=\"our-principles\" style=\"position:relative;\"><a href=\"#our-principles\" aria-label=\"our principles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our principles</h3>\n<p>We try to always follow the following rules when asking the question “Should I add tests?“.</p>\n<ol>\n<li>If our <em>Pull Request</em> introduces new user features, we need to integrate E2E test scenarios.\nUnit tests with Jest can complete / replace them accordingly.</li>\n<li>If our <em>Pull Request</em> aims to fix a bug, it means that we are missing a test case.\nWe must therefore try to add an E2E test or, failing that, a unit test.</li>\n</ol>\n<p><em>It is while writing these lines that I think that these principles could very well be automated.</em> 🤣</p>\n<h2 id=\"the-project-stays-the-features-dont\" style=\"position:relative;\"><a href=\"#the-project-stays-the-features-dont\" aria-label=\"the project stays the features dont permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The project stays, the features don’t</h2>\n<blockquote>\n<p>“The second evolution of a feature is very often its removal.”</p>\n</blockquote>\n<p>As a matter of principle, we want to make sure that every new feature in the application does not base its activation on simply being in the codebase.\nTypically, the lifecycle of a feature in a project can be as follows (in a <a href=\"https://guides.github.com/introduction/flow/\">Github Flow</a>):</p>\n<ul>\n<li>a person implements on a branch</li>\n<li>the feature is <em>merged</em> on master</li>\n<li>it is deployed in production</li>\n<li>lives its feature life (sometimes with bugs and fixes)</li>\n<li>the feature is not needed anymore</li>\n<li>a person unravels the code and removes it</li>\n<li>new deployment</li>\n</ul>\n<p>To simplify some steps, we have implemented <em>feature flipping</em> on the project.</p>\n<p><strong>How does it work?</strong></p>\n<p>In our config there is a <em>map</em> key/value that lists all the features of the application associated with their activation status.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  anotherOne<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In our code, we have implemented conditional treatments that say “If this feature is activated then…“.\nThis can change the rendering of a component, change the implementation of a Redux action or disable a route in our <em>react-router</em>.</p>\n<p><strong>But what’s the point?</strong></p>\n<ul>\n<li>We can develop new evolutions progressively by hiding them behind a configuration key.\nWe deliver features in production without activating them.</li>\n<li>In a test environment, we can overload this config to test features that are not yet activated in production.</li>\n<li>In the case of a white label site, we can propose these features to our customers as possible options.</li>\n<li>Before deleting code of a feature, we deactivate it and clean it up without risk.</li>\n<li>Thanks to an in-house tool called <em>Applaunch</em>, this feature flipping config can be overloaded on time in a GUI without deployment.\nThis allows us to activate features without putting the code into production.\nIn the event of an incident, we can deactivate features that have been degraded.</li>\n</ul>\n<p>To give you a more concrete example, between 2018 and 2020 we completely overhauled the application’s interface.\nThis graphical evolution was just a featureFlipping key.\nThe graphical redesign was not a reset of the project, we still live with both versions (as long as the switchover of all our customers is not completed).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGScbMaP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAxESIf/aAAgBAQABBQK+uRm2f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGMf//EABYQAQEBAAAAAAAAAAAAAAAAAAECEP/aAAgBAQAGPwKZQ3//xAAcEAEAAQQDAAAAAAAAAAAAAAABABEhMUFRcbH/2gAIAQEAAT8hreRRD2YgFtzon//aAAwDAQACAAMAAAAQA9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EGrpEf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QA8bF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQARITGRUWH/2gAIAQEAAT8QoVAtYyI9VSOyxkeOV//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/f13a9/compare-v4-v5.avif 200w,\n/static/1148bec58444fa4ccea56315b956b236/af71e/compare-v4-v5.avif 400w,\n/static/1148bec58444fa4ccea56315b956b236/c9875/compare-v4-v5.avif 800w,\n/static/1148bec58444fa4ccea56315b956b236/07e28/compare-v4-v5.avif 1200w,\n/static/1148bec58444fa4ccea56315b956b236/2babf/compare-v4-v5.avif 1600w,\n/static/1148bec58444fa4ccea56315b956b236/f696c/compare-v4-v5.avif 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/1148bec58444fa4ccea56315b956b236/ba381/compare-v4-v5.webp 200w,\n/static/1148bec58444fa4ccea56315b956b236/7f61c/compare-v4-v5.webp 400w,\n/static/1148bec58444fa4ccea56315b956b236/d00b9/compare-v4-v5.webp 800w,\n/static/1148bec58444fa4ccea56315b956b236/92f8c/compare-v4-v5.webp 1200w,\n/static/1148bec58444fa4ccea56315b956b236/fad48/compare-v4-v5.webp 1600w,\n/static/1148bec58444fa4ccea56315b956b236/882b9/compare-v4-v5.webp 1920w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1148bec58444fa4ccea56315b956b236/e07e9/compare-v4-v5.jpg 200w,\n/static/1148bec58444fa4ccea56315b956b236/066f9/compare-v4-v5.jpg 400w,\n/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg 800w,\n/static/1148bec58444fa4ccea56315b956b236/e5166/compare-v4-v5.jpg 1200w,\n/static/1148bec58444fa4ccea56315b956b236/b17f8/compare-v4-v5.jpg 1600w,\n/static/1148bec58444fa4ccea56315b956b236/0f98f/compare-v4-v5.jpg 1920w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1148bec58444fa4ccea56315b956b236/4b190/compare-v4-v5.jpg\"\n            alt=\"screenshot comparing v4 / v5 on 6play\"\n            title=\"screenshot comparing v4 / v5 on 6play\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"ab-testing\" style=\"position:relative;\"><a href=\"#ab-testing\" aria-label=\"ab testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A/B testing</h3>\n<p>Thanks to the great work of the backend and data teams, we were even able to extend the use of <em>feature flipping</em> by making this configuration modifiable for sub-groups of users.</p>\n<p>This allows us to deploy new features on a smaller portion of users in order to compare our <a href=\"https://en.wikipedia.org/wiki/Performance_indicator\">KPI</a>.</p>\n<p>Decision making, technical or product performance improvement, experimentation, the possibilities are numerous and we exploit them more and more.</p>\n<h3 id=\"the-future-flipping\" style=\"position:relative;\"><a href=\"#the-future-flipping\" aria-label=\"the future flipping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <em>future flipping</em>.</h3>\n<blockquote>\n<p>Based on an original idea by <a href=\"https://twitter.com/SuperFlaw\">Florent Lepretre</a>.</p>\n</blockquote>\n<p>We regularly had the need to activate features at <del>very</del> early hours in the future.\nFor that we had to be connected at a precise time on our computer to modify the configuration on the fly.</p>\n<p>To avoid forgetting to do this, or doing it late, we made sure that a configuration key could be activated from a certain date.\nTo do this, we evolved our <em>selector redux</em> which indicated if a feature was activated so that it could handle date formats and compare them to the current time.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> featureFlipping <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  myAwesomeFeature<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    offDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 20:30:00'</span><span class=\"token punctuation\">,</span>\n    onDate<span class=\"token operator\">:</span> <span class=\"token string\">'2021-07-12 19:30:00'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Many coffees ☕️ at 9am have been saved by <em>future flipping</em>.</p>\n</blockquote>\n<h2 id=\"monitor-measure-alert\" style=\"position:relative;\"><a href=\"#monitor-measure-alert\" aria-label=\"monitor measure alert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitor, Measure, Alert</h2>\n<p>To maintain a project as long as bedrock’s web application, testing, documentation and rigor are not enough.\nYou also need visibility on what works in production.</p>\n<blockquote>\n<p>“How do you know that the application you have in production right now is working as expected?”</p>\n</blockquote>\n<p>We assume that no functionality works until it is monitored.\nToday, monitoring in Bedrock on the frontend side takes the form of different tools and different stacks.\nI could quote <a href=\"https://newrelic.com/\">NewRelic</a>, a <a href=\"https://github.com/statsd/statsd\">Statsd</a>, a <a href=\"https://www.elastic.co/fr/what-is/elk-stack\">ELK</a> stack or even <a href=\"https://youbora.nicepeopleatwork.com/\">Youbora</a> for the video.</p>\n<p>To give you an example, each time a user starts a browsing session we send an anonymous monitoring <em>Hit</em> to increment a counter in Statsd.\nWe then have to define a dashboard that displays the evolution of this number in a graph.\nIf we observe a too important variation, it can allow us to detect an incident.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz3WSW0/bQBCF8xMCSW2v7fXu2iYhgrQPFIOhKsQJsROHSyuhhlZV+1DKrbT//+lUM06E06gPn9aeOT5zZuWGL2Mo3YUMIghXw7I8eDKCJQyazVfY2LSx2XL4rNPcsNBqCzgigO1IOK5ij4bjBiBsN4DwNISn4MkQwjewheSeH0RY6hgyEZKxHJ9Z9hqur0GQEZ2e1NxwF+/13hLS+Mqs1dcMvcDgoDiANOGauP6R6WyxTrj/M5SamyqOMbsvsJP0YduS6yvplYHtBOjt7bIu3O7w+iuGJKZiu+VhZ7+Pq98lknFSGdbMSGPZEu22h/2zBB/+zNBP38CyloPVIqHU2Or3sHv4GuNvQ1w8TjD4dLKYqvi+yCjsdbGXveX0+fcRLn9NkZYpJ15JSHdB8Zm7HOVtjuntmNchMf0SptvB2dcMV89lpflZQQGkDjk9b0qGF09TnD8UL6b3BU9///EdJ6T0kx9jkK68y2vDC1w+T5HkCafztakMhzcDZPMBhsTNgvkAo88ZjmdHOL0+wehLhmx++tL/h+PzI6STlNM2TLQNPwjhy7A6awQmhlTRWp1+9Pqz1BGUiXntv+9bR90JzYdyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/f13a9/grafana-monitoring-example.avif 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/af71e/grafana-monitoring-example.avif 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/c9875/grafana-monitoring-example.avif 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/07e28/grafana-monitoring-example.avif 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/2babf/grafana-monitoring-example.avif 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/8d64d/grafana-monitoring-example.avif 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/ba381/grafana-monitoring-example.webp 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/7f61c/grafana-monitoring-example.webp 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/d00b9/grafana-monitoring-example.webp 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/92f8c/grafana-monitoring-example.webp 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/fad48/grafana-monitoring-example.webp 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/20a05/grafana-monitoring-example.webp 3702w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5da9f76c5fa5325b394418fa229d9204/772e8/grafana-monitoring-example.png 200w,\n/static/5da9f76c5fa5325b394418fa229d9204/e17e5/grafana-monitoring-example.png 400w,\n/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png 800w,\n/static/5da9f76c5fa5325b394418fa229d9204/c1b63/grafana-monitoring-example.png 1200w,\n/static/5da9f76c5fa5325b394418fa229d9204/29007/grafana-monitoring-example.png 1600w,\n/static/5da9f76c5fa5325b394418fa229d9204/0b894/grafana-monitoring-example.png 3702w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5da9f76c5fa5325b394418fa229d9204/5a190/grafana-monitoring-example.png\"\n            alt=\"example of monitoring dashboard\"\n            title=\"example of monitoring dashboard\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Monitoring also offers us solutions to understand and analyze a bug that occurred in the past.\nUnderstanding an incident, explaining it, finding its root cause are the possibilities that are open to you if you monitor your application.\nMonitoring can also allow you to better communicate with your customers about the impact of an incident and also to estimate the number of impacted users.</p>\n<p>With the multiplication of our customers, monitoring our platforms well is not enough.\nToo much data, too many dashboards to monitor, it becomes very easy to miss something.\nSo we started to complement our metrics monitoring with automatic <em>alerting</em>.\nOnce we have enough confidence in the metrics, we can easily set up alerts that will warn us if there is an inconsistent value.</p>\n<p>However, we try to always trigger alerts only when it is actionable.\nIn other words, if an alert sounds, we have something to do.\nSounding alerts that do not require immediate human action generates noise and wastes time.</p>\n<p><img src=\"/c625b00a7bffa65b2f54cbae9c8ef14e/alerte-taxi.gif\" alt=\"general alert\"></p>\n<h2 id=\"limit-monitor-and-update-your-dependencies\" style=\"position:relative;\"><a href=\"#limit-monitor-and-update-your-dependencies\" aria-label=\"limit monitor and update your dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limit, monitor and update your dependencies</h2>\n<p>What goes out of date faster than your shadow in a web project based on javascript technologies are your dependencies.\nThe ecosystem evolves rapidly and your dependencies can quickly become unmaintained, out of fashion or completely overhauled with big <em>breaking changes</em>.</p>\n<p>We therefore try as much as possible to limit our dependencies and avoid adding them unnecessarily.\nA dependency is often very easy to add but it can become a real headache to remove.</p>\n<p>The graphic component libraries (e.g. React bootstrap, Material Design) are a good example of dependencies that we do not want to introduce.\nThey can make integration easier at first, but they often freeze the version of your component library later on.\nYou don’t want to freeze the React version in your application for two form components.</p>\n<p>Monitoring is also part of our dependency management routines.\nSince the addition of <a href=\"https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities\">reporting security flaws in an NPM package</a>, it is possible to know if a project has a dependency that contains a known security flaw with a simple command.\nSo we have daily jobs on our projects that run the <code class=\"language-text\">yarn audit</code> command to force us to apply patches.</p>\n<blockquote>\n<p>Dependency maintenance is greatly facilitated by our E2E test stack which sounds the alarm if the version upgrade generates a regression.</p>\n</blockquote>\n<p>Today, except for security flaws, we update our dependencies “when we have time”, often at the end of <em>sprint</em>.\nWe are not satisfied with this because some dependencies can be forgotten.\nI personally use tools like <a href=\"https://classic.yarnpkg.com/en/docs/cli/outdated/\"><code class=\"language-text\">yarn outdated</code></a> and <a href=\"https://dependabot.com/\">Dependabot</a> on my personal projects to automate the update of my dependencies.</p>\n<h2 id=\"accepting-your-technical-debt\" style=\"position:relative;\"><a href=\"#accepting-your-technical-debt\" aria-label=\"accepting your technical debt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accepting your technical debt</h2>\n<p>A project will always accumulate technical debt.\n<strong>This is a fact.</strong>\nWhether it is voluntary or involuntary debt, a project that resists the years will inevitably accumulate debt.\nEven more so, if during all these years you keep adding features.</p>\n<p>Since 2014, our best practices, our ways of doing things have evolved well.\nSometimes we decided these changes but sometimes we underwent them (an example, the arrival of functional components with React and the Hooks api).</p>\n<p><strong>Our project is not completely <em>“state of art”</em> and we assume it.</strong></p>\n<p><img src=\"/c80d0cd308b5657d54f976a32fe2c811/leak.gif\" alt=\"It will hold!\"></p>\n<p>We try to prioritize our <em>refactoring</em> topics on the parts of the application on which we have the most concern, the most pain.\nWe consider that a part of the application that we don’t like but on which we don’t need to work (bring evolutions) doesn’t deserve that we refactor it.</p>\n<p>I could name many features of our application that have not evolved functionally for several years.\nBut since we have covered these features with E2E tests since the beginning, we didn’t really have to touch them.</p>\n<p>As said above, the next evolution of a code feature is sometimes its deactivation.\nSo why spend time rewriting the whole application?</p>\n<ul>\n<li>In any case, the code becomes “legacy”.</li>\n<li>As long as the features are tested, nothing obliges us to refactor everything permanently so that our entire codebase is <em>state of art</em>.</li>\n<li>We focus on our <em>pain points</em>, we re-factor what we really need to evolve.</li>\n</ul>\n<h2 id=\"to-summarize\" style=\"position:relative;\"><a href=\"#to-summarize\" aria-label=\"to summarize permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To summarize</h2>\n<p>The best practices presented here are obviously subjective and will not be perfectly/directly applicable in your contexts.\nHowever, I am convinced that they can probably help you identify what can make your project go from fun to stale.\nAt Bedrock we have other practices in place that I haven’t listed here but that will be the occasion for a new article sometime.</p>\n<p>Finally, if you want me to go into more detail on some of the chapters presented here, don’t hesitate to tell me, I could try to dedicate a specific article to it.</p>","headings":[{"value":"A bit of context"},{"value":"Set rules and automate them"},{"value":"The almost exhaustive list 🤞"},{"value":"Test, test, test"},{"value":"Our E2E tests"},{"value":"Our “unit” tests"},{"value":"Our principles"},{"value":"The project stays, the features don’t"},{"value":"A/B testing"},{"value":"The future flipping."},{"value":"Monitor, Measure, Alert"},{"value":"Limit, monitor and update your dependencies"},{"value":"Accepting your technical debt"},{"value":"To summarize"}],"wordCount":{"words":4098},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#a-bit-of-context\">A bit of context</a></p>\n</li>\n<li>\n<p><a href=\"#set-rules-and-automate-them\">Set rules and automate them</a></p>\n<ul>\n<li><a href=\"#the-almost-exhaustive-list-\">The <em>almost</em> exhaustive list 🤞</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#test-test-test\">Test, test, test</a></p>\n<ul>\n<li><a href=\"#our-e2e-tests\">Our E2E tests</a></li>\n<li><a href=\"#our-unit-tests\">Our “unit” tests</a></li>\n<li><a href=\"#our-principles\">Our principles</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#the-project-stays-the-features-dont\">The project stays, the features don’t</a></p>\n<ul>\n<li><a href=\"#ab-testing\">A/B testing</a></li>\n<li><a href=\"#the-future-flipping\">The <em>future flipping</em>.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#monitor-measure-alert\">Monitor, Measure, Alert</a></p>\n</li>\n<li>\n<p><a href=\"#limit-monitor-and-update-your-dependencies\">Limit, monitor and update your dependencies</a></p>\n</li>\n<li>\n<p><a href=\"#accepting-your-technical-debt\">Accepting your technical debt</a></p>\n</li>\n<li>\n<p><a href=\"#to-summarize\">To summarize</a></p>\n</li>\n</ul>","frontmatter":{"title":"Best practices for Web application maintenance","date":"September 05, 2021","dateJson":"2021-09-05","translations":["fr","comment-ne-pas-jeter-son-application-au-bout-de-deux-ans"],"description":"Comment ne pas jeter son projet au bout de 2 ans ? Retour d'expérience basé sur les bonnes pratiques appliquées à la plateforme web développée chez Bedrock Streaming.","language":"en","tags":["web","javascript","bedrock"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7730496453900708,"src":"/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg","srcSet":"/static/706dca8ff24a680a04318fad5f7a023c/8f7df/bedrock.jpg 250w,\n/static/706dca8ff24a680a04318fad5f7a023c/0f3a1/bedrock.jpg 500w,\n/static/706dca8ff24a680a04318fad5f7a023c/a7715/bedrock.jpg 1000w,\n/static/706dca8ff24a680a04318fad5f7a023c/37d86/bedrock.jpg 1500w,\n/static/706dca8ff24a680a04318fad5f7a023c/d8255/bedrock.jpg 1920w","srcWebp":"/static/706dca8ff24a680a04318fad5f7a023c/e30b5/bedrock.webp","srcSetWebp":"/static/706dca8ff24a680a04318fad5f7a023c/7ca0e/bedrock.webp 250w,\n/static/706dca8ff24a680a04318fad5f7a023c/e9589/bedrock.webp 500w,\n/static/706dca8ff24a680a04318fad5f7a023c/e30b5/bedrock.webp 1000w,\n/static/706dca8ff24a680a04318fad5f7a023c/90fb1/bedrock.webp 1500w,\n/static/706dca8ff24a680a04318fad5f7a023c/25f09/bedrock.webp 1920w","sizes":"(max-width: 1000px) 100vw, 1000px"},"image":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/10d63/bedrock.jpg"},"image16x9":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/6edcc/bedrock.jpg"},"image4x3":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/e14ae/bedrock.jpg"},"image1x1":{"src":"/static/706dca8ff24a680a04318fad5f7a023c/db124/bedrock.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"After 2 years using React with Redux for the video platform 6play, I was able to identify good practices and pitfalls to avoid at all costs…","fields":{"slug":"/react-redux-pitfalls-and-best-pratices/"},"timeToRead":12,"frontmatter":{"title":"React/Redux: pitfalls and best practices","date":"April 04, 2020","dateJson":"2020-04-04","description":"We use React and Redux for almost 4 years at Bedrock on our video platform named 6play. Good practices and mistakes to be avoided have been gathered in this article.","tags":["react","redux","web"]}}},{"node":{"excerpt":"First things first: I’m not an Internet warrior. I do not wish to make Dev.to’s judgment here nor am I trying to convince you that this…","fields":{"slug":"/stop-dev-to/"},"timeToRead":3,"frontmatter":{"title":"Why you should not publish content on Dev.to?","date":"July 18, 2019","dateJson":"2019-07-18","description":"What is the futur of dev.to, will it be as bad as Medium ? Will it steal your content under a paywall? Should you only publish your content on a third party site.","tags":["publication","web"]}}}]}},"pageContext":{"slug":"/how-not-to-throw-away-your-web-application-after-two-years/","tags":["web","javascript","bedrock"],"language":"en","previous":{"fields":{"slug":"/how-to-setup-e2e-tests-with-webdriverio/"},"frontmatter":{"title":"How to setup end to end tests with WebdriverIo on Github action ?","tags":["github","action","e2e","WebdriverIo"]}},"next":null}},
    "staticQueryHashes": ["1264045386","1666466174","2564629789","4061151221","62118570"]}