{"componentChunkName":"component---src-templates-blog-post-js","path":"/vite-webpack-killer/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://slashgear.github.io"}},"config":{"html":"<p>Written by <strong>Antoine Caron</strong> who lives and works in Lyon (France) building useful things at <a href=\"https://www.bedrockstreaming.com/\">Bedrock</a>.\nYou should follow him <a href=\"https://twitter.com/Slashgear_\">on Twitter</a>.\nTake a look at <a href=\"/friends-you-should-follow\">my friends websites</a>.\nYou could also <a href=\"/conferences\">take a look at the conferences I gave</a>.\nIf you want to see my professional background, <a href=\"/resume\">my resume is available here</a>.</p>","fields":{"slug":"/"},"frontmatter":{"title":"Antoine Caron","language":"en"}},"markdownRemark":{"id":"5d76b9b3-21bf-5283-ab14-9c9bb6b2790a","excerpt":"After having dealt on this blog in several articles about webpack, I have started a new series of articles about new generation bundlers.\nIt‚Ä¶","html":"<p>After having dealt on this blog <a href=\"/en/webpack/\">in several articles about webpack</a>, I have started a new series of articles about new generation bundlers.\nIt seems that we are now entering a new era of web tooling.</p>\n<p>Having introduced <a href=\"../esbuild-bundler-incredibly-fast-and-promising\">esbuild and its interesting features</a>, it seems logical to me to deal with the <em>‚Äúlittle brothers‚Äù</em> bundlers.\nSo let‚Äôs start with Vite, a project from the VueJS community and started by <a href=\"https://github.com/yyx990803\">Evan You</a>.</p>\n<h2 id=\"same-starting-point\" style=\"position:relative;\"><a href=\"#same-starting-point\" aria-label=\"same starting point permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Same starting point</h2>\n<p>With <code class=\"language-text\">Vite</code> we are in the same situation as with <code class=\"language-text\">esbuild</code>.\nGlobally the community is happy with the current tools even if they have some performance issues.</p>\n<p>As I said in my previous article, having a big JS project today often means having a dev and prod environment that is sometimes a bit slow.\nBetween the choice of tools that do not sufficiently exploit parallelization or memory optimization, or repetitive operations that exploit caching very little, it is easy to identify culprits for these slowness.</p>\n<p>NB: I have proposed some solutions to <a href=\"/hunting-webpack-performances/\">improve the performance of your webpack build in this article</a>._</p>\n<p>Moreover, the <em>second generation</em> tools (like webpack, Rollup, Parcel) could not handle from the beginning <a href=\"https://caniuse.com/?search=es6\">recent features of our browsers like ESmodules</a>.</p>\n<h2 id=\"what-is-the-idea\" style=\"position:relative;\"><a href=\"#what-is-the-idea\" aria-label=\"what is the idea permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is the idea?</h2>\n<p>The <em>revolutionary</em> idea of <code class=\"language-text\">Vite</code> is to combine two tools for two different needs in order to optimize the build to be as fast as possible.\nThe two tools that make up <code class=\"language-text\">Vite</code> are <code class=\"language-text\">esbuild</code> and <code class=\"language-text\">Rollup</code>, so nothing new.\nBut why two bundling tools?\nBasically, for two reasons:</p>\n<ul>\n<li>Our dependencies don‚Äôt change often, so re-evaluating their module tree at each build is not necessary.\nWe can generate the bundle of our <em>vendor</em> once and for all with an optimized tool like <code class=\"language-text\">esbuild</code>.\nThis bundler is very fast and allows a quick start of the server.</li>\n<li>The modules in our source code are subject to a lot of changes unlike the dependencies.\nSo <code class=\"language-text\">Vite</code> uses another treatment based on ESM that works natively on recent browsers.</li>\n</ul>\n<p>Feel free to read <a href=\"https://vitejs.dev/guide/why.html\">this doc page</a> for more details.</p>\n<h2 id=\"in-fact-how-does-it-work\" style=\"position:relative;\"><a href=\"#in-fact-how-does-it-work\" aria-label=\"in fact how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>In fact, how does it work?</h2>\n<p>In order to play a little with the tool, I propose a small presentation through an example project.\nLet‚Äôs start by creating an example project.\nI show you here how to create it and put you <a href=\"https://github.com/Slashgear/example-vite\">the link of the github repository in which I published it</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> <span class=\"token string\">\"example-vite\"</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token string\">\"example-vite\"</span>\n\n<span class=\"token function\">git</span> init\n<span class=\"token function\">yarn</span> init -y</code></pre></div>\n<p>Installing <code class=\"language-text\">Vite</code> is very easy, you just need a dependency.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D vite</code></pre></div>\n<p>For the purpose of this example, I propose an example with React (there are already many examples with Vue üòâ )</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> react react-dom</code></pre></div>\n<p>Let‚Äôs add 3 usual commands to launch <code class=\"language-text\">Vite</code> in the <code class=\"language-text\">package.json</code> file</p>\n<p><em>package.json</em></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite preview\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Finally, we need some small source files for <code class=\"language-text\">Vite</code> to play with.</p>\n<p><em>index.html</em></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Example Application with Vite<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/src/main.jsx<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><em>src/main.jsx</em></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello world dear readers ! </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now you just have to start the development server with this command.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> dev</code></pre></div>\n<p>üéâ Normally, within milliseconds <code class=\"language-text\">Vite</code> has started a server and if you go to <code class=\"language-text\">https://localhost:3000</code> that presents you with this beautiful application.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecfcfb4ed066b92cd028720b818f6498/a878e/step1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAW0lEQVQ4y+2OMQ4AIQgE/f//DIaGL6jYWOhe4AF3klzpJGS3gAmJiMDMEBHknD1LKZ5zThh7b5ySaq3ovUNVYd2ytYYxBtZaceHXQkTmQjt4m98/jHKFV3iFJzyKDKdDLp42nAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ecfcfb4ed066b92cd028720b818f6498/ba381/step1.webp 200w,\n/static/ecfcfb4ed066b92cd028720b818f6498/7f61c/step1.webp 400w,\n/static/ecfcfb4ed066b92cd028720b818f6498/d00b9/step1.webp 800w,\n/static/ecfcfb4ed066b92cd028720b818f6498/92f8c/step1.webp 1200w,\n/static/ecfcfb4ed066b92cd028720b818f6498/fad48/step1.webp 1600w,\n/static/ecfcfb4ed066b92cd028720b818f6498/8df42/step1.webp 2048w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ecfcfb4ed066b92cd028720b818f6498/772e8/step1.png 200w,\n/static/ecfcfb4ed066b92cd028720b818f6498/e17e5/step1.png 400w,\n/static/ecfcfb4ed066b92cd028720b818f6498/5a190/step1.png 800w,\n/static/ecfcfb4ed066b92cd028720b818f6498/c1b63/step1.png 1200w,\n/static/ecfcfb4ed066b92cd028720b818f6498/29007/step1.png 1600w,\n/static/ecfcfb4ed066b92cd028720b818f6498/a878e/step1.png 2048w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ecfcfb4ed066b92cd028720b818f6498/5a190/step1.png\"\n            alt=\"screenshot\"\n            title=\"screenshot\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Let‚Äôs not lie, it‚Äôs a bit sad, let‚Äôs see how <code class=\"language-text\">Vite</code> does if we add some CSS.\nLet‚Äôs put a beautiful color <a href=\"https://fr.wikipedia.org/wiki/Chartreuse_(liqueur)\">chartreuse</a> to this title.\nLet‚Äôs add the following stylesheet.</p>\n<p><em>src/index.css</em></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> chartreuse<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then we just need to add an import to this new file.\n<em>src/main.jsx</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token string\">'./index.css'</span></code></pre></div>\n<p>There, now you have a beautiful color that <a href=\"https://webaim.org/articles/contrast/\">clearly lacks contrast to be accessible</a>!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2aaad3951aca659eb0a22b3c34b502a/a878e/step2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWklEQVQ4y+2OOQ6AMAwE8///gRANNYcQR0GQIEPsB0AsUXq3GBf2yGGgZqJlpqOnUo40yosTScotTThYiGz5dEdmYWRV3rlm4deCRabCxHt//9AaF7rQhSV5ABXdqVcnwLzIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e2aaad3951aca659eb0a22b3c34b502a/ba381/step2.webp 200w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/7f61c/step2.webp 400w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/d00b9/step2.webp 800w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/92f8c/step2.webp 1200w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/fad48/step2.webp 1600w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/8df42/step2.webp 2048w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e2aaad3951aca659eb0a22b3c34b502a/772e8/step2.png 200w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/e17e5/step2.png 400w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/5a190/step2.png 800w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/c1b63/step2.png 1200w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/29007/step2.png 1600w,\n/static/e2aaad3951aca659eb0a22b3c34b502a/a878e/step2.png 2048w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e2aaad3951aca659eb0a22b3c34b502a/5a190/step2.png\"\n            alt=\"screenshot with colors\"\n            title=\"screenshot with colors\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>If you now try to run the <code class=\"language-text\">yarn build</code> command, you can see that <code class=\"language-text\">Vite</code> will build you a <code class=\"language-text\">dist</code> folder.\nWithout any settings I have these different resources ready to be deployed on a static server.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/852748a3553e76e77e6a76bfd5bb4f86/29f4e/dist_screenshot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQoz4WSy26DMBBF8z3dtIEkEAKYRzDG4ZUmaZu+pC5aqZt+QH/+dsaECCGkLq5sj+H4Xo9nItmiPZ3x8vGJLLegdg7CWGATxvBFRGNEYzwp3hvu83wWxilU2eB4fiWYi0y5tJHAC5Ir9D8NwTMvEBAEFUmKz59f1PcFdHmDqrWQ65WBMnysrh4Pklwc9naDKEEiFeROoTlqir8koEMHBUilhyTbYJuvzTze+qYepf4V1rmNO2Bvd7XxcdItvg7vkMUCVTOHVA6KcmFU729RUo3F7ne1NQ3sF2uKrwqNp4NGTsCyscipe/0510voyjZrSXc9jjwAdvKCiD7M8XxMKZprIpuYmWeaxbH7A2ThjBpzAQ475Kx9cqbx9kAOtU1uyCU5Y2jV3hn1sXnOe3yf7HQUmd0JlIcTikpiX9smEoPUbmlGbkIQiYsiequhqU3cIU245YKA3znUY0CQOd2ZbWKyS47XPYtpDSP/ASXLYOoYdRJDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/852748a3553e76e77e6a76bfd5bb4f86/ba381/dist_screenshot.webp 200w,\n/static/852748a3553e76e77e6a76bfd5bb4f86/7f61c/dist_screenshot.webp 400w,\n/static/852748a3553e76e77e6a76bfd5bb4f86/6b97b/dist_screenshot.webp 506w\"\n              sizes=\"(max-width: 506px) 100vw, 506px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/852748a3553e76e77e6a76bfd5bb4f86/772e8/dist_screenshot.png 200w,\n/static/852748a3553e76e77e6a76bfd5bb4f86/e17e5/dist_screenshot.png 400w,\n/static/852748a3553e76e77e6a76bfd5bb4f86/29f4e/dist_screenshot.png 506w\"\n            sizes=\"(max-width: 506px) 100vw, 506px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/852748a3553e76e77e6a76bfd5bb4f86/29f4e/dist_screenshot.png\"\n            alt=\"dist directory screenshot\"\n            title=\"dist directory screenshot\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>We can observe that natively <code class=\"language-text\">Vite</code> exports 2 javascript bundles (1 for the sources, 1 for the <em>vendors/dependencies</em>) and a CSS bundle that exports the style that has been imported in your application.\nAnd this is clearly a big plus of <code class=\"language-text\">Vite</code> compared to the competition of other tools (although parcel offers some of the same logic).\nThe <em>build</em> is extremely fast and does what you would expect it to do without having to configure it.\nSorry but I think it‚Äôs great!</p>\n<p>I don‚Äôt know if you know <a href=\"https://www.npmjs.com/package/react-refresh\"><code class=\"language-text\">react-refresh</code></a>, the official React package that allows you to optimize the auto-refresh of a React application.\nThis package allows you to update your React components on the fly without them losing their <em>state</em>.\n<code class=\"language-text\">Vite</code> even though it was born out of the VueJS community, is not specifically oriented towards a frontend framework.\nTools like <code class=\"language-text\">react-refresh</code> are therefore not included by default.\nSo you have to define it in the configuration.\nUnfortunately, <code class=\"language-text\">Vite</code> doesn‚Äôt fare any better than the other tools; we are forced to define yet another config file at the root of the project.</p>\n<p>So let‚Äôs install the plugin:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @vitejs/plugin-react-refresh</code></pre></div>\n<p><em>vite.config.js</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span>\n<span class=\"token keyword\">import</span> reactRefresh <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-react-refresh'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">reactRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now I wanted to test some of the more advanced features that you can expect from a quality bundler.\nSo I set up a single page application that uses <em>lazy loading</em>.\nI won‚Äôt show you how I did it in this article, it would be too long but you can go directly to <a href=\"https://example-vite.netlify.app/\">test it in your browser</a>.</p>\n<p>So clearly for <em>lazy loading</em> it‚Äôs easy with <code class=\"language-text\">Vite</code>, I‚Äôm amazed!\nThe tool immediately detects my use of the dynamic import <code class=\"language-text\">import()</code> to generate a separate chunk for the JS but also the CSS.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Content <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./lazy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6eef089760b01de631514fceb06f8bd4/432e7/lazy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABjklEQVQoz32S61LCMBCFeSQGFeiFNJfSNm1tYQAdqw6i44zv/wLH3YbWdqz+OGwI5NtzNplJE+PYnJFXFttsAaEk/I1CIBTCSJJ+10B038dr1ow/9g/PqA81ytqDNCFBo1YOMC1u2MGG0FnACxGhPjVo3j6Q2DmBb8jtGl5oyK3u5YWudu6H0JFD3gwIKrTBfpchtUvY8hZx6iHNl72Ke9dIKDGCjoBD20JvcW5q2HzVAhM6zJCclBEwK+4owQoqDgcznnDI8gkYmy3ej69IMx+WIHyYwSyGdk3Y7Y+7P4ERDDm8HF+QF8sWxo4YVFQLmuui3/s3cg/cSBh6Qp9PTRuZD/MM86vDbo68N3Y36dC9vW0i8XVOUJTkMF/2UfMBkC9lGHXCofvBDyNsohjNqUSSrtuYnSOOW+3nbYOicpcUaTE9Q970AgFtM5SPO1StK3oymZuXTiiipGZS0AGubs2vwhfuMl11mmmj6DIMsoNCdVGwdo2qprjWp+h0o2kIpTW0VuD/trVbG3mtP/oGS5qne8O94OAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6eef089760b01de631514fceb06f8bd4/ba381/lazy.webp 200w,\n/static/6eef089760b01de631514fceb06f8bd4/7f61c/lazy.webp 400w,\n/static/6eef089760b01de631514fceb06f8bd4/048c8/lazy.webp 570w\"\n              sizes=\"(max-width: 570px) 100vw, 570px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6eef089760b01de631514fceb06f8bd4/772e8/lazy.png 200w,\n/static/6eef089760b01de631514fceb06f8bd4/e17e5/lazy.png 400w,\n/static/6eef089760b01de631514fceb06f8bd4/432e7/lazy.png 570w\"\n            sizes=\"(max-width: 570px) 100vw, 570px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6eef089760b01de631514fceb06f8bd4/432e7/lazy.png\"\n            alt=\"lazy loading dist screenshot\"\n            title=\"lazy loading dist screenshot\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"the-strengths-of-vite\" style=\"position:relative;\"><a href=\"#the-strengths-of-vite\" aria-label=\"the strengths of vite permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The strengths of Vite</h2>\n<p>It is clear that <code class=\"language-text\">Vite</code> has many nice features and advantages.\nBesides its incredible speed, I would like to note that this bundler offers a really well thought out <em>autoconfiguration</em>.</p>\n<p>In the demo I gave you earlier, I didn‚Äôt show you that <code class=\"language-text\">Vite</code> handles natively and without configuration <em>static files, Web Workers, WASM binaries</em>.\nBut it doesn‚Äôt stop there, we have to admit that this <em>magical</em> tool also natively supports <strong>JSX and Typescript</strong>.</p>\n<p>When it comes to style management, <code class=\"language-text\">Vite</code> is not to be outdone.\nWithout any plugin or configuration, it allows you to manage CSS <code class=\"language-text\">@imports</code>, preprocessors like <strong>SASS and LESS, CSS modules</strong> and even the postprocessor <em>PostCSS</em> (if you define a configuration).</p>\n<p>More anecdotally, <code class=\"language-text\">Vite</code> knows how to manage your <code class=\"language-text\">.env</code> file to manage your environment variables thanks to <a href=\"https://github.com/motdotla/dotenv\">dotenv</a>.</p>\n<p>But the feature that completely blew me away was the rather simple setup of the <a href=\"https://tech.bedrockstreaming.com/spa-mode-isomorphism-js/\">SSR</a>.</p>\n<p><img src=\"/0e9e962814ce9f4e10f1810913a40893/surprise.gif\" alt=\"surprise\"></p>\n<p>This is the first time I‚Äôm talking about a <em>bundler</em> that natively handles <strong>Server Side Rendering</strong>.\nI use other tools in production for the different applications I develop.\nUnfortunately, it is still very complicated to set up such an architecture (even with tools like Webpack).</p>\n<p>So we can see that developers are mainly turning to turnkey solutions like Next and Nuxt to manage these issues for them.\nThis is not a bad thing in itself.\nHowever, I think that it is sometimes necessary in some projects to take control of this functionality for business needs.\nSo we can only be happy that tools like <code class=\"language-text\">Vite</code> have thought about it.\nI invite you to go <a href=\"https://vitejs.dev/guide/ssr.html#ssr-externals\">read this page of the documentation of <code class=\"language-text\">Vite</code></a> to understand how to implement this.</p>\n<h2 id=\"so-we-stop-using-webpack\" style=\"position:relative;\"><a href=\"#so-we-stop-using-webpack\" aria-label=\"so we stop using webpack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>So we stop using webpack?</h2>\n<p>After this laudatory presentation of this tool, one could ask the question yes.\nHowever, you should not forget a simple rule.</p>\n<blockquote>\n<p>Everything that a tool tends to do magically for you often becomes much more complicated to customize.</p>\n</blockquote>\n<p>The many choices <code class=\"language-text\">Vite</code> seems to make to improve the <em>developer experience</em> worry me a bit.\nI‚Äôm a bit afraid that all this default configuration will be complicated to maintain by the <code class=\"language-text\">Vite</code> teams.</p>\n<p>Contrary to <code class=\"language-text\">esbuild</code> which has the motto <em>‚ÄúI want to offer a tool that does few things but does them very well‚Äù</em>, we have here a tool that makes a lot of promises.\nHowever, we must recognize that <code class=\"language-text\">Vite</code> also offers to use and define plugins to extend its functionalities without making them native to the main tool.</p>\n<p>Moreover, it should not be forgotten that <code class=\"language-text\">Vite</code> is also based on <code class=\"language-text\">Rollup</code>, a second generation bundler that benefits from a rich ecosystem of plugins that are mostly compatible.\nBut the Rollup configuration is very complicated to edit and maintain, so I hope you won‚Äôt have to touch it if you are tempted to test <code class=\"language-text\">Vite</code> on your applications.</p>\n<p>I would like to point out that some tools like VuePress offer today an alternative <a href=\"https://vitepress.vuejs.org/\">Vitepress</a> which uses <code class=\"language-text\">Vite</code> as a bundler.</p>\n<p>Before jumping on the <code class=\"language-text\">Vite</code> solution, I suggest you to test another third generation bundler which is much talked about: <a href=\"https://www.snowpack.dev/\">Snowpack</a></p>\n<blockquote>\n<p>Stay tuned!</p>\n</blockquote>","headings":[{"value":"Same starting point"},{"value":"What is the idea?"},{"value":"In fact, how does it work?"},{"value":"The strengths of Vite"},{"value":"So we stop using webpack?"}],"wordCount":{"words":1348},"tableOfContents":"<ul>\n<li><a href=\"/vite-webpack-killer/#same-starting-point\">Same starting point</a></li>\n<li><a href=\"/vite-webpack-killer/#what-is-the-idea\">What is the idea?</a></li>\n<li><a href=\"/vite-webpack-killer/#in-fact-how-does-it-work\">In fact, how does it work?</a></li>\n<li><a href=\"/vite-webpack-killer/#the-strengths-of-vite\">The strengths of Vite</a></li>\n<li><a href=\"/vite-webpack-killer/#so-we-stop-using-webpack\">So we stop using webpack?</a></li>\n</ul>","frontmatter":{"title":"Vite, a new webpack killer ?!üòÆ","date":"March 26, 2021","dateJson":"2021-03-26","translations":["fr","vitejs-concurrent-performant-webpack-pour-react"],"description":"After studying solutions such as Webpack and Esbuild, I had to look at tools such as Vite which, in my eyes, is part of a new generation.","language":"en","tags":["webpack","esbuild","vitejs","bundler"],"hero":{"childImageSharp":{"fluid":{"aspectRatio":1.7730496453900708,"src":"/static/c20149934693e773dc7e6cf7619d7b04/a7715/vitejs.jpg","srcSet":"/static/c20149934693e773dc7e6cf7619d7b04/8f7df/vitejs.jpg 250w,\n/static/c20149934693e773dc7e6cf7619d7b04/0f3a1/vitejs.jpg 500w,\n/static/c20149934693e773dc7e6cf7619d7b04/a7715/vitejs.jpg 1000w,\n/static/c20149934693e773dc7e6cf7619d7b04/ec6c5/vitejs.jpg 1280w","srcWebp":"/static/c20149934693e773dc7e6cf7619d7b04/e30b5/vitejs.webp","srcSetWebp":"/static/c20149934693e773dc7e6cf7619d7b04/7ca0e/vitejs.webp 250w,\n/static/c20149934693e773dc7e6cf7619d7b04/e9589/vitejs.webp 500w,\n/static/c20149934693e773dc7e6cf7619d7b04/e30b5/vitejs.webp 1000w,\n/static/c20149934693e773dc7e6cf7619d7b04/135cd/vitejs.webp 1280w","sizes":"(max-width: 1000px) 100vw, 1000px"},"image":{"src":"/static/c20149934693e773dc7e6cf7619d7b04/10d63/vitejs.jpg"},"image16x9":{"src":"/static/c20149934693e773dc7e6cf7619d7b04/6edcc/vitejs.jpg"},"image4x3":{"src":"/static/c20149934693e773dc7e6cf7619d7b04/e14ae/vitejs.jpg"},"image1x1":{"src":"/static/c20149934693e773dc7e6cf7619d7b04/db124/vitejs.jpg"}}}}},"relatedPosts":{"edges":[{"node":{"excerpt":"After webpack, esbuild and vitejs, let‚Äôs take a look at snowpack.\nThe latter seems to be making a name for itself in the bundler ecosystem‚Ä¶","fields":{"slug":"/should-snowpack-replace-webpack/"},"timeToRead":7,"frontmatter":{"title":"Should we replace webpack by üóª Snowpack üóª?Ô∏è","date":"June 02, 2021","dateJson":"2021-06-02","description":"After articles on esbuild, quickly, I propose you to discover together snowpack to make an opinion.","tags":["webpack","snowpack","vitejs","bundler"]}}},{"node":{"excerpt":"I‚Äôve been playing with JS bundlers for several years.\nStill convinced of the necessity of using these tools (don‚Äôt let me believe that you‚Ä¶","fields":{"slug":"/esbuild-incredibly-fast-and-promising/"},"timeToRead":6,"frontmatter":{"title":"Esbuild, the incredibly fast üí® and promising bundler üìà!","date":"March 14, 2021","dateJson":"2021-03-14","description":"Playing with traditional bundlers like webpack for several years, I propose here my opinion on the esbuild bundler.","tags":["webpack","js","bundler"]}}},{"node":{"excerpt":"How did I cut in half my project‚Äôs webpack build time ? Who never complained about the infinite duration of a webpack build on a project ?\nI‚Ä¶","fields":{"slug":"/hunting-webpack-performances/"},"timeToRead":6,"frontmatter":{"title":"How to boost the speed of your webpack build?","date":"March 01, 2020","dateJson":"2020-03-01","description":"A story of performance optimization and application of the Pareto principle to a webpack build that has become far too long.","tags":["webpack","webperf"]}}},{"node":{"excerpt":"If you need to use webpack for your project. You are very often forced by  who have done the Job for you. You don‚Äôt know what webpack is for‚Ä¶","fields":{"slug":"/learn-webpack/"},"timeToRead":1,"frontmatter":{"title":"Learning webpack Step By Step","date":"July 23, 2019","dateJson":"2019-07-23","description":"webpack bundler seems to feel really complicated to learn but it tend to be much more simpler now. I made up some workshops in order to learn concepts.","tags":["webpack","mooc","learn"]}}}]}},"pageContext":{"slug":"/vite-webpack-killer/","tags":["webpack","esbuild","vitejs","bundler"],"language":"en","previous":{"fields":{"slug":"/esbuild-incredibly-fast-and-promising/"},"frontmatter":{"title":"Esbuild, the incredibly fast üí® and promising bundler üìà!","tags":["webpack","js","bundler"]}},"next":{"fields":{"slug":"/should-snowpack-replace-webpack/"},"frontmatter":{"title":"Should we replace webpack by üóª Snowpack üóª?Ô∏è","tags":["webpack","snowpack","vitejs","bundler"]}}}},"staticQueryHashes":["1264045386","1666466174","4061151221"]}